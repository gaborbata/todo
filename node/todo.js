#!/usr/bin/env node
(function(){var $a=$a||{};$a.scope={};$a.ASSUME_ES5=!1;$a.ASSUME_NO_NATIVE_MAP=!1;$a.ASSUME_NO_NATIVE_SET=!1;$a.SIMPLE_FROUND_POLYFILL=!1;$a.ISOLATE_POLYFILLS=!1;$a.FORCE_POLYFILL_PROMISE=!1;$a.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$a.defineProperty=$a.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,y,J){if(a==Array.prototype||a==Object.prototype)return a;a[y]=J.value;return a};
$a.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var y=0;y<a.length;++y){var J=a[y];if(J&&J.Math==Math)return J}throw Error("Cannot find global object");};$a.global=$a.getGlobal(this);$a.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$a.TRUST_ES6_POLYFILLS=!$a.ISOLATE_POLYFILLS||$a.IS_SYMBOL_NATIVE;$a.polyfills={};$a.propertyToPolyfillSymbol={};
$a.POLYFILL_PREFIX="$jscp$";$a.polyfill=function(a,y,J,t){y&&($a.ISOLATE_POLYFILLS?$a.polyfillIsolated(a,y,J,t):$a.polyfillUnisolated(a,y,J,t))};$a.polyfillUnisolated=function(a,y){var J=$a.global;a=a.split(".");for(var t=0;t<a.length-1;t++){var w=a[t];if(!(w in J))return;J=J[w]}a=a[a.length-1];t=J[a];y=y(t);y!=t&&null!=y&&$a.defineProperty(J,a,{configurable:!0,writable:!0,value:y})};
$a.polyfillIsolated=function(a,y,J){var t=a.split(".");a=1===t.length;var w=t[0];w=!a&&w in $a.polyfills?$a.polyfills:$a.global;for(var z=0;z<t.length-1;z++){var p=t[z];if(!(p in w))return;w=w[p]}t=t[t.length-1];J=$a.IS_SYMBOL_NATIVE&&"es6"===J?w[t]:null;y=y(J);null!=y&&(a?$a.defineProperty($a.polyfills,t,{configurable:!0,writable:!0,value:y}):y!==J&&(void 0===$a.propertyToPolyfillSymbol[t]&&($a.propertyToPolyfillSymbol[t]=$a.IS_SYMBOL_NATIVE?$a.global.Symbol(t):$a.POLYFILL_PREFIX+t),$a.defineProperty(w,
$a.propertyToPolyfillSymbol[t],{configurable:!0,writable:!0,value:y})))};$a.underscoreProtoCanBeSet=function(){var a={a:!0},y={};try{return y.__proto__=a,y.a}catch(J){}return!1};$a.setPrototypeOf=$a.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$a.underscoreProtoCanBeSet()?function(a,y){a.__proto__=y;if(a.__proto__!==y)throw new TypeError(a+" is not extensible");return a}:null;
$a.polyfill("Object.setPrototypeOf",function(a){return a||$a.setPrototypeOf},"es6","es5");$a.arrayIteratorImpl=function(a){var y=0;return function(){return y<a.length?{done:!1,value:a[y++]}:{done:!0}}};$a.arrayIterator=function(a){return{next:$a.arrayIteratorImpl(a)}};$a.initSymbol=function(){};
$a.polyfill("Symbol",function(a){function y(w){if(this instanceof y)throw new TypeError("Symbol is not a constructor");return new J("jscomp_symbol_"+(w||"")+"_"+t++,w)}function J(w,z){this.$jscomp$symbol$id_=w;$a.defineProperty(this,"description",{configurable:!0,writable:!0,value:z})}if(a)return a;J.prototype.toString=function(){return this.$jscomp$symbol$id_};var t=0;return y},"es6","es3");
$a.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var y="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),J=0;J<y.length;J++){var t=$a.global[y[J]];"function"===typeof t&&"function"!=typeof t.prototype[a]&&$a.defineProperty(t.prototype,a,{configurable:!0,writable:!0,value:function(){return $a.iteratorPrototype($a.arrayIteratorImpl(this))}})}return a},"es6","es3");
$a.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$a.iteratorFromArray=function(a,y){a instanceof String&&(a+="");var J=0,t=!1,w={next:function(){if(!t&&J<a.length){var z=J++;return{value:y(z,a[z]),done:!1}}t=!0;return{done:!0,value:void 0}}};w[Symbol.iterator]=function(){return w};return w};$a.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $a.iteratorFromArray(this,function(y){return y})}},"es6","es3");
$a.owns=function(a,y){return Object.prototype.hasOwnProperty.call(a,y)};$a.assign=$a.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,y){for(var J=1;J<arguments.length;J++){var t=arguments[J];if(t)for(var w in t)$a.owns(t,w)&&(a[w]=t[w])}return a};$a.polyfill("Object.assign",function(a){return a||$a.assign},"es6","es3");$a.polyfill("Number.EPSILON",function(){return Math.pow(2,-52)},"es6","es3");
$a.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");$a.checkStringArgs=function(a,y,J){if(null==a)throw new TypeError("The 'this' value for String.prototype."+J+" must not be null or undefined");if(y instanceof RegExp)throw new TypeError("First argument to String.prototype."+J+" must not be a regular expression");return a+""};
$a.polyfill("String.prototype.codePointAt",function(a){return a?a:function(y){var J=$a.checkStringArgs(this,null,"codePointAt"),t=J.length;y=Number(y)||0;if(0<=y&&y<t){y|=0;var w=J.charCodeAt(y);if(55296>w||56319<w||y+1===t)return w;y=J.charCodeAt(y+1);return 56320>y||57343<y?w:1024*(w-55296)+y+9216}}},"es6","es3");$a.polyfill("String.prototype.trimLeft",function(a){function y(){return this.replace(/^[\s\xa0]+/,"")}return a||y},"es_2019","es3");
$a.polyfill("Object.is",function(a){return a?a:function(y,J){return y===J?0!==y||1/y===1/J:y!==y&&J!==J}},"es6","es3");$a.polyfill("Array.prototype.includes",function(a){return a?a:function(y,J){var t=this;t instanceof String&&(t=String(t));var w=t.length;J=J||0;for(0>J&&(J=Math.max(J+w,0));J<w;J++){var z=t[J];if(z===y||Object.is(z,y))return!0}return!1}},"es7","es3");
$a.polyfill("String.prototype.includes",function(a){return a?a:function(y,J){return-1!==$a.checkStringArgs(this,y,"includes").indexOf(y,J||0)}},"es6","es3");
(function(a){function y(b,h,f){"string"===typeof b?b[h]=f:Object.defineProperty(b,h,{value:f,enumerable:!1,configurable:!0,writable:!0})}function J(b,h){if(b)return b.$$const[h]}function t(b,h){var f;if(null!=b){var q=e.ancestors(b);b=0;for(f=q.length;b<f;b++)if(q[b].$$const&&n.call(q[b].$$const,h))return q[b].$$const[h]}}function w(b,h,f){if(!f)return(b||k).$const_missing(h)}function z(b){return b.hasOwnProperty("$$iclass")&&b.hasOwnProperty("$$root")}function p(b){var h=d(b);b.$$is_module&&b.$$iclasses.push(h);
return h}function d(b){var h={},f=b.$$prototype;f.hasOwnProperty("$$dummy")&&(f=f.$$define_methods_on);var q=Object.getOwnPropertyNames(f),A=q.length,E;for(E=0;E<A;E++){var G=q[E];y(h,G,f[G])}y(h,"$$iclass",!0);y(h,"$$module",b);return h}function H(b){var h=b.length,f=b[0];y(f,"$$root",!0);if(1===h)return{first:f,last:f};for(var q=1;q<h;q++){var A=b[q];D(f,A);f=A}return{first:b[0],last:b[h-1]}}function x(b){if(!b.hasOwnProperty("$$dummy")){if(b.hasOwnProperty("$$iclass"))return b.$$module;if(b.hasOwnProperty("$$class"))return b.$$class}}
function l(b){return"function"===typeof b&&!b.$$stub}function m(){var b=e.slice.call(arguments,0,arguments.length),h=m.$$p;m.$$p=null;return e.send(k,"define_method",b,h)}"undefined"!==typeof globalThis?a=globalThis:"undefined"!==typeof global?a=global:"undefined"!==typeof window&&(a=window);var u="object"===typeof a.console?a.console:null==a.console?a.console={}:{};"log"in u||(u.log=function(){});"warn"in u||(u.warn=u.log);if("undefined"!==typeof a.Opal)return u.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),
a.Opal;var c,k,I,e=a.Opal={};e.global=a;a.Opal=e;e.config={missing_require_severity:"error",unsupported_features_severity:"warning",enable_stack_trace:!0};var n=Object.hasOwnProperty,L=Function.prototype.bind,D=Object.setPrototypeOf,R=Array.prototype.slice,ka=Array.prototype.splice,da=4;e.uid=function(){return da+=2};e.id=function(b){if(b.$$is_number)return 2*b+1;if(null!=b.$$id)return b.$$id;y(b,"$$id",e.uid());return b.$$id};e.gvars={};e.exit=function(b){e.gvars.DEBUG&&u.log("Exited with status "+
b)};e.exceptions=[];e.pop_exception=function(){e.gvars["!"]=e.exceptions.pop()||ma};e.inspect=function(b){return void 0===b?"undefined":null===b?"null":b.$$class?b.$inspect():b.toString()};e.defineProperty=y;e.slice=R;e.truthy=function(b){return b!==ma&&null!=b&&(!b.$$is_boolean||1==b)};e.falsy=function(b){return b===ma||null==b||b.$$is_boolean&&0==b};e.type_error=function(b,h,f,q){b=b.$$class;return q&&f?(q=q.$$class,e.TypeError.$new("can't convert "+b+" into "+h+" ("+b+"#"+f+" gives "+q+")")):e.TypeError.$new("no implicit conversion of "+
b+" into "+h)};e.coerce_to=function(b,h,f,q){if(h["$==="](b))return b;if(!b["$respond_to?"](f))throw e.type_error(b,h);null==q&&(q=[]);return e.send(b,f,q)};e.respond_to=function(b,h,f){if(null==b||!b.$$class)return!1;f=!!f;var q=b[h];return b["$respond_to?"].$$pristine?b["$respond_to_missing?"].$$pristine?"function"===typeof q&&!q.$$stub:e.send(b,b["$respond_to_missing?"],[h.substr(1),f]):e.send(b,b["$respond_to?"],[h.substr(1),f])};e.const_get_local=function(b,h,f){if(null!=b){"::"===b&&(b=k);if(!b.$$is_module&&
!b.$$is_class)throw new e.TypeError(b.toString()+" is not a class/module");var q=J(b,h);if(null!=q)return q;q=w(b,h,f);if(null!=q)return q}};e.const_get_qualified=function(b,h,f){var q,A=e.const_cache_version;if(null!=b){"::"===b&&(b=k);if(!b.$$is_module&&!b.$$is_class)throw new e.TypeError(b.toString()+" is not a class/module");null==(q=b.$$const_cache)&&(y(b,"$$const_cache",Object.create(null)),q=b.$$const_cache);var E=q[h];null==E||E[0]!==A?(null!=(E=J(b,h))||null!=(E=t(b,h)),q[h]=[A,E]):E=E[1];
return null!=E?E:w(b,h,f)}};e.const_cache_version=1;e.const_get_relative=function(b,h,f){var q=b[0],A=e.const_cache_version,E;null==(E=b.$$const_cache)&&(y(b,"$$const_cache",Object.create(null)),E=b.$$const_cache);var G=E[h];if(null==G||G[0]!==A){var M;if(!(M=null!=(G=J(q,h)))){a:{if(0!==b.length)for(G=0,M=b.length;G<M;G++){var ba=b[G].$$const[h];if(null!=ba){b=ba;break a}}b=void 0}M=null!=(G=b)}M||null!=(G=t(q,h))||(b=null==q||q.$$is_module?t(k,h):void 0,null!=(G=b));E[h]=[A,G]}else G=G[1];return null!=
G?G:w(q,h,f)};e.const_set=function(b,h,f){if(null==b||"::"===b)b=k;if(f.$$is_a_module){if(null==f.$$name||f.$$name===ma)f.$$name=h;null==f.$$base_module&&(f.$$base_module=b)}b.$$const=b.$$const||Object.create(null);b.$$const[h]=f;b.$$=b.$$const;e.const_cache_version++;b===k&&(e[h]=f);y(b,h,f);return f};e.constants=function(b,h){null==h&&(h=!0);var f=[b],q,A={},E;h&&(f=f.concat(e.ancestors(b)));h&&b.$$is_module&&(f=f.concat([e.Object]).concat(e.ancestors(e.Object)));var G=0;for(q=f.length;G<q;G++){h=
f[G];if(b!==k&&h==k)break;for(E in h.$$const)A[E]=!0}return Object.keys(A)};e.const_remove=function(b,h){e.const_cache_version++;if(null!=b.$$const[h]){var f=b.$$const[h];delete b.$$const[h];return f}if(null!=b.$$autoload&&null!=b.$$autoload[h])return delete b.$$autoload[h],ma;throw e.NameError.$new("constant "+b+"::"+b.$name()+" not defined");};e.$$=e.const_get_relative;e.$$$=e.const_get_qualified;e.allocate_class=function(b,h){var f=null!=h&&h.$$bridge?function(){var A=R.call(arguments);A=new (L.apply(h.$$constructor,
[null].concat(A)));D(A,q.$$prototype);return A}:function(){};b&&y(f,"displayName","::"+b);var q=f;y(q,"$$name",b);y(q,"$$constructor",f);y(q,"$$prototype",f.prototype);y(q,"$$const",{});y(q,"$$is_class",!0);y(q,"$$is_a_module",!0);y(q,"$$super",h);y(q,"$$cvars",{});y(q,"$$own_included_modules",[]);y(q,"$$own_prepended_modules",[]);y(q,"$$ancestors",[]);y(q,"$$ancestors_cache_version",null);y(q.$$prototype,"$$class",q);e.Class&&D(q,e.Class.prototype);null!=h&&(D(q.$$prototype,h.$$prototype),h.$$meta&&
e.build_class_singleton_class(q));return q};e.klass=function(b,h,f){null==b?b=k:b.$$is_class||b.$$is_module||(b=b.$$class);if(null!=h&&!h.hasOwnProperty("$$is_class")){var q=h;h=k}var A;if(A=J(b,f)){if(!A.$$is_class)throw e.TypeError.$new(f+" is not a class");}else A=void 0;if(A){if(h&&A.$$super!==h)throw e.TypeError.$new("superclass mismatch for class "+A.$$name);return A}null==h&&(h=k);A=e.allocate_class(f,h);e.const_set(b,f,A);h.$inherited&&h.$inherited(A);q&&e.bridge(q,A);return A};e.allocate_module=
function(b){function h(){}b&&y(h,"displayName",b+".$$constructor");b&&y(h,"displayName",b+".constructor");y(h,"$$name",b);y(h,"$$prototype",h.prototype);y(h,"$$const",{});y(h,"$$is_module",!0);y(h,"$$is_a_module",!0);y(h,"$$cvars",{});y(h,"$$iclasses",[]);y(h,"$$own_included_modules",[]);y(h,"$$own_prepended_modules",[]);y(h,"$$ancestors",[h]);y(h,"$$ancestors_cache_version",null);D(h,e.Module.prototype);return h};e.module=function(b,h){null==b?b=k:b.$$is_class||b.$$is_module||(b=b.$$class);var f=
b;var q=J(f,h);null==q&&f===k&&(q=t(k,h));if(q&&!q.$$is_module&&q!==k)throw e.TypeError.$new(h+" is not a module");if(f=q)return f;f=e.allocate_module(h);e.const_set(b,h,f);return f};e.get_singleton_class=function(b){return b.$$meta?b.$$meta:b.hasOwnProperty("$$is_class")?e.build_class_singleton_class(b):b.hasOwnProperty("$$is_module")?e.build_module_singleton_class(b):e.build_object_singleton_class(b)};e.build_class_singleton_class=function(b){if(b.$$meta)return b.$$meta;var h=b===c?I:e.get_singleton_class(b.$$super);
h=e.allocate_class(null,h,function(){});y(h,"$$is_singleton",!0);y(h,"$$singleton_of",b);y(b,"$$meta",h);D(b,h.$$prototype);y(b,"$$class",e.Class);return h};e.build_module_singleton_class=function(b){if(b.$$meta)return b.$$meta;var h=e.allocate_class(null,e.Module,function(){});y(h,"$$is_singleton",!0);y(h,"$$singleton_of",b);y(b,"$$meta",h);D(b,h.$$prototype);y(b,"$$class",e.Module);return h};e.build_object_singleton_class=function(b){var h=e.allocate_class(ma,b.$$class,function(){});y(h,"$$is_singleton",
!0);y(h,"$$singleton_of",b);delete h.$$prototype.$$class;y(b,"$$meta",h);D(b,b.$$meta.$$prototype);return h};e.is_method=function(b){return"$"===b[0]&&"$"!==b[1]};e.instance_methods=function(b){var h=[],f=[];b=e.ancestors(b);for(var q=0,A=b.length;q<A;q++){var E=b[q].$$prototype;E.hasOwnProperty("$$dummy")&&(E=E.$$define_methods_on);for(var G=Object.getOwnPropertyNames(E),M=0,ba=G.length;M<ba;M++){var ua=G[M];if(e.is_method(ua)){var Pa=ua.slice(1);ua=E[ua];ua.$$stub&&-1===h.indexOf(Pa)&&h.push(Pa);
ua.$$stub||-1!==f.indexOf(Pa)||-1!==h.indexOf(Pa)||f.push(Pa)}}}return f};e.own_instance_methods=function(b){var h=[];b=b.$$prototype;b.hasOwnProperty("$$dummy")&&(b=b.$$define_methods_on);for(var f=Object.getOwnPropertyNames(b),q=0,A=f.length;q<A;q++){var E=f[q];e.is_method(E)&&!b[E].$$stub&&(E=E.slice(1),h.push(E))}return h};e.methods=function(b){return e.instance_methods(e.get_singleton_class(b))};e.own_methods=function(b){return e.own_instance_methods(e.get_singleton_class(b))};e.receiver_methods=
function(b){var h=e.get_singleton_class(b);b=e.own_instance_methods(h);h=e.own_instance_methods(h.$$super);return b.concat(h)};e.class_variables=function(b){b=e.ancestors(b);var h,f={};for(h=b.length-1;0<=h;h--){var q=b[h],A;for(A in q.$$cvars)f[A]=q.$$cvars[A]}return f};e.class_variable_set=function(b,h,f){var q=e.ancestors(b),A;for(A=q.length-2;0<=A;A--){var E=q[A];if(n.call(E.$$cvars,h))return E.$$cvars[h]=f}return b.$$cvars[h]=f};e.append_features=function(b,h){var f=e.ancestors(b),q=[];if(-1!==
f.indexOf(h))throw e.ArgumentError.$new("cyclic include detected");for(var A=0,E=f.length;A<E;A++){var G=p(f[A]);y(G,"$$included",!0);q.push(G)}f=e.ancestors(h);q=H(q);if(-1===f.indexOf(b))b=h.$$prototype,f=Object.getPrototypeOf(h.$$prototype);else{f=h.$$prototype;for(A=Object.getPrototypeOf(f);null!=A&&(!z(A)||A.$$module!==b);)f=A,A=Object.getPrototypeOf(A);for(A=Object.getPrototypeOf(A);A.hasOwnProperty("$$iclass")&&!z(A);)A=Object.getPrototypeOf(A);b=f;f=A}D(b,q.first);D(q.last,f);b=[];for(f=Object.getPrototypeOf(h.$$prototype);f&&
!f.hasOwnProperty("$$class");)(q=x(f))&&b.push(q),f=Object.getPrototypeOf(f);h.$$own_included_modules=b;e.const_cache_version++};e.prepend_features=function(b,h){var f=e.ancestors(b),q=[];if(-1!==f.indexOf(h))throw e.ArgumentError.$new("cyclic prepend detected");for(var A=0,E=f.length;A<E;A++){var G=p(f[A]);y(G,"$$prepended",!0);q.push(G)}f=H(q);A=h.$$prototype;E=Object.getPrototypeOf(A);if(A.hasOwnProperty("$$dummy"))q=A.$$define_methods_on;else{q=d(h);G=h.$$prototype;for(var M=Object.getOwnPropertyNames(G),
ba=0;ba<M.length;ba++){var ua=M[ba];e.is_method(ua)&&delete G[ua]}y(A,"$$dummy",!0);y(A,"$$define_methods_on",q);D(A,q);D(q,E)}if(-1===e.ancestors(h).indexOf(b))for(b=A,A=Object.getPrototypeOf(A);null!=A&&!A.hasOwnProperty("$$root")&&A!==q&&A.hasOwnProperty("$$iclass");)A=Object.getPrototypeOf(A);else throw e.RuntimeError.$new("Prepending a module multiple times is not supported");D(b,f.first);D(f.last,A);b=[];q=Object.getPrototypeOf(h.$$prototype);if(h.$$prototype.hasOwnProperty("$$dummy"))for(;q&&
q!==h.$$prototype.$$define_methods_on;)(f=x(q))&&b.push(f),q=Object.getPrototypeOf(q);h.$$own_prepended_modules=b;e.const_cache_version++};e.bridge=function(b,h){if(b.hasOwnProperty("$$bridge"))throw e.ArgumentError.$new("already bridged");y(b,"$$bridge",h);D(b.prototype,(h.$$super||e.Object).$$prototype);y(h,"$$prototype",b.prototype);y(h.$$prototype,"$$class",h);y(h,"$$constructor",b);y(h,"$$bridge",!0)};e.ancestors=function(b){if(!b)return[];if(b.$$ancestors_cache_version===e.const_cache_version)return b.$$ancestors;
var h=[],f;var q=0;var A=b.$$own_prepended_modules.concat([b]).concat(b.$$own_included_modules);for(f=A.length;q<f;q++)h.push(A[q]);if(b.$$super)for(q=0,A=e.ancestors(b.$$super),f=A.length;q<f;q++)h.push(A[q]);b.$$ancestors_cache_version=e.const_cache_version;return b.$$ancestors=h};e.included_modules=function(b){for(var h=[],f=Object.getPrototypeOf(b.$$prototype);f&&Object.getPrototypeOf(f);f=Object.getPrototypeOf(f))(b=x(f))&&b.$$is_module&&f.$$iclass&&f.$$included&&h.push(b);return h};e.add_stubs=
function(b){for(var h=e.BasicObject.$$prototype,f=0,q=b.length;f<q;f++){var A=b[f],E=h[A];(null==E||E.$$stub)&&e.add_stub_for(h,A)}};e.add_stub_for=function(b,h){var f=e.stub_for(h);y(b,h,f)};e.stub_for=function(b){function h(){this.$method_missing.$$p=h.$$p;h.$$p=null;for(var f=Array(arguments.length),q=0,A=f.length;q<A;q++)f[q]=arguments[q];return this.$method_missing.apply(this,[b.slice(1)].concat(f))}h.$$stub=!0;return h};e.ac=function(b,h,f,q){var A="";A=f.$$is_a_module?A+(f.$$name+"."):A+(f.$$class.$$name+
"#");throw e.ArgumentError.$new("["+(A+q)+"] wrong number of arguments("+b+" for "+h+")");};e.block_ac=function(b,h,f){throw e.ArgumentError.$new("`block in "+f+"': wrong number of arguments ("+b+" for "+h+")");};e.find_super_dispatcher=function(b,h,f,q,A){var E="$"+h;var G=b.hasOwnProperty("$$meta")?e.ancestors(b.$$meta):e.ancestors(b.$$class);for(f=G.indexOf(f.$$owner)+1;f<G.length;f++){var M=G[f].$$prototype;M.hasOwnProperty("$$dummy")&&(M=M.$$define_methods_on);if(M.hasOwnProperty(E)){var ba=
M[E];break}}if(!q&&ba&&ba.$$stub&&b.$method_missing.$$pristine)throw e.NoMethodError.$new("super: no superclass method `"+h+"' for "+b,h);return ba.$$stub&&!A?null:ba};e.find_iter_super_dispatcher=function(b,h,f,q,A){if(!f)throw e.RuntimeError.$new("super called outside of method");if(A&&f.$$define_meth)throw e.RuntimeError.$new("implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly");f.$$def&&(h=f.$$jsid);return e.find_super_dispatcher(b,
h,f,q)};e.ret=function(b){e.returner.$v=b;throw e.returner;};e.brk=function(b,h){h.$v=b;throw h;};e.new_brk=function(){return Error("unexpected break")};e.yield1=function(b,h){if("function"!==typeof b)throw e.LocalJumpError.$new("no block given");var f=b.$$has_top_level_mlhs_arg,q=b.$$has_trailing_comma_in_args;if(1<b.length||(f||q)&&1===b.length)h=e.to_ary(h);return(1<b.length||q&&1===b.length)&&h.$$is_array?b.apply(null,h):b(h)};e.yieldX=function(b,h){if("function"!==typeof b)throw e.LocalJumpError.$new("no block given");
if(1<b.length&&1===h.length&&h[0].$$is_array)return b.apply(null,h[0]);if(!h.$$is_array){for(var f=Array(h.length),q=0,A=f.length;q<A;q++)f[q]=h[q];return b.apply(null,f)}return b.apply(null,h)};e.rescue=function(b,h){for(var f=0;f<h.length;f++){var q=h[f];if(q.$$is_array){if(q=e.rescue(b,q))return q}else if(q===e.JS.Error||q["$==="](b))return q}return null};e.is_a=function(b,h){if(null!=h&&b.$$meta===h||b.$$class===h)return!0;if(b.$$is_number&&h.$$is_number_class)return h.$$is_integer_class?0===
b%1:!0;var f,q=e.ancestors(b.$$is_class?e.get_singleton_class(b):b.$$meta||b.$$class);b=0;for(f=q.length;b<f;b++)if(q[b]===h)return!0;return!1};e.to_hash=function(b){if(b.$$is_hash)return b;if(b["$respond_to?"]("to_hash",!0)){var h=b.$to_hash();if(h.$$is_hash)return h;throw e.TypeError.$new("Can't convert "+b.$$class+" to Hash ("+b.$$class+"#to_hash gives "+h.$$class+")");}throw e.TypeError.$new("no implicit conversion of "+b.$$class+" into Hash");};e.to_ary=function(b){if(b.$$is_array)return b;if(b["$respond_to?"]("to_ary",
!0)){var h=b.$to_ary();if(h===ma)return[b];if(h.$$is_array)return h;throw e.TypeError.$new("Can't convert "+b.$$class+" to Array ("+b.$$class+"#to_ary gives "+h.$$class+")");}return[b]};e.to_a=function(b){if(b.$$is_array)return b.slice();if(b["$respond_to?"]("to_a",!0)){var h=b.$to_a();if(h===ma)return[b];if(h.$$is_array)return h;throw e.TypeError.$new("Can't convert "+b.$$class+" to Array ("+b.$$class+"#to_a gives "+h.$$class+")");}return[b]};e.extract_kwargs=function(b){var h=b[b.length-1];return null!=
h&&e.respond_to(h,"$to_hash",!0)?(ka.call(b,b.length-1,1),h.$to_hash()):e.hash2([],{})};e.kwrestargs=function(b,h){var f=[],q={},A;b=b.$$smap;for(A in b)h[A]||(f.push(A),q[A]=b[A]);return e.hash2(f,q)};e.send=function(b,h,f,q){if("function"===typeof h){var A=h;h=null}else if("string"===typeof h)A=b["$"+h];else throw e.NameError.$new("Passed method should be a string or a function");return e.send2(b,A,h,f,q)};e.send2=function(b,h,f,q,A){null==h&&null!=f&&b.$method_missing&&(h=b.$method_missing,q=[f].concat(q));
"function"===typeof A&&(h.$$p=A);return h.apply(b,q)};e.lambda=function(b){b.$$is_lambda=!0;return b};e.def=function(b,h,f){b===e.top?e.defn(e.Object,h,f):!b.$$eval&&b.$$is_a_module?e.defn(b,h,f):e.defs(b,h,f)};e.defn=function(b,h,f){f.displayName=h;f.$$owner=b;var q=b.$$prototype;q.hasOwnProperty("$$dummy")&&(q=q.$$define_methods_on);y(q,h,f);if(b.$$is_module){b.$$module_function&&e.defs(b,h,f);q=0;for(var A=b.$$iclasses,E=A.length;q<E;q++)y(A[q],h,f)}f=b.$$singleton_of;!b.$method_added||b.$method_added.$$stub||
f?f&&f.$singleton_method_added&&!f.$singleton_method_added.$$stub&&f.$singleton_method_added(h.substr(1)):b.$method_added(h.substr(1))};e.defs=function(b,h,f){if(b.$$is_string||b.$$is_number)throw e.TypeError.$new("can't define singleton");e.defn(e.get_singleton_class(b),h,f)};e.rdef=function(b,h){if(!n.call(b.$$prototype,h))throw e.NameError.$new("method '"+h.substr(1)+"' not defined in "+b.$name());delete b.$$prototype[h];b.$$is_singleton?b.$$prototype.$singleton_method_removed&&!b.$$prototype.$singleton_method_removed.$$stub&&
b.$$prototype.$singleton_method_removed(h.substr(1)):b.$method_removed&&!b.$method_removed.$$stub&&b.$method_removed(h.substr(1))};e.udef=function(b,h){if(!b.$$prototype[h]||b.$$prototype[h].$$stub)throw e.NameError.$new("method '"+h.substr(1)+"' not defined in "+b.$name());e.add_stub_for(b.$$prototype,h);b.$$is_singleton?b.$$prototype.$singleton_method_undefined&&!b.$$prototype.$singleton_method_undefined.$$stub&&b.$$prototype.$singleton_method_undefined(h.substr(1)):b.$method_undefined&&!b.$method_undefined.$$stub&&
b.$method_undefined(h.substr(1))};e.alias=function(b,h,f){var q="$"+h,A="$"+f,E=b.$$prototype["$"+f];if(b.$$eval)return e.alias(e.get_singleton_class(b),h,f);if(!l(E)){for(var G=b.$$super;"function"!==typeof E&&G;)E=G[A],G=G.$$super;!l(E)&&b.$$is_module&&(E=e.Object.$$prototype[A]);if(!l(E))throw e.NameError.$new("undefined method `"+f+"' for class `"+b.$name()+"'");}E.$$alias_of&&(E=E.$$alias_of);var M=function(){var ba=M.$$p,ua;var Pa=Array(arguments.length);var xa=0;for(ua=arguments.length;xa<
ua;xa++)Pa[xa]=arguments[xa];null!=ba&&(M.$$p=null);return e.send(this,E,Pa,ba)};try{Object.defineProperty(M,"length",{value:E.length})}catch(ba){}M.displayName=h;M.$$arity=E.$$arity;M.$$parameters=E.$$parameters;M.$$source_location=E.$$source_location;M.$$alias_of=E;M.$$alias_name=h;e.defn(b,q,M);return b};e.alias_native=function(b,h,f){h="$"+h;var q=b.$$prototype[f];if("function"!==typeof q||q.$$stub)throw e.NameError.$new("undefined native method `"+f+"' for class `"+b.$name()+"'");e.defn(b,h,
q);return b};e.hash_init=function(b){b.$$smap=Object.create(null);b.$$map=Object.create(null);b.$$keys=[]};e.hash_clone=function(b,h){h.$$none=b.$$none;h.$$proc=b.$$proc;var f=0,q=b.$$keys;b=b.$$smap;for(var A=q.length,E,G;f<A;f++)E=q[f],E.$$is_string?G=b[E]:(G=E.value,E=E.key),e.hash_put(h,E,G)};e.hash_put=function(b,h,f){if(h.$$is_string)n.call(b.$$smap,h)||b.$$keys.push(h),b.$$smap[h]=f;else{var q;var A=b.$$by_identity?e.id(h):h.$hash();if(n.call(b.$$map,A)){for(q=b.$$map[A];q;){if(h===q.key||
h["$eql?"](q.key)){var E=void 0;q.value=f;break}E=q;q=q.next}E&&(q={key:h,key_hash:A,value:f},b.$$keys.push(q),E.next=q)}else q={key:h,key_hash:A,value:f},b.$$keys.push(q),b.$$map[A]=q}};e.hash_get=function(b,h){if(h.$$is_string){if(n.call(b.$$smap,h))return b.$$smap[h]}else{var f=b.$$by_identity?e.id(h):h.$hash();if(n.call(b.$$map,f))for(b=b.$$map[f];b;){if(h===b.key||h["$eql?"](b.key))return b.value;b=b.next}}};e.hash_delete=function(b,h){var f,q=b.$$keys,A=q.length;if(h.$$is_string){"string"!==
typeof h&&(h=h.valueOf());if(!n.call(b.$$smap,h))return;for(f=0;f<A;f++)if(q[f]===h){q.splice(f,1);break}var E=b.$$smap[h];delete b.$$smap[h];return E}var G=h.$hash();if(n.call(b.$$map,G))for(var M=b.$$map[G],ba;M;){if(h===M.key||h["$eql?"](M.key)){E=M.value;for(f=0;f<A;f++)if(q[f]===M){q.splice(f,1);break}ba&&M.next?ba.next=M.next:ba?delete ba.next:M.next?b.$$map[G]=M.next:delete b.$$map[G];return E}ba=M;M=M.next}};e.hash_rehash=function(b){for(var h=0,f=b.$$keys.length,q,A,E;h<f;h++)if(!b.$$keys[h].$$is_string&&
(q=b.$$keys[h].key.$hash(),q!==b.$$keys[h].key_hash)){A=b.$$map[b.$$keys[h].key_hash];for(E=void 0;A;){if(A===b.$$keys[h]){E&&A.next?E.next=A.next:E?delete E.next:A.next?b.$$map[b.$$keys[h].key_hash]=A.next:delete b.$$map[b.$$keys[h].key_hash];break}E=A;A=A.next}b.$$keys[h].key_hash=q;if(n.call(b.$$map,q)){A=b.$$map[q];for(E=void 0;A;){if(A===b.$$keys[h]){E=void 0;break}E=A;A=A.next}E&&(E.next=b.$$keys[h])}else b.$$map[q]=b.$$keys[h]}};e.hash=function(){var b=arguments.length,h;if(1===b&&arguments[0].$$is_hash)return arguments[0];
var f=new e.Hash;e.hash_init(f);if(1===b&&arguments[0].$$is_array){b=arguments[0];var q=b.length;for(h=0;h<q;h++){if(2!==b[h].length)throw e.ArgumentError.$new("value not of length 2: "+b[h].$inspect());var A=b[h][0];var E=b[h][1];e.hash_put(f,A,E)}return f}if(1===b){b=arguments[0];for(A in b)n.call(b,A)&&(E=b[A],e.hash_put(f,A,E));return f}if(0!==b%2)throw e.ArgumentError.$new("odd number of arguments for Hash");for(h=0;h<b;h+=2)A=arguments[h],E=arguments[h+1],e.hash_put(f,A,E);return f};e.hash2=
function(b,h){var f=new e.Hash;f.$$smap=h;f.$$map=Object.create(null);f.$$keys=b;return f};e.range=function(b,h,f){var q=new e.Range;q.begin=b;q.end=h;q.excl=f;return q};e.ivar=function(b){return"constructor"===b||"displayName"===b||"__count__"===b||"__noSuchMethod__"===b||"__parent__"===b||"__proto__"===b||"hasOwnProperty"===b||"valueOf"===b?b+"$":b};e.escape_regexp=function(b){return b.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,
"\\t")};e.global_regexp=function(b){if(b.global)return b;null==b.$$g?b.$$g=new RegExp(b.source,(b.multiline?"gm":"g")+(b.ignoreCase?"i":"")):b.$$g.lastIndex=null;return b.$$g};e.global_multiline_regexp=function(b){if(b.multiline){if(b.global)return b;b=null!=b.$$g?b.$$g:b.$$g=new RegExp(b.source,"gm"+(b.ignoreCase?"i":""))}else b=null!=b.$$gm?b.$$gm:b.$$gm=new RegExp(b.source,"gm"+(b.ignoreCase?"i":""));b.lastIndex=null;return b};e.regexp=function(b,h){for(var f,q="undefined"!==typeof h&&h&&0<=h.indexOf("i"),
A=0,E=b.length;A<E;A++)f=b[A],f instanceof RegExp&&(f.ignoreCase!==q&&e.Kernel.$warn("ignore case doesn't match for "+f.source.$inspect(),e.hash({uplevel:1})),f=f.source),""===f&&(f="(?:"+f+")"),b[A]=f;return h?new RegExp(b.join(""),h):new RegExp(b.join(""))};e.modules={};e.loaded_features=["corelib/runtime"];e.current_dir=".";e.require_table={"corelib/runtime":!0};e.normalize=function(b){var h=[];"."!==e.current_dir&&(b=e.current_dir.replace(/\/*$/,"/")+b);b=b.replace(/^\.\//,"");b=b.replace(/\.(rb|opal|js)$/,
"");b=b.split("/");for(var f=0,q=b.length;f<q;f++){var A=b[f];""!==A&&(".."===A?h.pop():h.push(A))}return h.join("/")};e.loaded=function(b){var h;var f=0;for(h=b.length;f<h;f++){var q=e.normalize(b[f]);e.require_table[q]||(e.loaded_features.push(q),e.require_table[q]=!0)}};e.load=function(b){b=e.normalize(b);e.loaded([b]);var h=e.modules[b];if(h)h(e);else{h=e.config.missing_require_severity;b="cannot load such file -- "+b;if("error"===h){if(e.LoadError)throw e.LoadError.$new(b);throw b;}"warning"===
h&&u.warn("WARNING: LoadError: "+b)}return!0};e.require=function(b){b=e.normalize(b);return e.require_table[b]?!1:e.load(b)};e.encodings=Object.create(null);e.set_encoding=function(b,h){if("string"===typeof b)throw e.FrozenError.$new("can't modify frozen String");h=e.encodings[h];if(h===b.encoding)return b;b.encoding=h;return b};e.enc=function(b,h){b=new String(b);e.set_encoding(b,h);b.internal_encoding=b.encoding;return b};e.BasicObject=c=e.allocate_class("BasicObject",null,function(){});e.Object=
k=e.allocate_class("Object",e.BasicObject,function(){});e.Module=a=e.allocate_class("Module",e.Object,function(){});e.Class=I=e.allocate_class("Class",e.Module,function(){});D(e.BasicObject,e.Class.$$prototype);D(e.Object,e.Class.$$prototype);D(e.Module,e.Class.$$prototype);D(e.Class,e.Class.$$prototype);c.$$const.BasicObject=c;e.const_set(k,"BasicObject",c);e.const_set(k,"Object",k);e.const_set(k,"Module",a);e.const_set(k,"Class",I);c.$$class=I;k.$$class=I;a.$$class=I;I.$$class=I;y(k.$$prototype,
"toString",function(){var b=this.$to_s();return b.$$is_string&&"object"===typeof b?b.valueOf():b});y(k.$$prototype,"$require",e.require);e.top=new k;e.top.$to_s=e.top.$inspect=function(){return"main"};e.top.$define_method=m;e.NilClass=e.allocate_class("NilClass",e.Object,function(){});e.const_set(k,"NilClass",e.NilClass);var ma=e.nil=new e.NilClass;ma.$$id=4;ma.call=ma.apply=function(){throw e.LocalJumpError.$new("no block given");};e.breaker=Error("unexpected break (old)");e.returner=Error("unexpected return");
TypeError.$$super=Error}).call(this);Opal.loaded(["corelib/runtime.js"]);
Opal.modules["corelib/helpers"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.type_error,z=a.coerce_to,p=a.module,d=a.truthy;a.add_stubs("$=== $raise $respond_to? $nil? $__send__ $<=> $class $coerce_to! $new $!= $[] $upcase".split(" "));return function(H,x){H=p(H,"Opal");var l=[H].concat(x),m,u,c,k,I,e,n,L,D,R,ka;a.defs(H,"$bridge",m=function(da,ma){return a.bridge(da,ma)},m.$$arity=2);a.defs(H,"$coerce_to!",u=function(da,ma,b,h){var f=a.slice.call(arguments,3,arguments.length);f=z(da,ma,b,f);d(ma["$==="](f))||
this.$raise(w(da,ma,b,f));return f},u.$$arity=-4);a.defs(H,"$coerce_to?",c=function(da,ma,b,h){var f=a.slice.call(arguments,3,arguments.length);if(!d(da["$respond_to?"](b)))return J;f=z(da,ma,b,f);if(d(f["$nil?"]()))return J;d(ma["$==="](f))||this.$raise(w(da,ma,b,f));return f},c.$$arity=-4);a.defs(H,"$try_convert",k=function(da,ma,b){return d(ma["$==="](da))?da:d(da["$respond_to?"](b))?da.$__send__(b):J},k.$$arity=3);a.defs(H,"$compare",I=function(da,ma){var b=da["$<=>"](ma);d(b===J)&&this.$raise(t(l,
"ArgumentError"),"comparison of "+da.$class()+" with "+ma.$class()+" failed");return b},I.$$arity=2);a.defs(H,"$destructure",e=function(da){if(1==da.length)return da[0];if(da.$$is_array)return da;for(var ma=Array(da.length),b=0,h=ma.length;b<h;b++)ma[b]=da[b];return ma},e.$$arity=1);a.defs(H,"$respond_to?",n=function(da,ma,b){null==b&&(b=!1);return null!=da&&da.$$class?da["$respond_to?"](ma,b):!1},n.$$arity=-3);a.defs(H,"$instance_variable_name!",L=function(da){da=t(l,"Opal")["$coerce_to!"](da,t(l,
"String"),"to_str");d(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(da))||this.$raise(t(l,"NameError").$new("'"+da+"' is not allowed as an instance variable name",da));return da},L.$$arity=1);a.defs(H,"$class_variable_name!",D=function(da){da=t(l,"Opal")["$coerce_to!"](da,t(l,"String"),"to_str");d(3>da.length||"@@"!==da.slice(0,2))&&this.$raise(t(l,"NameError").$new("`"+da+"' is not allowed as a class variable name",da));return da},D.$$arity=1);a.defs(H,"$const_name!",R=function(da){da=t(l,"Opal")["$coerce_to!"](da,
t(l,"String"),"to_str");d(da["$[]"](0)["$!="](da["$[]"](0).$upcase()))&&this.$raise(t(l,"NameError"),"wrong constant name "+da);return da},R.$$arity=1);a.defs(H,"$pristine",ka=function(da,ma){var b=a.slice.call(arguments,1,arguments.length);for(var h,f=b.length-1;0<=f;f--)h=b[f],(h=da.$$prototype["$"+h])&&!h.$$stub&&(h.$$pristine=!0);return J},ka.$$arity=-2)}(y[0],y)};
Opal.modules["corelib/module"]=function(a){function y(k,I){return"number"===typeof k&&"number"===typeof I?k<I:k["$<"](I)}var J=[],t=a.nil,w=a.$$$,z=a.$$,p=a.truthy,d=a.coerce_to,H=a.klass,x=a.send,l=a.hash2,m=a.lambda,u=a.range,c=a.send2;a.add_stubs("$module_eval $to_proc $=== $raise $equal? $< $> $nil? $attr_reader $attr_writer $warn $attr_accessor $class_variable_name! $new $const_name! $=~ $inject $split $const_get $== $!~ $start_with? $bind $call $class $append_features $included $name $cover? $size $merge $compile $proc $any? $prepend_features $prepended $to_s $__id__ $constants $include? $copy_class_variables $copy_constants".split(" "));
return function(k,$super,e){k=H(k,$super,"Module");var n=[k].concat(e),L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za,Ca,Aa,bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha,Y,Q,Z,U,ha,la;a.defs(k,"$allocate",L=function(){var g=a.allocate_module(t,function(){});this!==a.Module&&Object.setPrototypeOf(g,this.$$prototype);return g},L.$$arity=0);a.def(k,"$initialize",D=function(){var g=D.$$p,C=g||t;g&&(D.$$p=null);g&&(D.$$p=null);return C!==t?x(this,"module_eval",
[],C.$to_proc()):t},D.$$arity=0);a.def(k,"$===",R=function(g){return p(null==g)?!1:a.is_a(g,this)},R.$$arity=1);a.def(k,"$<",ka=function(g){p(z(n,"Module")["$==="](g))||this.$raise(z(n,"TypeError"),"compared with non class/module");var C;if(this===g)return!1;var N=0;var aa=a.ancestors(this);for(C=aa.length;N<C;N++)if(aa[N]===g)return!0;N=0;aa=a.ancestors(g);for(C=aa.length;N<C;N++)if(aa[N]===this)return!1;return t},ka.$$arity=1);a.def(k,"$<=",da=function(g){var C;return p(C=this["$equal?"](g))?C:
y(this,g)},da.$$arity=1);a.def(k,"$>",ma=function(g){p(z(n,"Module")["$==="](g))||this.$raise(z(n,"TypeError"),"compared with non class/module");return y(g,this)},ma.$$arity=1);a.def(k,"$>=",b=function(g){var C;return p(C=this["$equal?"](g))?C:"number"===typeof this&&"number"===typeof g?this>g:this["$>"](g)},b.$$arity=1);a.def(k,"$<=>",h=function(g){if(this===g)return 0;if(!p(z(n,"Module")["$==="](g)))return t;g=y(this,g);return p(g["$nil?"]())?t:p(g)?-1:1},h.$$arity=1);a.def(k,"$alias_method",f=
function(g,C){g=d(g,z(n,"String"),"to_str");C=d(C,z(n,"String"),"to_str");a.alias(this,g,C);return this},f.$$arity=2);a.def(k,"$alias_native",q=function(g,C){null==C&&(C=g);a.alias_native(this,g,C);return this},q.$$arity=-2);a.def(k,"$ancestors",A=function(){return a.ancestors(this)},A.$$arity=0);a.def(k,"$append_features",E=function(g){a.append_features(this,g);return this},E.$$arity=1);a.def(k,"$attr_accessor",G=function(g){var C=a.slice.call(arguments,0,arguments.length);x(this,"attr_reader",a.to_a(C));
return x(this,"attr_writer",a.to_a(C))},G.$$arity=-1);a.def(k,"$attr",M=function(g){var C=a.slice.call(arguments,0,arguments.length);return 2!=C.length||!0!==C[1]&&!1!==C[1]?x(this,"attr_reader",a.to_a(C)):(this.$warn("optional boolean argument is obsoleted",l(["uplevel"],{uplevel:1})),C[1]?this.$attr_accessor(C[0]):this.$attr_reader(C[0]),t)},M.$$arity=-1);a.def(k,"$attr_reader",ba=function(g){var C=a.slice.call(arguments,0,arguments.length);for(var N=this.$$prototype,aa=C.length-1;0<=aa;aa--){var v=
C[aa],V="$"+v;v=a.ivar(v);var oa=function(La){return function(){return null==this[La]?t:this[La]}}(v);a.defineProperty(N,v,t);oa.$$parameters=[];oa.$$arity=0;a.defn(this,V,oa)}return t},ba.$$arity=-1);a.def(k,"$attr_writer",ua=function(g){var C=a.slice.call(arguments,0,arguments.length);for(var N=this.$$prototype,aa=C.length-1;0<=aa;aa--){var v=C[aa],V="$"+v+"=";v=a.ivar(v);var oa=function(La){return function(ib){return this[La]=ib}}(v);oa.$$parameters=[["req"]];oa.$$arity=1;a.defineProperty(N,v,
t);a.defn(this,V,oa)}return t},ua.$$arity=-1);a.def(k,"$autoload",Pa=function(g,C){null==this.$$autoload&&(this.$$autoload={});a.const_cache_version++;this.$$autoload[g]=C;return t},Pa.$$arity=2);a.def(k,"$class_variables",xa=function(){return Object.keys(a.class_variables(this))},xa.$$arity=0);a.def(k,"$class_variable_get",Da=function(g){g=z(n,"Opal")["$class_variable_name!"](g);var C=a.class_variables(this)[g];null==C&&this.$raise(z(n,"NameError").$new("uninitialized class variable "+g+" in "+this,
g));return C},Da.$$arity=1);a.def(k,"$class_variable_set",Ma=function(g,C){g=z(n,"Opal")["$class_variable_name!"](g);return a.class_variable_set(this,g,C)},Ma.$$arity=2);a.def(k,"$class_variable_defined?",na=function(g){g=z(n,"Opal")["$class_variable_name!"](g);return a.class_variables(this).hasOwnProperty(g)},na.$$arity=1);a.def(k,"$remove_class_variable",S=function(g){g=z(n,"Opal")["$class_variable_name!"](g);if(a.hasOwnProperty.call(this.$$cvars,g)){var C=this.$$cvars[g];delete this.$$cvars[g];
return C}this.$raise(z(n,"NameError"),"cannot remove "+g+" for "+this)},S.$$arity=1);a.def(k,"$constants",sa=function(g){null==g&&(g=!0);return a.constants(this,g)},sa.$$arity=-1);a.defs(k,"$constants",ya=function(g){if(null==g){g=(this.$$nesting||[]).concat(a.Object);var C,N={},aa;var v=0;for(aa=g.length;v<aa;v++)for(C in g[v].$$const)N[C]=!0;return Object.keys(N)}return a.constants(this,g)},ya.$$arity=-1);a.defs(k,"$nesting",pa=function(){return this.$$nesting||[]},pa.$$arity=0);a.def(k,"$const_defined?",
fa=function(g,C){null==C&&(C=!0);g=z(n,"Opal")["$const_name!"](g);p(g["$=~"](w(z(n,"Opal"),"CONST_NAME_REGEXP")))||this.$raise(z(n,"NameError").$new("wrong constant name "+g,g));var N=[this],aa;C&&(N=N.concat(a.ancestors(this)),this.$$is_module&&(N=N.concat([a.Object]).concat(a.ancestors(a.Object))));var v=0;for(aa=N.length;v<aa;v++)if(C=N[v],null!=C.$$const[g])return!0;return!1},fa.$$arity=-2);a.def(k,"$const_get",F=function(g,C){var N;null==C&&(C=!0);g=z(n,"Opal")["$const_name!"](g);0===g.indexOf("::")&&
"::"!==g&&(g=g.slice(2));if(p(-1!=g.indexOf("::")&&"::"!=g))return x(g.$split("::"),"inject",[this],(N=function(aa,v){null==aa&&(aa=t);null==v&&(v=t);return aa.$const_get(v)},N.$$s=this,N.$$arity=2,N));p(g["$=~"](w(z(n,"Opal"),"CONST_NAME_REGEXP")))||this.$raise(z(n,"NameError").$new("wrong constant name "+g,g));return C?z([this],g):a.const_get_local(this,g)},F.$$arity=-2);a.def(k,"$const_missing",T=function(g){var C;if(this.$$autoload&&(C=this.$$autoload[g]))return this.$require(C),this.$const_get(g);
C=this["$=="](z(n,"Object"))?g:""+this+"::"+g;return this.$raise(z(n,"NameError").$new("uninitialized constant "+C,g))},T.$$arity=1);a.def(k,"$const_set",ja=function(g,C){var N=t;g=z(n,"Opal")["$const_name!"](g);p(p(N=g["$!~"](w(z(n,"Opal"),"CONST_NAME_REGEXP")))?N:g["$start_with?"]("::"))&&this.$raise(z(n,"NameError").$new("wrong constant name "+g,g));a.const_set(this,g,C);return C},ja.$$arity=2);a.def(k,"$public_constant",va=function(){return t},va.$$arity=1);a.def(k,"$define_method",ea=function(g,
C){var N=ea.$$p,aa=N||t,v,V=this,oa=t,La=t;N&&(ea.$$p=null);N&&(ea.$$p=null);p(void 0===C&&aa===t)&&V.$raise(z(n,"ArgumentError"),"tried to create a Proc object without a block");aa=function(){return p(oa=aa)?oa:function(){La=C;return z(n,"Proc")["$==="](La)?C:z(n,"Method")["$==="](La)?C.$to_proc().$$unbound:z(n,"UnboundMethod")["$==="](La)?m((v=function(ib){var ob=null==v.$$s?this:v.$$s;var mb=a.slice.call(arguments,0,arguments.length);ob=C.$bind(ob);return x(ob,"call",a.to_a(mb))},v.$$s=V,v.$$arity=
-1,v)):V.$raise(z(n,"TypeError"),"wrong argument type "+aa.$class()+" (expected Proc/Method)")}()}();aa.$$jsid=g;aa.$$s=null;aa.$$def=aa;aa.$$define_meth=!0;a.defn(V,"$"+g,aa);return g},ea.$$arity=-2);a.def(k,"$remove_method",wa=function(g){var C=a.slice.call(arguments,0,arguments.length);for(var N=0,aa=C.length;N<aa;N++)a.rdef(this,"$"+C[N]);return this},wa.$$arity=-1);a.def(k,"$singleton_class?",Ga=function(){return!!this.$$is_singleton},Ga.$$arity=0);a.def(k,"$include",Fa=function(g){var C=a.slice.call(arguments,
0,arguments.length);for(var N=C.length-1;0<=N;N--){var aa=C[N];aa.$$is_module||this.$raise(z(n,"TypeError"),"wrong argument type "+aa.$class()+" (expected Module)");aa.$append_features(this);aa.$included(this)}return this},Fa.$$arity=-1);a.def(k,"$included_modules",Ra=function(){return a.included_modules(this)},Ra.$$arity=0);a.def(k,"$include?",Ta=function(g){g.$$is_module||this.$raise(z(n,"TypeError"),"wrong argument type "+g.$class()+" (expected Module)");var C,N=a.ancestors(this);var aa=0;for(C=
N.length;aa<C;aa++){var v=N[aa];if(v===g&&v!==this)return!0}return!1},Ta.$$arity=1);a.def(k,"$instance_method",Ja=function(g){var C=this.$$prototype["$"+g];C&&!C.$$stub||this.$raise(z(n,"NameError").$new("undefined method `"+g+"' for class `"+this.$name()+"'",g));return z(n,"UnboundMethod").$new(this,C.$$owner||this,C,g)},Ja.$$arity=1);a.def(k,"$instance_methods",kb=function(g){null==g&&(g=!0);return p(g)?a.instance_methods(this):a.own_instance_methods(this)},kb.$$arity=-1);a.def(k,"$included",jb=
function(){return t},jb.$$arity=1);a.def(k,"$extended",W=function(){return t},W.$$arity=1);a.def(k,"$extend_object",za=function(){return t},za.$$arity=1);a.def(k,"$method_added",Ca=function(g){a.slice.call(arguments,0,arguments.length);return t},Ca.$$arity=-1);a.def(k,"$method_removed",Aa=function(g){a.slice.call(arguments,0,arguments.length);return t},Aa.$$arity=-1);a.def(k,"$method_undefined",bb=function(g){a.slice.call(arguments,0,arguments.length);return t},bb.$$arity=-1);a.def(k,"$module_eval",
db=function(g){var C=db.$$p,N=C||t,aa,v,V=t,oa=aa=t,La=oa=t,ib=oa=t;C&&(db.$$p=null);C&&(db.$$p=null);aa=a.slice.call(arguments,0,arguments.length);p(p(V=N["$nil?"]())?!!a.compile:V)?(p(u(1,3,!1)["$cover?"](aa.$size()))||z(n,"Kernel").$raise(z(n,"ArgumentError"),"wrong number of arguments (0 for 1..3)"),N=[].concat(a.to_a(aa)),aa=null==N[0]?t:N[0],oa=null==N[1]?t:N[1],N,oa=l(["file","eval"],{file:p(La=oa)?La:"(eval)",eval:!0}),oa=a.hash({arity_check:!1}).$merge(oa),ib=z(n,"Opal").$compile(aa,oa),
N=x(z(n,"Kernel"),"proc",[],(v=function(){return function(){return eval(ib)}(null==v.$$s?this:v.$$s)},v.$$s=this,v.$$arity=0,v))):p(aa["$any?"]())&&z(n,"Kernel").$raise(z(n,"ArgumentError"),"wrong number of arguments ("+aa.$size()+" for 0)\n\n  NOTE:If you want to enable passing a String argument please add \"require 'opal-parser'\" to your script\n");La=N.$$s;N.$$s=null;V=N.apply(this,[this]);N.$$s=La;return V},db.$$arity=-1);a.alias(k,"class_eval","module_eval");a.def(k,"$module_exec",ab=function(g){var C=
ab.$$p,N=C||t;C&&(ab.$$p=null);C&&(ab.$$p=null);var aa=a.slice.call(arguments,0,arguments.length);N===t&&this.$raise(z(n,"LocalJumpError"),"no block given");C=N.$$s;N.$$s=null;aa=N.apply(this,aa);N.$$s=C;return aa},ab.$$arity=-1);a.alias(k,"class_exec","module_exec");a.def(k,"$method_defined?",Wa=function(g){g=this.$$prototype["$"+g];return!!g&&!g.$$stub},Wa.$$arity=1);a.def(k,"$module_function",Ba=function(g){var C=a.slice.call(arguments,0,arguments.length);if(0===C.length)this.$$module_function=
!0;else for(var N=0,aa=C.length;N<aa;N++){var v="$"+C[N];a.defs(this,v,this.$$prototype[v])}return this},Ba.$$arity=-1);a.def(k,"$name",ta=function(){if(this.$$full_name)return this.$$full_name;for(var g=[],C=this;C;){if(C.$$name===t||null==C.$$name)return t;g.unshift(C.$$name);C=C.$$base_module;if(C===a.Object)break}return 0===g.length?t:this.$$full_name=g.join("::")},ta.$$arity=0);a.def(k,"$prepend",Na=function(g){var C=a.slice.call(arguments,0,arguments.length);0===C.length&&this.$raise(z(n,"ArgumentError"),
"wrong number of arguments (given 0, expected 1+)");for(var N=C.length-1;0<=N;N--){var aa=C[N];aa.$$is_module||this.$raise(z(n,"TypeError"),"wrong argument type "+aa.$class()+" (expected Module)");aa.$prepend_features(this);aa.$prepended(this)}return this},Na.$$arity=-1);a.def(k,"$prepend_features",Sa=function(g){this.$$is_module||this.$raise(z(n,"TypeError"),"wrong argument type "+this.$class()+" (expected Module)");a.prepend_features(this,g);return this},Sa.$$arity=1);a.def(k,"$prepended",Ya=function(){return t},
Ya.$$arity=1);a.def(k,"$remove_const",Ha=function(g){return a.const_remove(this,g)},Ha.$$arity=1);a.def(k,"$to_s",Y=function(){var g;return p(g=a.Module.$name.call(this))?g:"#<"+(this.$$is_module?"Module":"Class")+":0x"+this.$__id__().$to_s(16)+">"},Y.$$arity=0);a.def(k,"$undef_method",Q=function(g){var C=a.slice.call(arguments,0,arguments.length);for(var N=0,aa=C.length;N<aa;N++)a.udef(this,"$"+C[N]);return this},Q.$$arity=-1);a.def(k,"$instance_variables",Z=function(){var g=(a.Module.$$nesting=
n,this.$constants());var C=[],N;for(N in this)this.hasOwnProperty(N)&&"$"!==N.charAt(0)&&"constructor"!==N&&!g["$include?"](N)&&C.push("@"+N);return C},Z.$$arity=0);a.def(k,"$dup",U=function(){var g=U.$$p,C;g&&(U.$$p=null);var N=0;var aa=arguments.length;for(C=Array(aa);N<aa;N++)C[N]=arguments[N];g=c(this,a.find_super_dispatcher(this,"dup",U,!1,!0),"dup",C,g);g.$copy_class_variables(this);g.$copy_constants(this);return g},U.$$arity=0);a.def(k,"$copy_class_variables",ha=function(g){for(var C in g.$$cvars)this.$$cvars[C]=
g.$$cvars[C]},ha.$$arity=1);return(a.def(k,"$copy_constants",la=function(g){var C;g=g.$$const;for(C in g)a.const_set(this,C,g[C])},la.$$arity=1),t)&&"copy_constants"}(J[0],null,J)};
Opal.modules["corelib/class"]=function(a){var y=a.top,J=[],t=a.nil,w=a.$$,z=a.klass,p=a.send,d=a.send2;a.add_stubs("$require $class_eval $to_proc $initialize_copy $allocate $name $to_s".split(" "));y.$require("corelib/module");return function(H,$super,l){H=z(H,$super,"Class");var m=[H].concat(l),u,c,k,I,e,n,L;a.defs(H,"$new",u=function(D){var R=u.$$p,ka=R||t;R&&(u.$$p=null);R&&(u.$$p=null);null==D&&(D=w(m,"Object"));if(!D.$$is_class)throw a.TypeError.$new("superclass must be a Class");R=a.allocate_class(t,
D);D.$inherited(R);ka!==t&&p(R,"class_eval",[],ka.$to_proc());return R},u.$$arity=-1);a.def(H,"$allocate",c=function(){var D=new this.$$constructor;D.$$id=a.uid();return D},c.$$arity=0);a.def(H,"$inherited",k=function(){return t},k.$$arity=1);a.def(H,"$initialize_dup",I=function(D){this.$initialize_copy(D);this.$$full_name=this.$$name=null},I.$$arity=1);a.def(H,"$new",e=function(D){var R=e.$$p,ka=R||t;R&&(e.$$p=null);R&&(e.$$p=null);R=a.slice.call(arguments,0,arguments.length);var da=this.$allocate();
a.send(da,da.$initialize,R,ka);return da},e.$$arity=-1);a.def(H,"$superclass",n=function(){return this.$$super||t},n.$$arity=0);return(a.def(H,"$to_s",L=function(){L.$$p&&(L.$$p=null);var D=this.$$singleton_of;return D&&D.$$is_a_module?"#<Class:"+D.$name()+">":D?"#<Class:#<"+D.$$class.$name()+":0x"+a.id(D).$to_s(16)+">>":d(this,a.find_super_dispatcher(this,"to_s",L,!1,!0),"to_s",[],null)},L.$$arity=0),t)&&"to_s"}(J[0],null,J)};
Opal.modules["corelib/basic_object"]=function(a){var y=[],J=a.nil,t=a.$$$,w=a.klass,z=a.truthy,p=a.range,d=a.hash2,H=a.send;a.add_stubs("$== $! $nil? $cover? $size $raise $merge $compile $proc $any? $inspect $new".split(" "));return function(x,$super,m){x=w(x,$super,"BasicObject");[x].concat(m);var u,c,k,I,e,n,L,D,R,ka,da,ma,b,h;a.def(x,"$initialize",u=function(f){a.slice.call(arguments,0,arguments.length);return J},u.$$arity=-1);a.def(x,"$==",c=function(f){return this===f},c.$$arity=1);a.def(x,"$eql?",
k=function(f){return this["$=="](f)},k.$$arity=1);a.alias(x,"equal?","==");a.def(x,"$__id__",I=function(){if(null!=this.$$id)return this.$$id;a.defineProperty(this,"$$id",a.uid());return this.$$id},I.$$arity=0);a.def(x,"$__send__",e=function(f,q){var A=e.$$p,E=A||J;A&&(e.$$p=null);A&&(e.$$p=null);A=a.slice.call(arguments,1,arguments.length);var G=this["$"+f];if(G)return E!==J&&(G.$$p=E),G.apply(this,A);E!==J&&(this.$method_missing.$$p=E);return this.$method_missing.apply(this,[f].concat(A))},e.$$arity=
-2);a.def(x,"$!",n=function(){return!1},n.$$arity=0);a.def(x,"$!=",L=function(f){return this["$=="](f)["$!"]()},L.$$arity=1);a.def(x,"$instance_eval",D=function(f){var q=D.$$p,A=q||J,E,G,M=J,ba=E=J,ua=ba=J,Pa=ba=J;q&&(D.$$p=null);q&&(D.$$p=null);E=a.slice.call(arguments,0,arguments.length);z(z(M=A["$nil?"]())?!!a.compile:M)?(z(p(1,3,!1)["$cover?"](E.$size()))||t("::","Kernel").$raise(t("::","ArgumentError"),"wrong number of arguments (0 for 1..3)"),A=[].concat(a.to_a(E)),E=null==A[0]?J:A[0],ba=null==
A[1]?J:A[1],A,ba=d(["file","eval"],{file:z(ua=ba)?ua:"(eval)",eval:!0}),ba=a.hash({arity_check:!1}).$merge(ba),Pa=t("::","Opal").$compile(E,ba),A=H(t("::","Kernel"),"proc",[],(G=function(){return function(){return eval(Pa)}(null==G.$$s?this:G.$$s)},G.$$s=this,G.$$arity=0,G))):z(E["$any?"]())&&t("::","Kernel").$raise(t("::","ArgumentError"),"wrong number of arguments ("+E.$size()+" for 0)");ua=A.$$s;A.$$s=null;if(this.$$is_a_module){this.$$eval=!0;try{var xa=A.call(this,this)}finally{this.$$eval=!1}}else xa=
A.call(this,this);A.$$s=ua;return xa},D.$$arity=-1);a.def(x,"$instance_exec",R=function(f){var q=R.$$p,A=q||J;q&&(R.$$p=null);q&&(R.$$p=null);q=a.slice.call(arguments,0,arguments.length);z(A)||t("::","Kernel").$raise(t("::","ArgumentError"),"no block given");var E=A.$$s;A.$$s=null;if(this.$$is_a_module){this.$$eval=!0;try{var G=A.apply(this,q)}finally{this.$$eval=!1}}else G=A.apply(this,q);A.$$s=E;return G},R.$$arity=-1);a.def(x,"$singleton_method_added",ka=function(f){a.slice.call(arguments,0,arguments.length);
return J},ka.$$arity=-1);a.def(x,"$singleton_method_removed",da=function(f){a.slice.call(arguments,0,arguments.length);return J},da.$$arity=-1);a.def(x,"$singleton_method_undefined",ma=function(f){a.slice.call(arguments,0,arguments.length);return J},ma.$$arity=-1);a.def(x,"$method_missing",b=function(f,q){var A=b.$$p;A&&(b.$$p=null);A&&(b.$$p=null);a.slice.call(arguments,1,arguments.length);A=z(this.$inspect&&!this.$inspect.$$stub)?"undefined method `"+f+"' for "+this.$inspect()+":"+this.$$class:
"undefined method `"+f+"' for "+this.$$class;return t("::","Kernel").$raise(t("::","NoMethodError").$new(A,f))},b.$$arity=-2);return(a.def(x,"$respond_to_missing?",h=function(){return!1},h.$$arity=-2),J)&&"respond_to_missing?"}(y[0],null,y)};
Opal.modules["corelib/kernel"]=function(a){function y(c,k){return"number"===typeof c&&"number"===typeof k?c<=k:c["$<="](k)}var J=[],t=a.nil,w=a.$$$,z=a.$$,p=a.truthy,d=a.coerce_to,H=a.module,x=a.gvars,l=a.hash2,m=a.send,u=a.klass;a.add_stubs("$raise $new $inspect $! $=~ $== $object_id $class $coerce_to? $<< $allocate $copy_instance_variables $copy_singleton_methods $initialize_clone $initialize_copy $define_method $singleton_class $to_proc $initialize_dup $for $empty? $pop $call $append_features $extend_object $extended $__id__ $to_s $instance_variable_name! $respond_to? $to_int $coerce_to! $Integer $nil? $=== $enum_for $result $any? $print $format $puts $each $<= $length $[] $< $first $caller $+ $map $exception $is_a? $rand $respond_to_missing? $pristine $try_convert! $expand_path $join $start_with? $new_seed $srand $sym $arg $open $include".split(" "));(function(c,
k){c=H(c,"Kernel");var I=[c].concat(k),e,n,L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za,Ca,Aa,bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha,Y,Q,Z,U,ha,la,g,C,N,aa;a.def(c,"$method_missing",e=function(v,V){var oa=e.$$p;oa&&(e.$$p=null);oa&&(e.$$p=null);oa=a.slice.call(arguments,1,arguments.length);return this.$raise(z(I,"NoMethodError").$new("undefined method `"+v+"' for "+this.$inspect(),v,oa))},e.$$arity=-2);a.def(c,"$=~",n=function(){return!1},n.$$arity=
1);a.def(c,"$!~",L=function(v){return this["$=~"](v)["$!"]()},L.$$arity=1);a.def(c,"$===",D=function(v){var V;return p(V=this.$object_id()["$=="](v.$object_id()))?V:this["$=="](v)},D.$$arity=1);a.def(c,"$<=>",R=function(v){this.$$comparable=!0;return(v=this["$=="](v))&&v!==t?0:t},R.$$arity=1);a.def(c,"$method",ka=function(v){var V=this["$"+v];V&&!V.$$stub||this.$raise(z(I,"NameError").$new("undefined method `"+v+"' for class `"+this.$class()+"'",v));return z(I,"Method").$new(this,V.$$owner||this.$class(),
V,v)},ka.$$arity=1);a.def(c,"$methods",da=function(v){null==v&&(v=!0);return p(v)?a.methods(this):a.own_methods(this)},da.$$arity=-1);a.def(c,"$public_methods",ma=function(v){null==v&&(v=!0);return p(v)?a.methods(this):a.receiver_methods(this)},ma.$$arity=-1);a.def(c,"$Array",b=function(v){if(v===t)return[];if(v.$$is_array)return v;var V=z(I,"Opal")["$coerce_to?"](v,z(I,"Array"),"to_ary");if(V!==t)return V;V=z(I,"Opal")["$coerce_to?"](v,z(I,"Array"),"to_a");return V!==t?V:[v]},b.$$arity=1);a.def(c,
"$at_exit",h=function(){var v=h.$$p,V=v||t,oa=t;null==x.__at_exit__&&(x.__at_exit__=t);v&&(h.$$p=null);v&&(h.$$p=null);x.__at_exit__=p(oa=x.__at_exit__)?oa:[];x.__at_exit__["$<<"](V);return V},h.$$arity=0);a.def(c,"$caller",f=function(v,V){null==V&&(V=t);v=(Error().stack||"").split("\n");var oa=[];for(var La=3,ib=v.length;La<ib&&(v[La].match("runtime.js")||(oa.push(v[La].replace(/^ *\w+ +/,"")),!V||oa.length!=V));La++);return oa},f.$$arity=-1);a.def(c,"$class",q=function(){return this.$$class},q.$$arity=
0);a.def(c,"$copy_instance_variables",A=function(v){var V=Object.keys(v),oa;var La=0;for(oa=V.length;La<oa;La++){var ib=V[La];"$"!==ib.charAt(0)&&v.hasOwnProperty(ib)&&(this[ib]=v[ib])}},A.$$arity=1);a.def(c,"$copy_singleton_methods",E=function(v){var V;if(v.hasOwnProperty("$$meta")){var oa=a.get_singleton_class(v),La=a.get_singleton_class(this);var ib=Object.getOwnPropertyNames(oa.$$prototype);var ob=0;for(V=ib.length;ob<V;ob++){var mb=ib[ob];a.is_method(mb)&&(La.$$prototype[mb]=oa.$$prototype[mb])}La.$$const=
Object.assign({},oa.$$const);Object.setPrototypeOf(La.$$prototype,Object.getPrototypeOf(oa.$$prototype))}ob=0;ib=Object.getOwnPropertyNames(v);for(V=ib.length;ob<V;ob++)mb=ib[ob],"$"===mb.charAt(0)&&"$"!==mb.charAt(1)&&v.hasOwnProperty(mb)&&(this[mb]=v[mb])},E.$$arity=1);a.def(c,"$clone",G=function(v){if(null==v)l([],{});else if(!v.$$is_hash)throw a.ArgumentError.$new("expected kwargs");v=this.$class().$allocate();v.$copy_instance_variables(this);v.$copy_singleton_methods(this);v.$initialize_clone(this);
return v},G.$$arity=-1);a.def(c,"$initialize_clone",M=function(v){return this.$initialize_copy(v)},M.$$arity=1);a.def(c,"$define_singleton_method",ba=function(v,V){var oa=ba.$$p,La=oa||t;oa&&(ba.$$p=null);oa&&(ba.$$p=null);return m(this.$singleton_class(),"define_method",[v,V],La.$to_proc())},ba.$$arity=-2);a.def(c,"$dup",ua=function(){var v=this.$class().$allocate();v.$copy_instance_variables(this);v.$initialize_dup(this);return v},ua.$$arity=0);a.def(c,"$initialize_dup",Pa=function(v){return this.$initialize_copy(v)},
Pa.$$arity=1);a.def(c,"$enum_for",xa=function(v,V){var oa=xa.$$p,La=oa||t;oa&&(xa.$$p=null);oa&&(xa.$$p=null);oa=a.slice.call(arguments,0,arguments.length);if(0<oa.length){var ib=oa[0];oa.splice(0,1)}null==ib&&(ib="each");return m(z(I,"Enumerator"),"for",[this,ib].concat(a.to_a(oa)),La.$to_proc())},xa.$$arity=-1);a.alias(c,"to_enum","enum_for");a.def(c,"$equal?",Da=function(v){return this===v},Da.$$arity=1);a.def(c,"$exit",Ma=function(v){var V=t;null==x.__at_exit__&&(x.__at_exit__=t);null==v&&(v=
!0);for(x.__at_exit__=p(V=x.__at_exit__)?V:[];!p(x.__at_exit__["$empty?"]());)V=x.__at_exit__.$pop(),V.$call();v=v.$$is_boolean?v?0:1:d(v,z(I,"Integer"),"to_int");a.exit(v);return t},Ma.$$arity=-1);a.def(c,"$extend",na=function(v){var V=a.slice.call(arguments,0,arguments.length);for(var oa=this.$singleton_class(),La=V.length-1;0<=La;La--){var ib=V[La];ib.$$is_module||this.$raise(z(I,"TypeError"),"wrong argument type "+ib.$class()+" (expected Module)");ib.$append_features(oa);ib.$extend_object(this);
ib.$extended(this)}return this},na.$$arity=-1);a.def(c,"$hash",S=function(){return this.$__id__()},S.$$arity=0);a.def(c,"$initialize_copy",sa=function(){return t},sa.$$arity=1);a.def(c,"$inspect",ya=function(){return this.$to_s()},ya.$$arity=0);a.def(c,"$instance_of?",pa=function(v){v.$$is_class||v.$$is_module||this.$raise(z(I,"TypeError"),"class or module required");return this.$$class===v},pa.$$arity=1);a.def(c,"$instance_variable_defined?",fa=function(v){v=z(I,"Opal")["$instance_variable_name!"](v);
return a.hasOwnProperty.call(this,v.substr(1))},fa.$$arity=1);a.def(c,"$instance_variable_get",F=function(v){v=z(I,"Opal")["$instance_variable_name!"](v);v=this[a.ivar(v.substr(1))];return null==v?t:v},F.$$arity=1);a.def(c,"$instance_variable_set",T=function(v,V){v=z(I,"Opal")["$instance_variable_name!"](v);return this[a.ivar(v.substr(1))]=V},T.$$arity=2);a.def(c,"$remove_instance_variable",ja=function(v){v=z(I,"Opal")["$instance_variable_name!"](v);var V=a.ivar(v.substr(1));return this.hasOwnProperty(V)?
(v=this[V],delete this[V],v):this.$raise(z(I,"NameError"),"instance variable "+v+" not defined")},ja.$$arity=1);a.def(c,"$instance_variables",va=function(){var v=[],V;for(V in this)if(this.hasOwnProperty(V)&&"$"!==V.charAt(0)){var oa="$"===V.substr(-1)?V.slice(0,V.length-1):V;v.push("@"+oa)}return v},va.$$arity=0);a.def(c,"$Integer",ea=function(v,V){var oa=this;if(!v.$$is_string){void 0!==V&&oa.$raise(z(I,"ArgumentError"),"base specified for non string value");v===t&&oa.$raise(z(I,"TypeError"),"can't convert nil into Integer");
if(v.$$is_number)return(Infinity===v||-Infinity===v||isNaN(v))&&oa.$raise(z(I,"FloatDomainError"),v),Math.floor(v);if(v["$respond_to?"]("to_int")){var La=v.$to_int();if(La!==t)return La}return z(I,"Opal")["$coerce_to!"](v,z(I,"Integer"),"to_i")}if("0"===v)return 0;void 0===V?V=0:(V=d(V,z(I,"Integer"),"to_int"),(1===V||0>V||36<V)&&oa.$raise(z(I,"ArgumentError"),"invalid radix "+V));La=v.toLowerCase();La=La.replace(/(\d)_(?=\d)/g,"$1");La=La.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ob,mb,sb){switch(sb){case "0b":if(0===
V||2===V)return V=2,mb;case "0":case "0o":if(0===V||8===V)return V=8,mb;case "0d":if(0===V||10===V)return V=10,mb;case "0x":if(0===V||16===V)return V=16,mb}oa.$raise(z(I,"ArgumentError"),'invalid value for Integer(): "'+v+'"')});V=0===V?10:V;var ib="0-"+(10>=V?V-1:"9a-"+String.fromCharCode(97+(V-11)));(new RegExp("^\\s*[+-]?["+ib+"]+\\s*$")).test(La)||oa.$raise(z(I,"ArgumentError"),'invalid value for Integer(): "'+v+'"');La=parseInt(La,V);isNaN(La)&&oa.$raise(z(I,"ArgumentError"),'invalid value for Integer(): "'+
v+'"');return La},ea.$$arity=-2);a.def(c,"$Float",wa=function(v){v===t&&this.$raise(z(I,"TypeError"),"can't convert nil into Float");if(v.$$is_string){var V=v.toString();V=V.replace(/(\d)_(?=\d)/g,"$1");if(/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(V))return this.$Integer(V);/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(V)||this.$raise(z(I,"ArgumentError"),'invalid value for Float(): "'+v+'"');return parseFloat(V)}return z(I,"Opal")["$coerce_to!"](v,z(I,"Float"),"to_f")},wa.$$arity=1);a.def(c,
"$Hash",Ga=function(v){var V=t;return p(p(V=v["$nil?"]())?V:v["$=="]([]))?l([],{}):p(z(I,"Hash")["$==="](v))?v:z(I,"Opal")["$coerce_to!"](v,z(I,"Hash"),"to_hash")},Ga.$$arity=1);a.def(c,"$is_a?",Fa=function(v){v.$$is_class||v.$$is_module||this.$raise(z(I,"TypeError"),"class or module required");return a.is_a(this,v)},Fa.$$arity=1);a.def(c,"$itself",Ra=function(){return this},Ra.$$arity=0);a.alias(c,"kind_of?","is_a?");a.def(c,"$lambda",Ta=function(){var v=Ta.$$p,V=v||t;v&&(Ta.$$p=null);v&&(Ta.$$p=
null);return a.lambda(V)},Ta.$$arity=0);a.def(c,"$load",Ja=function(v){v=z(I,"Opal")["$coerce_to!"](v,z(I,"String"),"to_str");return a.load(v)},Ja.$$arity=1);a.def(c,"$loop",kb=function(){var v,V=kb.$$p,oa=V||t,La=t;V&&(kb.$$p=null);if(oa===t)return m(this,"enum_for",["loop"],(v=function(){return w(z(I,"Float"),"INFINITY")},v.$$s=this,v.$$arity=0,v));for(;p(!0);)try{a.yieldX(oa,[])}catch(ib){if(a.rescue(ib,[z(I,"StopIteration")])){La=ib;try{return La.$result()}finally{a.pop_exception()}}else throw ib;
}return this},kb.$$arity=0);a.def(c,"$nil?",jb=function(){return!1},jb.$$arity=0);a.alias(c,"object_id","__id__");a.def(c,"$printf",W=function(v){var V=a.slice.call(arguments,0,arguments.length);p(V["$any?"]())&&this.$print(m(this,"format",a.to_a(V)));return t},W.$$arity=-1);a.def(c,"$proc",za=function(){var v=za.$$p,V=v||t;v&&(za.$$p=null);v&&(za.$$p=null);p(V)||this.$raise(z(I,"ArgumentError"),"tried to create Proc object without a block");V.$$is_lambda=!1;return V},za.$$arity=0);a.def(c,"$puts",
Ca=function(v){null==x.stdout&&(x.stdout=t);var V=a.slice.call(arguments,0,arguments.length);return m(x.stdout,"puts",a.to_a(V))},Ca.$$arity=-1);a.def(c,"$p",Aa=function(v){var V;var oa=a.slice.call(arguments,0,arguments.length);m(oa,"each",[],(V=function(La){null==x.stdout&&(x.stdout=t);null==La&&(La=t);return x.stdout.$puts(La.$inspect())},V.$$s=this,V.$$arity=1,V));return p(y(oa.$length(),1))?oa["$[]"](0):oa},Aa.$$arity=-1);a.def(c,"$print",bb=function(v){null==x.stdout&&(x.stdout=t);var V=a.slice.call(arguments,
0,arguments.length);return m(x.stdout,"print",a.to_a(V))},bb.$$arity=-1);a.def(c,"$warn",db=function(v,V){var oa,La=t,ib=t;null==x.VERBOSE&&(x.VERBOSE=t);null==x.stderr&&(x.stderr=t);var ob=a.slice.call(arguments,0,arguments.length);var mb=a.extract_kwargs(ob);if(null==mb)mb=l([],{});else if(!mb.$$is_hash)throw a.ArgumentError.$new("expected kwargs");mb=mb.$$smap.uplevel;null==mb&&(mb=t);p(mb)&&(mb=z(I,"Opal")["$coerce_to!"](mb,z(I,"Integer"),"to_str"),p("number"===typeof mb?0>mb:mb["$<"](0))&&this.$raise(z(I,
"ArgumentError"),"negative level ("+mb+")"),La=this.$caller("number"===typeof mb?mb+2:mb["$+"](2),1).$first(),p(La)&&(La=""+La+": "),ob=m(ob,"map",[],(oa=function(sb){null==sb&&(sb=t);return""+La+"warning: "+sb},oa.$$s=this,oa.$$arity=1,oa)));return p(p(ib=x.VERBOSE["$nil?"]())?ib:ob["$empty?"]())?t:m(x.stderr,"puts",a.to_a(ob))},db.$$arity=-1);a.def(c,"$raise",ab=function(v,V){null==x["!"]&&(x["!"]=t);null==V&&(V=t);if(null==v&&x["!"]!==t)throw x["!"];null==v?v=z(I,"RuntimeError").$new():v.$$is_string?
v=z(I,"RuntimeError").$new(v):v.$$is_class&&v["$respond_to?"]("exception")?v=v.$exception(V):v["$is_a?"](z(I,"Exception"))||(v=z(I,"TypeError").$new("exception class/object expected"));x["!"]!==t&&a.exceptions.push(x["!"]);x["!"]=v;throw v;},ab.$$arity=-1);a.alias(c,"fail","raise");a.def(c,"$rand",Wa=function(v){if(void 0===v)return w(z(I,"Random"),"DEFAULT").$rand();v.$$is_number&&(0>v&&(v=Math.abs(v)),0!==v%1&&(v=v.$to_i()),0===v&&(v=void 0));return w(z(I,"Random"),"DEFAULT").$rand(v)},Wa.$$arity=
-1);a.def(c,"$respond_to?",Ba=function(v,V){null==V&&(V=!1);var oa=this["$"+v];return"function"!==typeof oa||oa.$$stub?!0===this["$respond_to_missing?"].$$pristine?!1:this["$respond_to_missing?"](v,V):!0},Ba.$$arity=-2);a.def(c,"$respond_to_missing?",ta=function(){return!1},ta.$$arity=-2);z(I,"Opal").$pristine(c,"respond_to?","respond_to_missing?");a.def(c,"$require",Na=function(v){v=z(I,"Opal")["$coerce_to!"](v,z(I,"String"),"to_str");return a.require(v)},Na.$$arity=1);a.def(c,"$require_relative",
Sa=function(v){z(I,"Opal")["$try_convert!"](v,z(I,"String"),"to_str");v=z(I,"File").$expand_path(z(I,"File").$join(a.current_file,"..",v));return a.require(v)},Sa.$$arity=1);a.def(c,"$require_tree",Ya=function(v){var V=[];v=z(I,"File").$expand_path(v);v=a.normalize(v);"."===v&&(v="");for(var oa in a.modules)oa["$start_with?"](v)&&V.push([oa,a.require(oa)]);return V},Ya.$$arity=1);a.alias(c,"send","__send__");a.alias(c,"public_send","__send__");a.def(c,"$singleton_class",Ha=function(){return a.get_singleton_class(this)},
Ha.$$arity=0);a.def(c,"$sleep",Y=function(v){null==v&&(v=t);v===t&&this.$raise(z(I,"TypeError"),"can't convert NilClass into time interval");v.$$is_number||this.$raise(z(I,"TypeError"),"can't convert "+v.$class()+" into time interval");0>v&&this.$raise(z(I,"ArgumentError"),"time interval must be positive");for(var V=a.global.performance?function(){return performance.now()}:function(){return new Date},oa=V();V()-oa<=1E3*v;);return Math.round(v)},Y.$$arity=-1);a.def(c,"$srand",Q=function(v){null==v&&
(v=z(I,"Random").$new_seed());return z(I,"Random").$srand(v)},Q.$$arity=-1);a.def(c,"$String",Z=function(v){var V;return p(V=z(I,"Opal")["$coerce_to?"](v,z(I,"String"),"to_str"))?V:z(I,"Opal")["$coerce_to!"](v,z(I,"String"),"to_s")},Z.$$arity=1);a.def(c,"$tap",U=function(){var v=U.$$p,V=v||t;v&&(U.$$p=null);v&&(U.$$p=null);a.yield1(V,this);return this},U.$$arity=0);a.def(c,"$to_proc",ha=function(){return this},ha.$$arity=0);a.def(c,"$to_s",la=function(){return"#<"+this.$class()+":0x"+this.$__id__().$to_s(16)+
">"},la.$$arity=0);a.def(c,"$catch",g=function(v){var V=g.$$p,oa=V||t;V&&(g.$$p=null);try{return a.yieldX(oa,[])}catch(La){if(a.rescue(La,[z(I,"UncaughtThrowError")])){V=La;try{return V.$sym()["$=="](v)?V.$arg():this.$raise()}finally{a.pop_exception()}}else throw La;}},g.$$arity=1);a.def(c,"$throw",C=function(v){var V=a.slice.call(arguments,0,arguments.length);return this.$raise(z(I,"UncaughtThrowError"),V)},C.$$arity=-1);a.def(c,"$open",N=function(v){var V=N.$$p,oa=V||t;V&&(N.$$p=null);V&&(N.$$p=
null);V=a.slice.call(arguments,0,arguments.length);return m(z(I,"File"),"open",a.to_a(V),oa.$to_proc())},N.$$arity=-1);a.def(c,"$yield_self",aa=function(){var v,V=aa.$$p,oa=V||t;V&&(aa.$$p=null);return oa===t?m(this,"enum_for",["yield_self"],(v=function(){return 1},v.$$s=this,v.$$arity=0,v)):a.yield1(oa,this)},aa.$$arity=0);a.alias(c,"then","yield_self");z(I,"Opal").$pristine(c,"method_missing")})(J[0],J);return function(c,$super,I){c=u(c,$super,"Object");I=[c].concat(I);return c.$include(z(I,"Kernel"))}(J[0],
null,J)};
Opal.modules["corelib/error"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.klass,z=a.send,p=a.truthy,d=a.module,H=a.send2,x=a.hash2;a.add_stubs("$new $clone $to_s $empty? $class $raise $+ $attr_reader $[] $> $length $inspect".split(" "));(function(l,$super,u){l=w(l,$super,"Exception");var c=[l].concat(u),k,I,e,n,L,D,R,ka,da;l.$$prototype.message=J;a.defs(l,"$new",k=function(b){var h=a.slice.call(arguments,0,arguments.length);var f=0<h.length?h[0]:J,q=new this.$$constructor(f);q.name=this.$$name;q.message=
f;a.send(q,q.$initialize,h);a.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(q,ma);return q},k.$$arity=-1);var ma=l.$new;a.defs(l,"$exception",I=function(b){var h=a.slice.call(arguments,0,arguments.length);return z(this,"new",a.to_a(h))},I.$$arity=-1);a.def(l,"$initialize",e=function(b){var h=a.slice.call(arguments,0,arguments.length);return this.message=0<h.length?h[0]:J},e.$$arity=-1);a.def(l,"$backtrace",n=function(){if(this.backtrace)return this.backtrace;var b=this.stack;
return"string"===typeof b?b.split("\n").slice(0,15):b?b.slice(0,15):[]},n.$$arity=0);a.def(l,"$exception",L=function(b){null==b&&(b=J);if(b===J||this===b)return this;var h=this.$clone();h.message=b;h.stack=this.stack;return h},L.$$arity=-1);a.def(l,"$message",D=function(){return this.$to_s()},D.$$arity=0);a.def(l,"$inspect",R=function(){var b=this.$to_s();return p(b["$empty?"]())?this.$class().$to_s():"#<"+this.$class().$to_s()+": "+this.$to_s()+">"},R.$$arity=0);a.def(l,"$set_backtrace",ka=function(b){var h=
!0,f;if(b===J)this.backtrace=J,this.stack="";else if(b.$$is_string)this.backtrace=[b],this.stack=b;else{if(b.$$is_array){var q=0;for(f=b.length;q<f;q++)if(!b[q].$$is_string){h=!1;break}}else h=!1;!1===h&&this.$raise(t(c,"TypeError"),"backtrace must be Array of String");this.backtrace=b;this.stack=b.join("\n")}return b},ka.$$arity=1);return(a.def(l,"$to_s",da=function(){var b=J,h=J;return p(b=p(h=this.message)?this.message.$to_s():h)?b:this.$class().$to_s()},da.$$arity=0),J)&&"to_s"})(y[0],Error,y);
(function(l,$super,u){[w(l,$super,"ScriptError")].concat(u);return J})(y[0],t(y,"Exception"),y);(function(l,$super,u){[w(l,$super,"SyntaxError")].concat(u);return J})(y[0],t(y,"ScriptError"),y);(function(l,$super,u){[w(l,$super,"LoadError")].concat(u);return J})(y[0],t(y,"ScriptError"),y);(function(l,$super,u){[w(l,$super,"NotImplementedError")].concat(u);return J})(y[0],t(y,"ScriptError"),y);(function(l,$super,u){[w(l,$super,"SystemExit")].concat(u);return J})(y[0],t(y,"Exception"),y);(function(l,
$super,u){[w(l,$super,"NoMemoryError")].concat(u);return J})(y[0],t(y,"Exception"),y);(function(l,$super,u){[w(l,$super,"SignalException")].concat(u);return J})(y[0],t(y,"Exception"),y);(function(l,$super,u){[w(l,$super,"Interrupt")].concat(u);return J})(y[0],t(y,"Exception"),y);(function(l,$super,u){[w(l,$super,"SecurityError")].concat(u);return J})(y[0],t(y,"Exception"),y);(function(l,$super,u){[w(l,$super,"StandardError")].concat(u);return J})(y[0],t(y,"Exception"),y);(function(l,$super,u){[w(l,
$super,"EncodingError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,$super,"ZeroDivisionError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,$super,"NameError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,$super,"NoMethodError")].concat(u);return J})(y[0],t(y,"NameError"),y);(function(l,$super,u){[w(l,$super,"RuntimeError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,
$super,"FrozenError")].concat(u);return J})(y[0],t(y,"RuntimeError"),y);(function(l,$super,u){[w(l,$super,"LocalJumpError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,$super,"TypeError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,$super,"ArgumentError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,$super,"IndexError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,
$super,"StopIteration")].concat(u);return J})(y[0],t(y,"IndexError"),y);(function(l,$super,u){[w(l,$super,"KeyError")].concat(u);return J})(y[0],t(y,"IndexError"),y);(function(l,$super,u){[w(l,$super,"RangeError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,$super,"FloatDomainError")].concat(u);return J})(y[0],t(y,"RangeError"),y);(function(l,$super,u){[w(l,$super,"IOError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){[w(l,$super,"SystemCallError")].concat(u);
return J})(y[0],t(y,"StandardError"),y);(function(l,m){l=[d(l,"Errno")].concat(m);(function(u,$super,k){u=w(u,$super,"EINVAL");[u].concat(k);var I;return(a.defs(u,"$new",I=function(e){I.$$p&&(I.$$p=null);null==e&&(e=J);var n="Invalid argument";p(e)&&(e=" - "+e,n="number"===typeof n&&"number"===typeof e?n+e:n["$+"](e));return H(this,a.find_super_dispatcher(this,"new",I,!1,!0),"new",[n],null)},I.$$arity=-1),J)&&"new"})(l[0],t(l,"SystemCallError"),l)})(y[0],y);(function(l,$super,u){l=w(l,$super,"UncaughtThrowError");
[l].concat(u);var c;l.$$prototype.sym=J;l.$attr_reader("sym","arg");return(a.def(l,"$initialize",c=function(k){c.$$p&&(c.$$p=null);this.sym=k["$[]"](0);var I=k.$length();I="number"===typeof I?1<I:I["$>"](1);p(I)&&(this.arg=k["$[]"](1));return H(this,a.find_super_dispatcher(this,"initialize",c,!1,!0),"initialize",["uncaught throw "+this.sym.$inspect()],null)},c.$$arity=1),J)&&"initialize"})(y[0],t(y,"ArgumentError"),y);(function(l,$super,u){l=w(l,$super,"NameError");[l].concat(u);var c;l.$attr_reader("name");
return(a.def(l,"$initialize",c=function(k,I){c.$$p&&(c.$$p=null);null==I&&(I=J);H(this,a.find_super_dispatcher(this,"initialize",c,!1,!0),"initialize",[k],null);return this.name=I},c.$$arity=-2),J)&&"initialize"})(y[0],null,y);(function(l,$super,u){l=w(l,$super,"NoMethodError");[l].concat(u);var c;l.$attr_reader("args");return(a.def(l,"$initialize",c=function(k,I,e){c.$$p&&(c.$$p=null);null==I&&(I=J);null==e&&(e=[]);H(this,a.find_super_dispatcher(this,"initialize",c,!1,!0),"initialize",[k,I],null);
return this.args=e},c.$$arity=-2),J)&&"initialize"})(y[0],null,y);(function(l,$super,u){l=w(l,$super,"StopIteration");[l].concat(u);return l.$attr_reader("result")})(y[0],null,y);(function(l,$super,u){l=w(l,$super,"KeyError");var c=[l].concat(u),k,I,e;l.$$prototype.receiver=l.$$prototype.key=J;a.def(l,"$initialize",k=function(n,L){k.$$p&&(k.$$p=null);if(null==L)L=x([],{});else if(!L.$$is_hash)throw a.ArgumentError.$new("expected kwargs");var D=L.$$smap.receiver;null==D&&(D=J);L=L.$$smap.key;null==
L&&(L=J);H(this,a.find_super_dispatcher(this,"initialize",k,!1,!0),"initialize",[n],null);this.receiver=D;return this.key=L},k.$$arity=-2);a.def(l,"$receiver",I=function(){var n;return p(n=this.receiver)?n:this.$raise(t(c,"ArgumentError"),"no receiver is available")},I.$$arity=0);return(a.def(l,"$key",e=function(){var n;return p(n=this.key)?n:this.$raise(t(c,"ArgumentError"),"no key is available")},e.$$arity=0),J)&&"key"})(y[0],null,y);return function(l,m){l=[d(l,"JS")].concat(m);[w(l[0],null,"Error")].concat(l)}(y[0],
y)};
Opal.modules["corelib/constants"]=function(a){var y=[],J=a.$$;a.const_set(y[0],"RUBY_PLATFORM","opal");a.const_set(y[0],"RUBY_ENGINE","opal");a.const_set(y[0],"RUBY_VERSION","3.0.0");a.const_set(y[0],"RUBY_ENGINE_VERSION","1.1.1");a.const_set(y[0],"RUBY_RELEASE_DATE","2021-02-23");a.const_set(y[0],"RUBY_PATCHLEVEL",0);a.const_set(y[0],"RUBY_REVISION","0");a.const_set(y[0],"RUBY_COPYRIGHT","opal - Copyright (C) 2013-2021 Adam Beynon and the Opal contributors");return a.const_set(y[0],"RUBY_DESCRIPTION","opal "+
J(y,"RUBY_ENGINE_VERSION")+" ("+J(y,"RUBY_RELEASE_DATE")+" revision "+J(y,"RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(a){var y=a.top;a.add_stubs(["$require"]);y.$require("corelib/runtime");y.$require("corelib/helpers");y.$require("corelib/module");y.$require("corelib/class");y.$require("corelib/basic_object");y.$require("corelib/kernel");y.$require("corelib/error");return y.$require("corelib/constants")};
Opal.modules["corelib/nil"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.klass,z=a.hash2,p=a.truthy;a.add_stubs("$raise $name $new $> $length $Rational".split(" "));(function(d,$super,x){d=w(d,$super,"NilClass");var l=[d].concat(x),m,u,c,k,I,e,n,L,D,R,ka,da,ma,b,h,f,q,A;d.$$prototype.$$meta=d;(function(E,G){var M=[E].concat(G),ba;a.def(E,"$allocate",ba=function(){return this.$raise(t(M,"TypeError"),"allocator undefined for "+this.$name())},ba.$$arity=0);a.udef(E,"$new");return J})(a.get_singleton_class(d),
l);a.def(d,"$!",m=function(){return!0},m.$$arity=0);a.def(d,"$&",u=function(){return!1},u.$$arity=1);a.def(d,"$|",c=function(E){return!1!==E&&E!==J},c.$$arity=1);a.def(d,"$^",k=function(E){return!1!==E&&E!==J},k.$$arity=1);a.def(d,"$==",I=function(E){return E===J},I.$$arity=1);a.def(d,"$dup",e=function(){return J},e.$$arity=0);a.def(d,"$clone",n=function(E){if(null==E)z([],{});else if(!E.$$is_hash)throw a.ArgumentError.$new("expected kwargs");return J},n.$$arity=-1);a.def(d,"$inspect",L=function(){return"nil"},
L.$$arity=0);a.def(d,"$nil?",D=function(){return!0},D.$$arity=0);a.def(d,"$singleton_class",R=function(){return t(l,"NilClass")},R.$$arity=0);a.def(d,"$to_a",ka=function(){return[]},ka.$$arity=0);a.def(d,"$to_h",da=function(){return a.hash()},da.$$arity=0);a.def(d,"$to_i",ma=function(){return 0},ma.$$arity=0);a.alias(d,"to_f","to_i");a.def(d,"$to_s",b=function(){return""},b.$$arity=0);a.def(d,"$to_c",h=function(){return t(l,"Complex").$new(0,0)},h.$$arity=0);a.def(d,"$rationalize",f=function(E){var G=
a.slice.call(arguments,0,arguments.length).$length();G="number"===typeof G?1<G:G["$>"](1);p(G)&&this.$raise(t(l,"ArgumentError"));return this.$Rational(0,1)},f.$$arity=-1);a.def(d,"$to_r",q=function(){return this.$Rational(0,1)},q.$$arity=0);return(a.def(d,"$instance_variables",A=function(){return[]},A.$$arity=0),J)&&"instance_variables"})(y[0],null,y);return a.const_set(y[0],"NIL",J)};
Opal.modules["corelib/boolean"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.klass,z=a.hash2;a.add_stubs(["$raise","$name"]);(function(p,$super,H){p=w(p,$super,"Boolean");var x=[p].concat(H),l,m,u,c,k,I,e,n,L,D;a.defineProperty(p.$$prototype,"$$is_boolean",!0);a.defineProperty(p.$$prototype,"$$meta",p);(function(R,ka){var da=[R].concat(ka),ma;a.def(R,"$allocate",ma=function(){return this.$raise(t(da,"TypeError"),"allocator undefined for "+this.$name())},ma.$$arity=0);a.udef(R,"$new");return J})(a.get_singleton_class(p),
x);a.def(p,"$__id__",l=function(){return this.valueOf()?2:0},l.$$arity=0);a.alias(p,"object_id","__id__");a.def(p,"$!",m=function(){return 1!=this},m.$$arity=0);a.def(p,"$&",u=function(R){return 1==this?!1!==R&&R!==J:!1},u.$$arity=1);a.def(p,"$|",c=function(R){return 1==this?!0:!1!==R&&R!==J},c.$$arity=1);a.def(p,"$^",k=function(R){return 1==this?!1===R||R===J:!1!==R&&R!==J},k.$$arity=1);a.def(p,"$==",I=function(R){return 1==this===R.valueOf()},I.$$arity=1);a.alias(p,"equal?","==");a.alias(p,"eql?",
"==");a.def(p,"$singleton_class",e=function(){return t(x,"Boolean")},e.$$arity=0);a.def(p,"$to_s",n=function(){return 1==this?"true":"false"},n.$$arity=0);a.def(p,"$dup",L=function(){return this},L.$$arity=0);return(a.def(p,"$clone",D=function(R){if(null==R)z([],{});else if(!R.$$is_hash)throw a.ArgumentError.$new("expected kwargs");return this},D.$$arity=-1),J)&&"clone"})(y[0],Boolean,y);a.const_set(y[0],"TrueClass",t(y,"Boolean"));a.const_set(y[0],"FalseClass",t(y,"Boolean"));a.const_set(y[0],"TRUE",
!0);return a.const_set(y[0],"FALSE",!1)};
Opal.modules["corelib/comparable"]=function(a){function y(x,l){return"number"===typeof x&&"number"===typeof l?x>l:x["$>"](l)}function J(x,l){return"number"===typeof x&&"number"===typeof l?x<l:x["$<"](l)}var t=[],w=a.nil,z=a.$$,p=a.falsy,d=a.module,H=a.truthy;a.add_stubs("$> $< $=== $raise $class $<=> $equal?".split(" "));return function(x,l){function m(ma){return a.is_a(ma,a.Integer)?ma:y(ma,0)?1:J(ma,0)?-1:0}function u(ma,b){var h=ma["$<=>"](b);p(h)&&(da=b,b=w["$==="](da)||(!0)["$==="](da)||(!1)["$==="](da)||
z(k,"Integer")["$==="](da)||z(k,"Float")["$==="](da)?b.$inspect():b.$$class,c.$raise(z(k,"ArgumentError"),"comparison of "+ma.$class()+" with "+b+" failed"));return m(h)}var c=d(x,"Comparable"),k=[c].concat(l),I,e,n,L,D,R,ka,da=w;a.def(c,"$==",I=function(ma){var b;return H(this["$equal?"](ma))?!0:this["$<=>"]==a.Kernel["$<=>"]?!1:this.$$comparable?(delete this.$$comparable,!1):H(b=this["$<=>"](ma))?0==m(b):!1},I.$$arity=1);a.def(c,"$>",e=function(ma){return 0<u(this,ma)},e.$$arity=1);a.def(c,"$>=",
n=function(ma){return 0<=u(this,ma)},n.$$arity=1);a.def(c,"$<",L=function(ma){return 0>u(this,ma)},L.$$arity=1);a.def(c,"$<=",D=function(ma){return 0>=u(this,ma)},D.$$arity=1);a.def(c,"$between?",R=function(ma,b){return J(this,ma)||y(this,b)?!1:!0},R.$$arity=2);a.def(c,"$clamp",ka=function(ma,b){null==b&&(b=w);if(b===w){a.is_a(ma,a.Range)||this.$raise(z(k,"TypeError"),"wrong argument type "+ma.$class()+" (expected Range)");var h=ma.excl;b=ma.end;ma=ma.begin;b!==w&&h&&this.$raise(z(k,"ArgumentError"),
"cannot clamp with an exclusive range")}ma!==w&&b!==w&&0<u(ma,b)&&this.$raise(z(k,"ArgumentError"),"min argument must be smaller than max argument");if(ma!==w){h=u(this,ma);if(0==h)return this;if(0>h)return ma}return b!==w&&(h=u(this,b),0<h)?b:this},ka.$$arity=-2)}(t[0],t)};
Opal.modules["corelib/regexp"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.coerce_to,z=a.klass,p=a.send2,d=a.truthy,H=a.gvars,x=a.send;a.add_stubs("$nil? $[] $raise $escape $options $to_str $new $join $coerce_to! $! $match $coerce_to? $begin $=~ $attr_reader $=== $inspect $to_a".split(" "));(function(l,$super,u){[z(l,$super,"RegexpError")].concat(u);return J})(y[0],t(y,"StandardError"),y);(function(l,$super,u){l=z(l,$super,"Regexp");var c=[l].concat(u),k,I,e,n,L,D,R,ka,da,ma;a.const_set(c[0],"IGNORECASE",
1);a.const_set(c[0],"EXTENDED",2);a.const_set(c[0],"MULTILINE",4);a.defineProperty(l.$$prototype,"$$is_regexp",!0);(function(b,h){var f=[b].concat(h),q,A,E,G,M;a.def(b,"$allocate",q=function(){var ba=q.$$p,ua;ba&&(q.$$p=null);var Pa=0;var xa=arguments.length;for(ua=Array(xa);Pa<xa;Pa++)ua[Pa]=arguments[Pa];ba=p(this,a.find_super_dispatcher(this,"allocate",q,!1,!0),"allocate",ua,ba);ba.uninitialized=!0;return ba},q.$$arity=0);a.def(b,"$escape",A=function(ba){return a.escape_regexp(ba)},A.$$arity=1);
a.def(b,"$last_match",E=function(ba){null==H["~"]&&(H["~"]=J);null==ba&&(ba=J);return d(ba["$nil?"]())?H["~"]:H["~"]["$[]"](ba)},E.$$arity=-1);a.alias(b,"quote","escape");a.def(b,"$union",G=function(ba){var ua=a.slice.call(arguments,0,arguments.length);if(0==ua.length)return/(?!)/;if(1==ua.length&&ua[0].$$is_regexp)return ua[0];var Pa=ua[0].$$is_array;1<ua.length&&Pa&&this.$raise(t(f,"TypeError"),"no implicit conversion of Array into String");Pa&&(ua=ua[0]);var xa=void 0;Pa=[];for(var Da=0;Da<ua.length;Da++){var Ma=
ua[Da];if(Ma.$$is_string)Pa.push(this.$escape(Ma));else if(Ma.$$is_regexp){var na=Ma.$options();void 0!=xa&&xa!=na&&this.$raise(t(f,"TypeError"),"All expressions must use the same options");xa=na;Pa.push("("+Ma.source+")")}else Pa.push(this.$escape(Ma.$to_str()))}return this.$new(Pa.$join("|"),xa)},G.$$arity=-1);a.def(b,"$new",M=function(ba,ua){if(ba.$$is_regexp)return new RegExp(ba);ba=t(f,"Opal")["$coerce_to!"](ba,t(f,"String"),"to_str");"\\"===ba.charAt(ba.length-1)&&"\\"!==ba.charAt(ba.length-
2)&&this.$raise(t(f,"RegexpError"),"too short escape sequence: /"+ba+"/");if(void 0===ua||ua["$!"]())return new RegExp(ba);if(ua.$$is_number){var Pa="";t(f,"IGNORECASE")&ua&&(Pa+="i");t(f,"MULTILINE")&ua&&(Pa+="m");ua=Pa}else ua="i";return new RegExp(ba,ua)},M.$$arity=-2);return a.alias(b,"compile","new")})(a.get_singleton_class(l),c);a.def(l,"$==",k=function(b){return b instanceof RegExp&&this.toString()===b.toString()},k.$$arity=1);a.def(l,"$===",I=function(b){return this.$match(t(c,"Opal")["$coerce_to?"](b,
t(c,"String"),"to_str"))!==J},I.$$arity=1);a.def(l,"$=~",e=function(b){var h;null==H["~"]&&(H["~"]=J);return d(h=this.$match(b))?H["~"].$begin(0):h},e.$$arity=1);a.alias(l,"eql?","==");a.def(l,"$inspect",n=function(){var b=this.toString(),h=/^\/(.*)\/([^\/]*)$/.exec(b);if(h){b=h[2];h=h[1].split("");for(var f=h.length,q=!1,A="",E=0;E<f;E++){var G=h[E];q||"/"!=G||(A=A.concat("\\"));A=A.concat(G);q="\\"==G?q?!1:!0:!1}return"/"+A+"/"+b}return b},n.$$arity=0);a.def(l,"$match",L=function(b,h){var f=L.$$p,
q=f||J;null==H["~"]&&(H["~"]=J);f&&(L.$$p=null);f&&(L.$$p=null);this.uninitialized&&this.$raise(t(c,"TypeError"),"uninitialized Regexp");if(void 0===h)return b===J?H["~"]=J:(b=this.exec(w(b,t(c,"String"),"to_str")))?(H["~"]=t(c,"MatchData").$new(this,b),q===J?H["~"]:a.yield1(q,H["~"])):H["~"]=J;h=w(h,t(c,"Integer"),"to_int");if(b===J)return H["~"]=J;b=w(b,t(c,"String"),"to_str");if(0>h&&(h+=b.length,0>h))return H["~"]=J;for(var A=a.global_regexp(this);;){f=A.exec(b);if(null===f)return H["~"]=J;if(f.index>=
h)return H["~"]=t(c,"MatchData").$new(A,f),q===J?H["~"]:a.yield1(q,H["~"]);A.lastIndex=f.index+1}},L.$$arity=-2);a.def(l,"$match?",D=function(b,h){this.uninitialized&&this.$raise(t(c,"TypeError"),"uninitialized Regexp");if(void 0===h)return b===J?!1:this.test(w(b,t(c,"String"),"to_str"));h=w(h,t(c,"Integer"),"to_int");if(b===J)return!1;b=w(b,t(c,"String"),"to_str");if(0>h&&(h+=b.length,0>h))return!1;b=a.global_regexp(this).exec(b);return null===b||b.index<h?!1:!0},D.$$arity=-2);a.def(l,"$~",R=function(){null==
H._&&(H._=J);return this["$=~"](H._)},R.$$arity=0);a.def(l,"$source",ka=function(){return this.source},ka.$$arity=0);a.def(l,"$options",da=function(){this.uninitialized&&this.$raise(t(c,"TypeError"),"uninitialized Regexp");var b=0;this.multiline&&(b|=t(c,"MULTILINE"));this.ignoreCase&&(b|=t(c,"IGNORECASE"));return b},da.$$arity=0);a.def(l,"$casefold?",ma=function(){return this.ignoreCase},ma.$$arity=0);return a.alias(l,"to_s","source")})(y[0],RegExp,y);return function(l,$super,u){l=z(l,$super,"MatchData");
var c=[l].concat(u),k,I,e,n,L,D,R,ka,da,ma,b,h;l.$$prototype.matches=J;l.$attr_reader("post_match","pre_match","regexp","string");a.def(l,"$initialize",k=function(f,q){H["~"]=this;this.regexp=f;this.begin=q.index;this.string=q.input;this.pre_match=q.input.slice(0,q.index);this.post_match=q.input.slice(q.index+q[0].length);this.matches=[];f=0;for(var A=q.length;f<A;f++){var E=q[f];null==E?this.matches.push(J):this.matches.push(E)}},k.$$arity=2);a.def(l,"$[]",I=function(f){var q=a.slice.call(arguments,
0,arguments.length);return x(this.matches,"[]",a.to_a(q))},I.$$arity=-1);a.def(l,"$offset",e=function(f){0!==f&&this.$raise(t(c,"ArgumentError"),"MatchData#offset only supports 0th element");return[this.begin,this.begin+this.matches[f].length]},e.$$arity=1);a.def(l,"$==",n=function(f){var q=J,A=J,E=J,G=J;return d(t(c,"MatchData")["$==="](f))?d(q=d(A=d(E=d(G=this.string==f.string)?this.regexp.toString()==f.regexp.toString():G)?this.pre_match==f.pre_match:E)?this.post_match==f.post_match:A)?this.begin==
f.begin:q:!1},n.$$arity=1);a.alias(l,"eql?","==");a.def(l,"$begin",L=function(f){0!==f&&this.$raise(t(c,"ArgumentError"),"MatchData#begin only supports 0th element");return this.begin},L.$$arity=1);a.def(l,"$end",D=function(f){0!==f&&this.$raise(t(c,"ArgumentError"),"MatchData#end only supports 0th element");return this.begin+this.matches[f].length},D.$$arity=1);a.def(l,"$captures",R=function(){return this.matches.slice(1)},R.$$arity=0);a.def(l,"$inspect",ka=function(){for(var f="#<MatchData "+this.matches[0].$inspect(),
q=1,A=this.matches.length;q<A;q++)f+=" "+q+":"+this.matches[q].$inspect();return f+">"},ka.$$arity=0);a.def(l,"$length",da=function(){return this.matches.length},da.$$arity=0);a.alias(l,"size","length");a.def(l,"$to_a",ma=function(){return this.matches},ma.$$arity=0);a.def(l,"$to_s",b=function(){return this.matches[0]},b.$$arity=0);return(a.def(l,"$values_at",h=function(f){var q=a.slice.call(arguments,0,arguments.length);var A,E=[];for(A=0;A<q.length;A++){if(q[A].$$is_range){var G=q[A].$to_a();G.unshift(A,
1);Array.prototype.splice.apply(q,G)}G=t(c,"Opal")["$coerce_to!"](q[A],t(c,"Integer"),"to_int");if(0>G&&(G+=this.matches.length,0>G)){E.push(J);continue}E.push(this.matches[G])}return E},h.$$arity=-1),J)&&"values_at"}(y[0],null,y)};
Opal.modules["corelib/string"]=function(a){function y(k,I){return"number"===typeof k&&"number"===typeof I?k/I:k["$/"](I)}function J(k,I){return"number"===typeof k&&"number"===typeof I?k+I:k["$+"](I)}var t=a.top,w=[],z=a.nil,p=a.$$$,d=a.$$,H=a.coerce_to,x=a.respond_to,l=a.klass,m=a.truthy,u=a.send,c=a.gvars;a.add_stubs("$require $include $coerce_to? $raise $=== $format $to_s $respond_to? $to_str $<=> $== $=~ $new $force_encoding $casecmp $empty? $ljust $ceil $/ $+ $rjust $floor $to_a $each_char $to_proc $coerce_to! $copy_singleton_methods $initialize_clone $initialize_dup $enum_for $size $chomp $[] $to_i $each_line $encoding $class $match $match? $captures $proc $succ $escape $include? $upcase $unicode_normalize".split(" "));
t.$require("corelib/comparable");t.$require("corelib/regexp");(function(k,$super,e){function n(B){function O(Ua){var Xa="",gb,qb=Ua.length;for(gb=0;gb<qb;gb++){var nb=Ua.charAt(gb);if("-"===nb&&0<gb&&gb<qb-1&&!pb){var pb=Ua.charCodeAt(gb-1);nb=Ua.charCodeAt(gb+1);pb>nb&&L.$raise(d(D,"ArgumentError"),'invalid range "'+pb+"-"+nb+'" in string transliteration');for(pb+=1;pb<nb+1;pb++)Xa+=String.fromCharCode(pb);pb=!0;gb++}else pb="\\"===nb,Xa+=nb}return Xa}function ra(Ua,Xa){if(0===Ua.length)return Xa;
var gb="",qb,nb=Ua.length;for(qb=0;qb<nb;qb++){var pb=Ua.charAt(qb);-1!==Xa.indexOf(pb)&&(gb+=pb)}return gb}var Ia,Ea="",Ka="";var Va=0;for(Ia=B.length;Va<Ia;Va++){var hb=H(B[Va],d(D,"String"),"to_str");var eb="^"===hb.charAt(0)&&1<hb.length;hb=O(eb?hb.slice(1):hb);eb?Ka=ra(Ka,hb):Ea=ra(Ea,hb)}if(0<Ea.length&&0<Ka.length){hb="";Va=0;for(Ia=Ea.length;Va<Ia;Va++)B=Ea.charAt(Va),-1===Ka.indexOf(B)&&(hb+=B);Ea=hb;Ka=""}return 0<Ea.length?"["+d(D,"Regexp").$escape(Ea)+"]":0<Ka.length?"[^"+d(D,"Regexp").$escape(Ka)+
"]":null}var L=l(k,$super,"String"),D=[L].concat(e),R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za,Ca,Aa,bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha,Y,Q,Z,U,ha,la,g,C,N,aa,v,V,oa,La,ib,ob,mb,sb,tb,wb,xb,ub,X,Oa,cb;L.$include(d(D,"Comparable"));a.defineProperty(L.$$prototype,"$$is_string",!0);a.defineProperty(L.$$prototype,"$$cast",function(B){var O=this.$$class;return O.$$constructor===String?B:new O.$$constructor(B)});a.def(L,"$__id__",R=function(){return this.toString()},
R.$$arity=0);a.alias(L,"object_id","__id__");a.defs(L,"$try_convert",ka=function(B){return d(D,"Opal")["$coerce_to?"](B,d(D,"String"),"to_str")},ka.$$arity=1);a.defs(L,"$new",da=function(B){null==B&&(B="");B=H(B,d(D,"String"),"to_str");return new this.$$constructor(B)},da.$$arity=-1);a.def(L,"$initialize",ma=function(B){return void 0===B?this:this.$raise(d(D,"NotImplementedError"),"Mutable strings are not supported in Opal.")},ma.$$arity=-1);a.def(L,"$%",b=function(B){return m(d(D,"Array")["$==="](B))?
u(this,"format",[this].concat(a.to_a(B))):this.$format(this,B)},b.$$arity=1);a.def(L,"$*",h=function(B){B=H(B,d(D,"Integer"),"to_int");0>B&&this.$raise(d(D,"ArgumentError"),"negative argument");if(0===B)return this.$$cast("");var O="",ra=this.toString();for(268435456<=ra.length*B&&this.$raise(d(D,"RangeError"),"multiply count must not overflow maximum string size");;){1===(B&1)&&(O+=ra);B>>>=1;if(0===B)break;ra+=ra}return this.$$cast(O)},h.$$arity=1);a.def(L,"$+",f=function(B){B=H(B,d(D,"String"),
"to_str");return this+B.$to_s()},f.$$arity=1);a.def(L,"$<=>",q=function(B){if(m(B["$respond_to?"]("to_str")))return B=B.$to_str().$to_s(),this>B?1:this<B?-1:0;B=B["$<=>"](this);return B===z?z:0<B?-1:0>B?1:0},q.$$arity=1);a.def(L,"$==",A=function(B){return B.$$is_string?this.toString()===B.toString():x(B,"$to_str")?B["$=="](this):!1},A.$$arity=1);a.alias(L,"eql?","==");a.alias(L,"===","==");a.def(L,"$=~",E=function(B){B.$$is_string&&this.$raise(d(D,"TypeError"),"type mismatch: String given");return B["$=~"](this)},
E.$$arity=1);a.def(L,"$[]",G=function(B,O){var ra=this.length;if(B.$$is_range){var Ia=B.excl;O=H(B.end,d(D,"Integer"),"to_int");B=H(B.begin,d(D,"Integer"),"to_int");if(Math.abs(B)>ra)return z;0>B&&(B+=ra);0>O&&(O+=ra);Ia||(O+=1);O-=B;0>O&&(O=0);return this.$$cast(this.substr(B,O))}if(B.$$is_string)return null!=O&&this.$raise(d(D,"TypeError")),-1!==this.indexOf(B)?this.$$cast(B):z;if(B.$$is_regexp){ra=this.match(B);if(null===ra)return c["~"]=z;c["~"]=d(D,"MatchData").$new(B,ra);if(null==O)return this.$$cast(ra[0]);
O=H(O,d(D,"Integer"),"to_int");return 0>O&&-O<ra.length?this.$$cast(ra[O+ra.length]):0<=O&&O<ra.length?this.$$cast(ra[O]):z}B=H(B,d(D,"Integer"),"to_int");0>B&&(B+=ra);if(null==O)return B>=ra||0>B?z:this.$$cast(this.substr(B,1));O=H(O,d(D,"Integer"),"to_int");return 0>O||B>ra||0>B?z:this.$$cast(this.substr(B,O))},G.$$arity=-2);a.alias(L,"byteslice","[]");a.def(L,"$b",M=function(){return this.$force_encoding("binary")},M.$$arity=0);a.def(L,"$capitalize",ba=function(){return this.$$cast(this.charAt(0).toUpperCase()+
this.substr(1).toLowerCase())},ba.$$arity=0);a.def(L,"$casecmp",ua=function(B){var O=this;if(!m(B["$respond_to?"]("to_str")))return z;B=H(B,d(D,"String"),"to_str").$to_s();var ra=/^[\x00-\x7F]*$/;ra.test(O)&&ra.test(B)&&(O=O.toLowerCase(),B=B.toLowerCase());return O["$<=>"](B)},ua.$$arity=1);a.def(L,"$casecmp?",Pa=function(B){B=this.$casecmp(B);return B===z?z:0===B},Pa.$$arity=1);a.def(L,"$center",xa=function(B,O){null==O&&(O=" ");B=H(B,d(D,"Integer"),"to_int");O=H(O,d(D,"String"),"to_str").$to_s();
m(O["$empty?"]())&&this.$raise(d(D,"ArgumentError"),"zero width padding");if(m(B<=this.length))return this;var ra=this.$ljust(y(J(B,this.length),2).$ceil(),O);B=this.$rjust(y(J(B,this.length),2).$floor(),O);return this.$$cast(B+ra.slice(this.length))},xa.$$arity=-2);a.def(L,"$chars",Da=function(){var B=Da.$$p,O=B||z;B&&(Da.$$p=null);B&&(Da.$$p=null);return m(O)?u(this,"each_char",[],O.$to_proc()):this.$each_char().$to_a()},Da.$$arity=0);a.def(L,"$chomp",Ma=function(B){null==c["/"]&&(c["/"]=z);null==
B&&(B=c["/"]);if(m(B===z||0===this.length))return this;B=d(D,"Opal")["$coerce_to!"](B,d(D,"String"),"to_str").$to_s();var O;"\n"===B?O=this.replace(/\r?\n?$/,""):""===B?O=this.replace(/(\r?\n)+$/,""):this.length>=B.length&&this.substr(this.length-B.length,B.length)===B&&(O=this.substr(0,this.length-B.length));return null!=O?this.$$cast(O):this},Ma.$$arity=-1);a.def(L,"$chop",na=function(){var B=this.length;B=1>=B?"":"\n"===this.charAt(B-1)&&"\r"===this.charAt(B-2)?this.substr(0,B-2):this.substr(0,
B-1);return this.$$cast(B)},na.$$arity=0);a.def(L,"$chr",S=function(){return this.charAt(0)},S.$$arity=0);a.def(L,"$clone",sa=function(){var B=new String(this);B.$copy_singleton_methods(this);B.$initialize_clone(this);return B},sa.$$arity=0);a.def(L,"$dup",ya=function(){var B=new String(this);B.$initialize_dup(this);return B},ya.$$arity=0);a.def(L,"$count",pa=function(B){var O=a.slice.call(arguments,0,arguments.length);0===O.length&&this.$raise(d(D,"ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");
O=n(O);return null===O?0:this.length-this.replace(new RegExp(O,"g"),"").length},pa.$$arity=-1);a.def(L,"$delete",fa=function(B){var O=a.slice.call(arguments,0,arguments.length);0===O.length&&this.$raise(d(D,"ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");O=n(O);return null===O?this:this.$$cast(this.replace(new RegExp(O,"g"),""))},fa.$$arity=-1);a.def(L,"$delete_prefix",F=function(B){B.$$is_string||(B=H(B,d(D,"String"),"to_str"));return this.slice(0,B.length)===B?this.$$cast(this.slice(B.length)):
this},F.$$arity=1);a.def(L,"$delete_suffix",T=function(B){B.$$is_string||(B=H(B,d(D,"String"),"to_str"));return this.slice(this.length-B.length)===B?this.$$cast(this.slice(0,this.length-B.length)):this},T.$$arity=1);a.def(L,"$downcase",ja=function(){return this.$$cast(this.toLowerCase())},ja.$$arity=0);a.def(L,"$each_char",va=function(){var B=va.$$p,O=B||z,ra;B&&(va.$$p=null);B&&(va.$$p=null);if(O===z)return u(this,"enum_for",["each_char"],(ra=function(){return(null==ra.$$s?this:ra.$$s).$size()},
ra.$$s=this,ra.$$arity=0,ra));B=0;for(var Ia=this.length;B<Ia;B++)a.yield1(O,this.charAt(B));return this},va.$$arity=0);a.def(L,"$each_line",ea=function(B){var O=ea.$$p,ra=O||z;null==c["/"]&&(c["/"]=z);O&&(ea.$$p=null);O&&(ea.$$p=null);null==B&&(B=c["/"]);if(ra===z)return this.$enum_for("each_line",B);if(B===z)return a.yield1(ra,this),this;B=H(B,d(D,"String"),"to_str");var Ia,Ea;if(0===B.length){B=this.split(/(\n{2,})/);O=0;for(Ia=B.length;O<Ia;O+=2)(B[O]||B[O+1])&&a.yield1(ra,this.$$cast((B[O]||
"")+(B[O+1]||"")));return this}O=this.$chomp(B);Ia=this.length!=O.length;var Ka=O.split(B);O=0;for(Ea=Ka.length;O<Ea;O++)O<Ea-1||Ia?a.yield1(ra,this.$$cast(Ka[O]+B)):a.yield1(ra,this.$$cast(Ka[O]));return this},ea.$$arity=-1);a.def(L,"$empty?",wa=function(){return 0===this.length},wa.$$arity=0);a.def(L,"$end_with?",Ga=function(B){var O=a.slice.call(arguments,0,arguments.length);for(var ra=0,Ia=O.length;ra<Ia;ra++){var Ea=H(O[ra],d(D,"String"),"to_str").$to_s();if(this.length>=Ea.length&&this.substr(this.length-
Ea.length,Ea.length)==Ea)return!0}return!1},Ga.$$arity=-1);a.alias(L,"equal?","===");a.def(L,"$gsub",Fa=function(B,O){var ra=Fa.$$p,Ia=ra||z,Ea=this;ra&&(Fa.$$p=null);ra&&(Fa.$$p=null);if(void 0===O&&Ia===z)return Ea.$enum_for("gsub",B);ra="";var Ka=z,Va=0;B.$$is_regexp?B=a.global_multiline_regexp(B):(B=H(B,d(D,"String"),"to_str"),B=new RegExp(B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var hb;;){var eb=B.exec(Ea);if(null===eb){c["~"]=z;ra+=Ea.slice(Va);break}Ka=d(D,"MatchData").$new(B,eb);
if(void 0===O){hb=B.lastIndex;var Ua=Ia(eb[0]);B.lastIndex=hb}else O.$$is_hash?Ua=O["$[]"](eb[0]).$to_s():(O.$$is_string||(O=H(O,d(D,"String"),"to_str")),Ua=O.replace(/([\\]+)([0-9+&`'])/g,function(Xa,gb,qb){if(0===gb.length%2)return Xa;switch(qb){case "+":for(Xa=eb.length-1;0<Xa;Xa--)if(void 0!==eb[Xa])return gb.slice(1)+eb[Xa];return"";case "&":return gb.slice(1)+eb[0];case "`":return gb.slice(1)+Ea.slice(0,eb.index);case "'":return gb.slice(1)+Ea.slice(eb.index+eb[0].length);default:return gb.slice(1)+
(eb[qb]||"")}}).replace(/\\\\/g,"\\"));B.lastIndex===eb.index?(ra+=Ea.slice(Va,eb.index)+Ua+(Ea[eb.index]||""),B.lastIndex+=1):ra+=Ea.slice(Va,eb.index)+Ua;Va=B.lastIndex}c["~"]=Ka;return Ea.$$cast(ra)},Fa.$$arity=-2);a.def(L,"$hash",Ra=function(){return this.toString()},Ra.$$arity=0);a.def(L,"$hex",Ta=function(){return this.$to_i(16)},Ta.$$arity=0);a.def(L,"$include?",Ja=function(B){B.$$is_string||(B=H(B,d(D,"String"),"to_str"));return-1!==this.indexOf(B)},Ja.$$arity=1);a.def(L,"$index",kb=function(B,
O){var ra;if(void 0===O)O=0;else if(O=H(O,d(D,"Integer"),"to_int"),0>O&&(O+=this.length,0>O))return z;if(B.$$is_regexp)for(ra=a.global_multiline_regexp(B);;){B=ra.exec(this);if(null===B){c["~"]=z;O=-1;break}if(B.index>=O){c["~"]=d(D,"MatchData").$new(ra,B);O=B.index;break}ra.lastIndex=B.index+1}else B=H(B,d(D,"String"),"to_str"),O=0===B.length&&O>this.length?-1:this.indexOf(B,O);return-1===O?z:O},kb.$$arity=-2);a.def(L,"$inspect",jb=function(){var B={"\u0007":"\\a","\u001b":"\\e","\b":"\\b","\t":"\\t",
"\n":"\\n","\f":"\\f","\r":"\\r","\x0B":"\\v",'"':'\\"',"\\":"\\\\"};return'"'+this.replace(/[\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,function(O){return B[O]||"\\u"+("0000"+O.charCodeAt(0).toString(16).toUpperCase()).slice(-4)}).replace(/#[\$@\{]/g,"\\$&")+'"'},jb.$$arity=0);a.def(L,"$intern",W=function(){return this.toString()},W.$$arity=0);a.def(L,"$lines",za=function(B){var O=za.$$p,ra=O||z;null==c["/"]&&(c["/"]=z);O&&
(za.$$p=null);O&&(za.$$p=null);null==B&&(B=c["/"]);B=u(this,"each_line",[B],ra.$to_proc());return m(ra)?this:B.$to_a()},za.$$arity=-1);a.def(L,"$length",Ca=function(){return this.length},Ca.$$arity=0);a.def(L,"$ljust",Aa=function(B,O){null==O&&(O=" ");B=H(B,d(D,"Integer"),"to_int");O=H(O,d(D,"String"),"to_str").$to_s();m(O["$empty?"]())&&this.$raise(d(D,"ArgumentError"),"zero width padding");if(m(B<=this.length))return this;var ra=-1,Ia="";for(B-=this.length;++ra<B;)Ia+=O;return this.$$cast(this+
Ia.slice(0,B))},Aa.$$arity=-2);a.def(L,"$lstrip",bb=function(){return this.replace(/^\s*/,"")},bb.$$arity=0);a.def(L,"$ascii_only?",db=function(){return this.$encoding()["$=="](p(d(D,"Encoding"),"UTF_16BE"))?!1:/^[\x00-\x7F]*$/.test(this)},db.$$arity=0);a.def(L,"$match",ab=function(B,O){var ra=ab.$$p,Ia=ra||z,Ea=z;ra&&(ab.$$p=null);ra&&(ab.$$p=null);m(m(Ea=d(D,"String")["$==="](B))?Ea:B["$respond_to?"]("to_str"))&&(B=d(D,"Regexp").$new(B.$to_str()));m(d(D,"Regexp")["$==="](B))||this.$raise(d(D,"TypeError"),
"wrong argument type "+B.$class()+" (expected Regexp)");return u(B,"match",[this,O],Ia.$to_proc())},ab.$$arity=-2);a.def(L,"$match?",Wa=function(B,O){var ra=z;m(m(ra=d(D,"String")["$==="](B))?ra:B["$respond_to?"]("to_str"))&&(B=d(D,"Regexp").$new(B.$to_str()));m(d(D,"Regexp")["$==="](B))||this.$raise(d(D,"TypeError"),"wrong argument type "+B.$class()+" (expected Regexp)");return B["$match?"](this,O)},Wa.$$arity=-2);a.def(L,"$next",Ba=function(){var B=this.length;if(0===B)return this.$$cast("");for(var O=
this,ra=this.search(/[a-zA-Z0-9]/),Ia,Ea;B--;){Ea=this.charCodeAt(B);if(48<=Ea&&57>=Ea||65<=Ea&&90>=Ea||97<=Ea&&122>=Ea)switch(Ea){case 57:Ia=!0;Ea=48;break;case 90:Ia=!0;Ea=65;break;case 122:Ia=!0;Ea=97;break;default:Ia=!1,Ea+=1}else-1===ra?255===Ea?(Ia=!0,Ea=0):(Ia=!1,Ea+=1):Ia=!0;O=O.slice(0,B)+String.fromCharCode(Ea)+O.slice(B+1);if(Ia&&(0===B||B===ra)){switch(Ea){case 65:break;case 97:break;default:Ea+=1}O=0===B?String.fromCharCode(Ea)+O:O.slice(0,B)+String.fromCharCode(Ea)+O.slice(B);Ia=!1}if(!Ia)break}return this.$$cast(O)},
Ba.$$arity=0);a.def(L,"$oct",ta=function(){var B=this;var O=8;if(/^\s*_/.test(B))return 0;B=B.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(ra,Ia,Ea,Ka){switch(Ka.charAt(0)){case "+":case "-":return ra;case "0":if("x"===Ka.charAt(1)&&"0x"===Ea)return ra}switch(Ea){case "0b":O=2;break;case "0":case "0o":O=8;break;case "0d":O=10;break;case "0x":O=16}return Ia+Ka});B=parseInt(B.replace(/_(?!_)/g,""),O);return isNaN(B)?0:B},ta.$$arity=0);a.def(L,"$ord",Na=function(){return this.charCodeAt(0)},Na.$$arity=
0);a.def(L,"$partition",Sa=function(B){if(B.$$is_regexp){var O=B.exec(this);null===O?O=-1:(d(D,"MatchData").$new(B,O),B=O[0],O=O.index)}else B=H(B,d(D,"String"),"to_str"),O=this.indexOf(B);return-1===O?[this,"",""]:[this.slice(0,O),this.slice(O,O+B.length),this.slice(O+B.length)]},Sa.$$arity=1);a.def(L,"$reverse",Ya=function(){return this.split("").reverse().join("")},Ya.$$arity=0);a.def(L,"$rindex",Ha=function(B,O){if(void 0===O)O=this.length;else if(O=H(O,d(D,"Integer"),"to_int"),0>O&&(O+=this.length,
0>O))return z;if(B.$$is_regexp){var ra=null;for(B=a.global_multiline_regexp(B);;){var Ia=B.exec(this);if(null===Ia||Ia.index>O)break;ra=Ia;B.lastIndex=ra.index+1}null===ra?(c["~"]=z,O=-1):(d(D,"MatchData").$new(B,ra),O=ra.index)}else B=H(B,d(D,"String"),"to_str"),O=this.lastIndexOf(B,O);return-1===O?z:O},Ha.$$arity=-2);a.def(L,"$rjust",Y=function(B,O){null==O&&(O=" ");B=H(B,d(D,"Integer"),"to_int");O=H(O,d(D,"String"),"to_str").$to_s();m(O["$empty?"]())&&this.$raise(d(D,"ArgumentError"),"zero width padding");
if(m(B<=this.length))return this;B=Math.floor(B-this.length);var ra=Array(Math.floor(B/O.length)+1).join(O);return this.$$cast(ra+O.slice(0,B-ra.length)+this)},Y.$$arity=-2);a.def(L,"$rpartition",Q=function(B){var O;if(B.$$is_regexp){var ra=null;for(O=a.global_multiline_regexp(B);;){var Ia=O.exec(this);if(null===Ia)break;ra=Ia;O.lastIndex=ra.index+1}null===ra?ra=-1:(d(D,"MatchData").$new(O,ra),B=ra[0],ra=ra.index)}else B=H(B,d(D,"String"),"to_str"),ra=this.lastIndexOf(B);return-1===ra?["","",this]:
[this.slice(0,ra),this.slice(ra,ra+B.length),this.slice(ra+B.length)]},Q.$$arity=1);a.def(L,"$rstrip",Z=function(){return this.replace(/[\s\u0000]*$/,"")},Z.$$arity=0);a.def(L,"$scan",U=function(B){var O=U.$$p,ra=O||z;O&&(U.$$p=null);O&&(U.$$p=null);O=[];var Ia=z,Ea;B.$$is_regexp?B=a.global_multiline_regexp(B):(B=H(B,d(D,"String"),"to_str"),B=new RegExp(B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(;null!=(Ea=B.exec(this));)Ia=d(D,"MatchData").$new(B,Ea),ra===z?1==Ea.length?O.push(Ea[0]):O.push(Ia.$captures()):
1==Ea.length?ra(Ea[0]):ra.call(this,Ia.$captures()),B.lastIndex===Ea.index&&(B.lastIndex+=1);c["~"]=Ia;return ra!==z?this:O},U.$$arity=1);a.alias(L,"size","length");a.alias(L,"slice","[]");a.def(L,"$split",ha=function(B,O){function ra(){for(hb=0;hb<Ka.length;hb++)Ka[hb]=Ia.$$cast(Ka[hb])}var Ia=this,Ea=z;null==c[";"]&&(c[";"]=z);if(0===Ia.length)return[];if(void 0===O)O=0;else if(O=d(D,"Opal")["$coerce_to!"](O,d(D,"Integer"),"to_int"),1===O)return[Ia];if(void 0===B||B===z)B=m(Ea=c[";"])?Ea:" ";var Ka=
[];Ea=Ia.toString();var Va=0,hb;B.$$is_regexp?B=a.global_multiline_regexp(B):(B=H(B,d(D,"String"),"to_str").$to_s()," "===B?(B=/\s+/gm,Ea=Ea.replace(/^\s+/,"")):B=new RegExp(B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));Ka=Ea.split(B);if(1===Ka.length&&Ka[0]===Ea)return[Ia.$$cast(Ka[0])];for(;-1!==(hb=Ka.indexOf(void 0));)Ka.splice(hb,1);if(0===O){for(;""===Ka[Ka.length-1];)--Ka.length;ra();return Ka}var eb=B.exec(Ea);if(0>O){if(null!==eb&&""===eb[0]&&-1===B.source.indexOf("(?="))for(hb=0,B=eb.length;hb<
B;hb++)Ka.push("");ra();return Ka}if(null!==eb&&""===eb[0])return Ka.splice(O-1,Ka.length-1,Ka.slice(O-1).join("")),ra(),Ka;if(O>=Ka.length)return ra(),Ka;for(hb=0;null!==eb;){hb++;Va=B.lastIndex;if(hb+1===O)break;eb=B.exec(Ea)}Ka.splice(O-1,Ka.length-1,Ea.slice(Va));ra();return Ka},ha.$$arity=-1);a.def(L,"$squeeze",la=function(B){var O=a.slice.call(arguments,0,arguments.length);if(0===O.length)return this.$$cast(this.replace(/(.)\1+/g,"$1"));O=n(O);return null===O?this:this.$$cast(this.replace(new RegExp("("+
O+")\\1+","g"),"$1"))},la.$$arity=-1);a.def(L,"$start_with?",g=function(B){var O=a.slice.call(arguments,0,arguments.length);for(var ra=0,Ia=O.length;ra<Ia;ra++){var Ea=H(O[ra],d(D,"String"),"to_str").$to_s();if(0===this.indexOf(Ea))return!0}return!1},g.$$arity=-1);a.def(L,"$strip",C=function(){return this.replace(/^\s*/,"").replace(/[\s\u0000]*$/,"")},C.$$arity=0);a.def(L,"$sub",N=function(B,O){var ra=N.$$p,Ia=ra||z,Ea=this;ra&&(N.$$p=null);ra&&(N.$$p=null);B.$$is_regexp||(B=H(B,d(D,"String"),"to_str"),
B=new RegExp(B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var Ka=B.exec(Ea);null===Ka?(c["~"]=z,B=Ea.toString()):(d(D,"MatchData").$new(B,Ka),void 0===O?(Ia===z&&Ea.$raise(d(D,"ArgumentError"),"wrong number of arguments (1 for 2)"),B=Ea.slice(0,Ka.index)+Ia(Ka[0])+Ea.slice(Ka.index+Ka[0].length)):O.$$is_hash?B=Ea.slice(0,Ka.index)+O["$[]"](Ka[0]).$to_s()+Ea.slice(Ka.index+Ka[0].length):(O=H(O,d(D,"String"),"to_str"),O=O.replace(/([\\]+)([0-9+&`'])/g,function(Va,hb,eb){if(0===hb.length%2)return Va;switch(eb){case "+":for(Va=
Ka.length-1;0<Va;Va--)if(void 0!==Ka[Va])return hb.slice(1)+Ka[Va];return"";case "&":return hb.slice(1)+Ka[0];case "`":return hb.slice(1)+Ea.slice(0,Ka.index);case "'":return hb.slice(1)+Ea.slice(Ka.index+Ka[0].length);default:return hb.slice(1)+(Ka[eb]||"")}}).replace(/\\\\/g,"\\"),B=Ea.slice(0,Ka.index)+O+Ea.slice(Ka.index+Ka[0].length)));return Ea.$$cast(B)},N.$$arity=-2);a.alias(L,"succ","next");a.def(L,"$sum",aa=function(B){null==B&&(B=16);B=H(B,d(D,"Integer"),"to_int");for(var O=0,ra=this.length,
Ia=0;Ia<ra;Ia++)O+=this.charCodeAt(Ia);return 0>=B?O:O&Math.pow(2,B)-1},aa.$$arity=-1);a.def(L,"$swapcase",v=function(){var B=this.replace(/([a-z]+)|([A-Z]+)/g,function(O,ra){return ra?O.toUpperCase():O.toLowerCase()});return this.constructor===String?B:this.$class().$new(B)},v.$$arity=0);a.def(L,"$to_f",V=function(){if("_"===this.charAt(0))return 0;var B=parseFloat(this.replace(/_/g,""));return isNaN(B)||Infinity==B||-Infinity==B?0:B},V.$$arity=0);a.def(L,"$to_i",oa=function(B){null==B&&(B=10);var O=
this.toLowerCase(),ra=H(B,d(D,"Integer"),"to_int");(1===ra||0>ra||36<ra)&&this.$raise(d(D,"ArgumentError"),"invalid radix "+ra);if(/^\s*_/.test(O))return 0;O=O.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(Ia,Ea,Ka,Va){switch(Va.charAt(0)){case "+":case "-":return Ia;case "0":if("x"===Va.charAt(1)&&"0x"===Ka&&(0===ra||16===ra))return Ia}switch(Ka){case "0b":if(0===ra||2===ra)return ra=2,Ea+Va;break;case "0":case "0o":if(0===ra||8===ra)return ra=8,Ea+Va;break;case "0d":if(0===ra||10===ra)return ra=
10,Ea+Va;break;case "0x":if(0===ra||16===ra)return ra=16,Ea+Va}return Ia});B=parseInt(O.replace(/_(?!_)/g,""),ra);return isNaN(B)?0:B},oa.$$arity=-1);a.def(L,"$to_proc",La=function(){var B,O=z;La.$$p&&(La.$$p=null);O=J("$",this.valueOf());return u(this,"proc",[],(B=function(ra){var Ia=null==B.$$s?this:B.$$s,Ea=B.$$p,Ka=Ea||z;Ea&&(B.$$p=null);Ea=a.slice.call(arguments,0,arguments.length);0===Ea.length&&Ia.$raise(d(D,"ArgumentError"),"no receiver given");Ia=Ea[0];null==Ia&&(Ia=z);var Va=Ia[O];if(!Va)return Ia.$method_missing.apply(Ia,
Ea);"function"===typeof Ka&&(Va.$$p=Ka);return 1===Ea.length?Va.call(Ia):Va.apply(Ia,Ea.slice(1))},B.$$s=this,B.$$arity=-1,B))},La.$$arity=0);a.def(L,"$to_s",ib=function(){return this.toString()},ib.$$arity=0);a.alias(L,"to_str","to_s");a.alias(L,"to_sym","intern");a.def(L,"$tr",ob=function(B,O){B=H(B,d(D,"String"),"to_str").$to_s();O=H(O,d(D,"String"),"to_str").$to_s();if(0==B.length||B===O)return this;var ra={};var Ia=B.split("");var Ea=Ia.length,Ka=O.split(""),Va=Ka.length;B=!1;var hb=null;"^"===
Ia[0]&&1<Ia.length&&(B=!0,Ia.shift(),hb=Ka[Va-1],--Ea);var eb=[];var Ua=null;var Xa=!1;for(O=0;O<Ea;O++){var gb=Ia[O];if(null==Ua)Ua=gb,eb.push(gb);else if("-"===gb)"-"===Ua?(eb.push("-"),eb.push("-")):O==Ea-1?eb.push("-"):Xa=!0;else if(Xa){Ua=Ua.charCodeAt(0);Xa=gb.charCodeAt(0);Ua>Xa&&this.$raise(d(D,"ArgumentError"),'invalid range "'+String.fromCharCode(Ua)+"-"+String.fromCharCode(Xa)+'" in string transliteration');for(Ua+=1;Ua<Xa;Ua++)eb.push(String.fromCharCode(Ua));eb.push(gb);Ua=Xa=null}else eb.push(gb)}Ia=
eb;Ea=Ia.length;if(B)for(O=0;O<Ea;O++)ra[Ia[O]]=!0;else{if(0<Va){eb=[];Ua=null;Xa=!1;for(O=0;O<Va;O++)if(gb=Ka[O],null==Ua)Ua=gb,eb.push(gb);else if("-"===gb)"-"===Ua?(eb.push("-"),eb.push("-")):O==Va-1?eb.push("-"):Xa=!0;else if(Xa){Ua=Ua.charCodeAt(0);Xa=gb.charCodeAt(0);Ua>Xa&&this.$raise(d(D,"ArgumentError"),'invalid range "'+String.fromCharCode(Ua)+"-"+String.fromCharCode(Xa)+'" in string transliteration');for(Ua+=1;Ua<Xa;Ua++)eb.push(String.fromCharCode(Ua));eb.push(gb);Ua=Xa=null}else eb.push(gb);
Ka=eb;Va=Ka.length}gb=Ea-Va;if(0<gb)for(Va=0<Va?Ka[Va-1]:"",O=0;O<gb;O++)Ka.push(Va);for(O=0;O<Ea;O++)ra[Ia[O]]=Ka[O]}Ea="";O=0;for(Ia=this.length;O<Ia;O++)gb=this.charAt(O),Ka=ra[gb],Ea=B?Ea+(null==Ka?hb:gb):Ea+(null!=Ka?Ka:gb);return this.$$cast(Ea)},ob.$$arity=2);a.def(L,"$tr_s",mb=function(B,O){B=H(B,d(D,"String"),"to_str").$to_s();O=H(O,d(D,"String"),"to_str").$to_s();if(0==B.length)return this;var ra={};var Ia=B.split("");var Ea=Ia.length,Ka=O.split(""),Va=Ka.length;B=!1;var hb=null;"^"===Ia[0]&&
1<Ia.length&&(B=!0,Ia.shift(),hb=Ka[Va-1],--Ea);var eb=[];var Ua=null;var Xa=!1;for(O=0;O<Ea;O++){var gb=Ia[O];if(null==Ua)Ua=gb,eb.push(gb);else if("-"===gb)"-"===Ua?(eb.push("-"),eb.push("-")):O==Ea-1?eb.push("-"):Xa=!0;else if(Xa){Ua=Ua.charCodeAt(0);Xa=gb.charCodeAt(0);Ua>Xa&&this.$raise(d(D,"ArgumentError"),'invalid range "'+String.fromCharCode(Ua)+"-"+String.fromCharCode(Xa)+'" in string transliteration');for(Ua+=1;Ua<Xa;Ua++)eb.push(String.fromCharCode(Ua));eb.push(gb);Ua=Xa=null}else eb.push(gb)}Ia=
eb;Ea=Ia.length;if(B)for(O=0;O<Ea;O++)ra[Ia[O]]=!0;else{if(0<Va){eb=[];Xa=!1;for(O=0;O<Va;O++)if(gb=Ka[O],null==Ua)Ua=gb,eb.push(gb);else if("-"===gb)O==Va-1?eb.push("-"):Xa=!0;else if(Xa){Ua=Ua.charCodeAt(0);Xa=gb.charCodeAt(0);Ua>Xa&&this.$raise(d(D,"ArgumentError"),'invalid range "'+String.fromCharCode(Ua)+"-"+String.fromCharCode(Xa)+'" in string transliteration');for(Ua+=1;Ua<Xa;Ua++)eb.push(String.fromCharCode(Ua));eb.push(gb);Ua=Xa=null}else eb.push(gb);Ka=eb;Va=Ka.length}gb=Ea-Va;if(0<gb)for(Va=
0<Va?Ka[Va-1]:"",O=0;O<gb;O++)Ka.push(Va);for(O=0;O<Ea;O++)ra[Ia[O]]=Ka[O]}Ea="";Ka=null;O=0;for(Ia=this.length;O<Ia;O++)if(gb=this.charAt(O),Va=ra[gb],B)null==Va?null==Ka&&(Ea+=hb,Ka=!0):(Ea+=gb,Ka=null);else if(null!=Va){if(null==Ka||Ka!==Va)Ea+=Va,Ka=Va}else Ea+=gb,Ka=null;return this.$$cast(Ea)},mb.$$arity=2);a.def(L,"$upcase",sb=function(){return this.$$cast(this.toUpperCase())},sb.$$arity=0);a.def(L,"$upto",tb=function(B,O){var ra=tb.$$p,Ia=ra||z;ra&&(tb.$$p=null);ra&&(tb.$$p=null);null==O&&
(O=!1);if(Ia===z)return this.$enum_for("upto",B,O);ra=this.toString();B=H(B,d(D,"String"),"to_str");if(1===ra.length&&1===B.length)for(ra=ra.charCodeAt(0),B=B.charCodeAt(0);ra<=B&&(!O||ra!==B);)Ia(String.fromCharCode(ra)),ra+=1;else if(parseInt(ra,10).toString()===ra&&parseInt(B,10).toString()===B)for(ra=parseInt(ra,10),B=parseInt(B,10);ra<=B&&(!O||ra!==B);)Ia(ra.toString()),ra+=1;else for(;ra.length<=B.length&&ra<=B&&(!O||ra!==B);)Ia(ra),ra=ra.$succ();return this},tb.$$arity=-2);a.def(L,"$instance_variables",
wb=function(){return[]},wb.$$arity=0);a.defs(L,"$_load",xb=function(B){var O=a.slice.call(arguments,0,arguments.length);return u(this,"new",a.to_a(O))},xb.$$arity=-1);a.def(L,"$unicode_normalize",ub=function(B){null==B&&(B="nfc");m(["nfc","nfd","nfkc","nfkd"]["$include?"](B))||this.$raise(d(D,"ArgumentError"),"Invalid normalization form "+B);return this.normalize(B.$upcase())},ub.$$arity=-1);a.def(L,"$unicode_normalized?",X=function(B){null==B&&(B="nfc");return this.$unicode_normalize(B)["$=="](this)},
X.$$arity=-1);a.def(L,"$unpack",Oa=function(){return this.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")},Oa.$$arity=1);return(a.def(L,"$unpack1",cb=function(){return this.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")},cb.$$arity=1),z)&&"unpack1"})(w[0],String,w);return a.const_set(w[0],"Symbol",d(w,"String"))};
Opal.modules["corelib/enumerable"]=function(a){function y(e,n){return"number"===typeof e&&"number"===typeof n?e>n:e["$>"](n)}function J(e,n){return"number"===typeof e&&"number"===typeof n?e+n:e["$+"](n)}function t(e,n){return"number"===typeof e&&"number"===typeof n?e-n:e["$-"](n)}function w(e,n){return"number"===typeof e&&"number"===typeof n?e<=n:e["$<="](n)}var z=[],p=a.nil,d=a.$$$,H=a.$$,x=a.falsy,l=a.truthy,m=a.coerce_to,u=a.module,c=a.send,k=a.hash2,I=a.lambda;a.add_stubs("$each $public_send $destructure $to_enum $enumerator_size $new $yield $raise $slice_when $! $enum_for $flatten $map $warn $proc $== $nil? $respond_to? $coerce_to! $> $* $try_convert $< $+ $- $ceil $/ $size $select $to_proc $__send__ $length $<= $[] $push $<< $[]= $=== $inspect $<=> $first $reverse $sort $take $sort_by $compare $call $dup $to_a $sort! $map! $key? $values $transform_values $group_by $to_h $coerce_to? $class $zip".split(" "));
return function(e,n){function L(Y){0===Y.length&&(Y=[p]);1<Y.length&&(Y=[Y]);return Y}e=u(e,"Enumerable");var D=[e].concat(n),R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za,Ca,Aa,bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha;a.def(e,"$all?",R=function(Y){try{var Q=R.$$p,Z=Q||p,U,ha,la;Q&&(R.$$p=null);Q&&(R.$$p=null);l(void 0!==Y)?c(this,"each",[],(U=function(g){var C=a.slice.call(arguments,0,arguments.length);C=L(C);if(l(c(Y,"public_send",["==="].concat(a.to_a(C)))))return p;
a.ret(!1)},U.$$s=this,U.$$arity=-1,U)):Z!==p?c(this,"each",[],(ha=function(g){var C=a.slice.call(arguments,0,arguments.length);if(l(a.yieldX(Z,a.to_a(C))))return p;a.ret(!1)},ha.$$s=this,ha.$$arity=-1,ha)):c(this,"each",[],(la=function(g){var C=a.slice.call(arguments,0,arguments.length);if(l(H(D,"Opal").$destructure(C)))return p;a.ret(!1)},la.$$s=this,la.$$arity=-1,la));return!0}catch(g){if(g===a.returner)return g.$v;throw g;}},R.$$arity=-1);a.def(e,"$any?",ka=function(Y){try{var Q=ka.$$p,Z=Q||p,
U,ha,la;Q&&(ka.$$p=null);Q&&(ka.$$p=null);l(void 0!==Y)?c(this,"each",[],(U=function(g){var C=a.slice.call(arguments,0,arguments.length);C=L(C);if(l(c(Y,"public_send",["==="].concat(a.to_a(C)))))a.ret(!0);else return p},U.$$s=this,U.$$arity=-1,U)):Z!==p?c(this,"each",[],(ha=function(g){var C=a.slice.call(arguments,0,arguments.length);if(l(a.yieldX(Z,a.to_a(C))))a.ret(!0);else return p},ha.$$s=this,ha.$$arity=-1,ha)):c(this,"each",[],(la=function(g){var C=a.slice.call(arguments,0,arguments.length);
if(l(H(D,"Opal").$destructure(C)))a.ret(!0);else return p},la.$$s=this,la.$$arity=-1,la));return!1}catch(g){if(g===a.returner)return g.$v;throw g;}},ka.$$arity=-1);a.def(e,"$chunk",da=function(){var Y=da.$$p,Q=Y||p,Z,U;Y&&(da.$$p=null);Y&&(da.$$p=null);return Q===p?c(this,"to_enum",["chunk"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z)):c(d("::","Enumerator"),"new",[],(U=function(ha){function la(){0<N.length&&ha.$yield(C,N)}var g=null==U.$$s?this:U.$$s;
null==ha&&(ha=p);var C=p,N=[];g.$each.$$p=function(aa){var v=a.yield1(Q,aa);v===p?(la(),N=[],C=p):(C===p||C===v?N.push(aa):(la(),N=[aa]),C=v)};g.$each();la()},U.$$s=this,U.$$arity=1,U))},da.$$arity=0);a.def(e,"$chunk_while",ma=function(){var Y=ma.$$p,Q=Y||p,Z;Y&&(ma.$$p=null);Y&&(ma.$$p=null);Q===p&&this.$raise(H(D,"ArgumentError"),"no block given");return c(this,"slice_when",[],(Z=function(U,ha){null==U&&(U=p);null==ha&&(ha=p);return a.yieldX(Q,[U,ha])["$!"]()},Z.$$s=this,Z.$$arity=2,Z))},ma.$$arity=
0);a.def(e,"$collect",b=function(){var Y=b.$$p,Q=Y||p,Z;Y&&(b.$$p=null);Y&&(b.$$p=null);if(Q===p)return c(this,"enum_for",["collect"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z));var U=[];this.$each.$$p=function(){var ha=a.yieldX(Q,arguments);U.push(ha)};this.$each();return U},b.$$arity=0);a.def(e,"$collect_concat",h=function(){var Y=h.$$p,Q=Y||p,Z,U;Y&&(h.$$p=null);Y&&(h.$$p=null);return Q===p?c(this,"enum_for",["collect_concat"],(Z=function(){return(null==
Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z)):c(this,"map",[],(U=function(ha){null==ha&&(ha=p);return a.yield1(Q,ha)},U.$$s=this,U.$$arity=1,U)).$flatten(1)},h.$$arity=0);a.def(e,"$count",f=function(Y){var Q=f.$$p,Z=Q||p,U,ha,la,g=p;Q&&(f.$$p=null);Q&&(f.$$p=null);g=0;null!=Y&&Z!==p&&this.$warn("warning: given block not used");l(null!=Y)?Z=c(this,"proc",[],(U=function(C){var N=a.slice.call(arguments,0,arguments.length);return H(D,"Opal").$destructure(N)["$=="](Y)},U.$$s=this,U.$$arity=
-1,U)):l(Z["$nil?"]())&&(Z=c(this,"proc",[],(ha=function(){return!0},ha.$$s=this,ha.$$arity=0,ha)));c(this,"each",[],(la=function(C){var N=a.slice.call(arguments,0,arguments.length);return l(a.yieldX(Z,N))?g++:p},la.$$s=this,la.$$arity=-1,la));return g},f.$$arity=-1);a.def(e,"$cycle",q=function(Y){var Q=q.$$p,Z=Q||p,U;Q&&(q.$$p=null);Q&&(q.$$p=null);null==Y&&(Y=p);if(Z===p)return c(this,"enum_for",["cycle",Y],(U=function(){var g=null==U.$$s?this:U.$$s;if(l(Y["$nil?"]()))return l(g["$respond_to?"]("size"))?
d(H(D,"Float"),"INFINITY"):p;Y=H(D,"Opal")["$coerce_to!"](Y,H(D,"Integer"),"to_int");return l(y(Y,0))?(g=g.$enumerator_size(),"number"===typeof g&&"number"===typeof Y?g*Y:g["$*"](Y)):0},U.$$s=this,U.$$arity=0,U));if(!l(Y["$nil?"]())&&(Y=H(D,"Opal")["$coerce_to!"](Y,H(D,"Integer"),"to_int"),l(0>=Y)))return p;var ha=[],la;this.$each.$$p=function(){var g=H(D,"Opal").$destructure(arguments);a.yield1(Z,g);ha.push(g)};this.$each();if(0===ha.length)return p;if(Y===p)for(;;)for(Q=0,la=ha.length;Q<la;Q++)a.yield1(Z,
ha[Q]);else for(;1<Y;){Q=0;for(la=ha.length;Q<la;Q++)a.yield1(Z,ha[Q]);Y--}},q.$$arity=-1);a.def(e,"$detect",A=function(Y){try{var Q=A.$$p,Z=Q||p,U;Q&&(A.$$p=null);Q&&(A.$$p=null);if(Z===p)return this.$enum_for("detect",Y);c(this,"each",[],(U=function(ha){var la=a.slice.call(arguments,0,arguments.length);la=H(D,"Opal").$destructure(la);if(l(a.yield1(Z,la)))a.ret(la);else return p},U.$$s=this,U.$$arity=-1,U));return void 0!==Y?"function"===typeof Y?Y():Y:p}catch(ha){if(ha===a.returner)return ha.$v;
throw ha;}},A.$$arity=-1);a.def(e,"$drop",E=function(Y){Y=m(Y,H(D,"Integer"),"to_int");l(0>Y)&&this.$raise(H(D,"ArgumentError"),"attempt to drop negative size");var Q=[],Z=0;this.$each.$$p=function(){Y<=Z&&Q.push(H(D,"Opal").$destructure(arguments));Z++};this.$each();return Q},E.$$arity=1);a.def(e,"$drop_while",G=function(){var Y=G.$$p,Q=Y||p;Y&&(G.$$p=null);Y&&(G.$$p=null);if(Q===p)return this.$enum_for("drop_while");var Z=[],U=!0;this.$each.$$p=function(){var ha=H(D,"Opal").$destructure(arguments);
if(U){var la=a.yield1(Q,ha);x(la)&&(U=!1,Z.push(ha))}else Z.push(ha)};this.$each();return Z},G.$$arity=0);a.def(e,"$each_cons",M=function(Y){var Q=M.$$p,Z=Q||p,U;Q&&(M.$$p=null);Q&&(M.$$p=null);l(1!=arguments.length)&&this.$raise(H(D,"ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)");Y=H(D,"Opal").$try_convert(Y,H(D,"Integer"),"to_int");l(0>=Y)&&this.$raise(H(D,"ArgumentError"),"invalid size");if(Z===p)return c(this,"enum_for",["each_cons",Y],(U=function(){var la=p;var g=(null==
U.$$s?this:U.$$s).$enumerator_size();return l(g["$nil?"]())?p:l(l(la=g["$=="](0))?la:"number"===typeof g&&"number"===typeof Y?g<Y:g["$<"](Y))?0:J(t(g,Y),1)},U.$$s=this,U.$$arity=0,U));var ha=[];this.$each.$$p=function(){var la=H(D,"Opal").$destructure(arguments);ha.push(la);ha.length>Y&&ha.shift();ha.length==Y&&a.yield1(Z,ha.slice(0,Y))};this.$each();return p},M.$$arity=1);a.def(e,"$each_entry",ba=function(Y){var Q=ba.$$p,Z=Q||p,U;Q&&(ba.$$p=null);Q&&(ba.$$p=null);Q=a.slice.call(arguments,0,arguments.length);
if(Z===p)return c(this,"to_enum",["each_entry"].concat(a.to_a(Q)),(U=function(){return(null==U.$$s?this:U.$$s).$enumerator_size()},U.$$s=this,U.$$arity=0,U));this.$each.$$p=function(){var ha=H(D,"Opal").$destructure(arguments);a.yield1(Z,ha)};this.$each.apply(this,Q);return this},ba.$$arity=-1);a.def(e,"$each_slice",ua=function(Y){var Q=ua.$$p,Z=Q||p,U;Q&&(ua.$$p=null);Q&&(ua.$$p=null);Y=m(Y,H(D,"Integer"),"to_int");l(0>=Y)&&this.$raise(H(D,"ArgumentError"),"invalid slice size");if(Z===p)return c(this,
"enum_for",["each_slice",Y],(U=function(){var la=null==U.$$s?this:U.$$s;return l(la["$respond_to?"]("size"))?(la=la.$size(),("number"===typeof la&&"number"===typeof Y?la/Y:la["$/"](Y)).$ceil()):p},U.$$s=this,U.$$arity=0,U));var ha=[];this.$each.$$p=function(){var la=H(D,"Opal").$destructure(arguments);ha.push(la);ha.length===Y&&(a.yield1(Z,ha),ha=[])};this.$each();0<ha.length&&a.yield1(Z,ha);return p},ua.$$arity=1);a.def(e,"$each_with_index",Pa=function(Y){var Q=Pa.$$p,Z=Q||p,U;Q&&(Pa.$$p=null);Q&&
(Pa.$$p=null);Q=a.slice.call(arguments,0,arguments.length);if(Z===p)return c(this,"enum_for",["each_with_index"].concat(a.to_a(Q)),(U=function(){return(null==U.$$s?this:U.$$s).$enumerator_size()},U.$$s=this,U.$$arity=0,U));var ha=0;this.$each.$$p=function(){var la=H(D,"Opal").$destructure(arguments);Z(la,ha);ha++};this.$each.apply(this,Q);return this},Pa.$$arity=-1);a.def(e,"$each_with_object",xa=function(Y){var Q=xa.$$p,Z=Q||p,U;Q&&(xa.$$p=null);Q&&(xa.$$p=null);if(Z===p)return c(this,"enum_for",
["each_with_object",Y],(U=function(){return(null==U.$$s?this:U.$$s).$enumerator_size()},U.$$s=this,U.$$arity=0,U));this.$each.$$p=function(){var ha=H(D,"Opal").$destructure(arguments);Z(ha,Y)};this.$each();return Y},xa.$$arity=1);a.def(e,"$entries",Da=function(Y){var Q=a.slice.call(arguments,0,arguments.length);var Z=[];this.$each.$$p=function(){Z.push(H(D,"Opal").$destructure(arguments))};this.$each.apply(this,Q);return Z},Da.$$arity=-1);a.def(e,"$filter_map",Ma=function(){var Y=Ma.$$p,Q=Y||p,Z;
Y&&(Ma.$$p=null);Y&&(Ma.$$p=null);return Q===p?c(this,"enum_for",["filter_map"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z)):c(c(this,"map",[],Q.$to_proc()),"select",[],"itself".$to_proc())},Ma.$$arity=0);a.alias(e,"find","detect");a.def(e,"$find_all",na=function(){var Y=na.$$p,Q=Y||p,Z;Y&&(na.$$p=null);Y&&(na.$$p=null);if(Q===p)return c(this,"enum_for",["find_all"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=
0,Z));var U=[];this.$each.$$p=function(){var ha=H(D,"Opal").$destructure(arguments),la=a.yield1(Q,ha);l(la)&&U.push(ha)};this.$each();return U},na.$$arity=0);a.alias(e,"filter","find_all");a.def(e,"$find_index",S=function(Y){try{var Q=S.$$p,Z=Q||p,U,ha,la=p;Q&&(S.$$p=null);Q&&(S.$$p=null);if(l(void 0===Y&&Z===p))return this.$enum_for("find_index");null!=Y&&Z!==p&&this.$warn("warning: given block not used");la=0;l(null!=Y)?c(this,"each",[],(U=function(g){var C=a.slice.call(arguments,0,arguments.length);
H(D,"Opal").$destructure(C)["$=="](Y)&&a.ret(la);return la+=1},U.$$s=this,U.$$arity=-1,U)):c(this,"each",[],(ha=function(g){var C=a.slice.call(arguments,0,arguments.length);l(a.yieldX(Z,a.to_a(C)))&&a.ret(la);return la+=1},ha.$$s=this,ha.$$arity=-1,ha));return p}catch(g){if(g===a.returner)return g.$v;throw g;}},S.$$arity=-1);a.def(e,"$first",sa=function(Y){try{var Q,Z,U=p,ha=p;if(l(void 0===Y))return c(this,"each",[],(Q=function(la){null==la&&(la=p);a.ret(la)},Q.$$s=this,Q.$$arity=1,Q));U=[];Y=m(Y,
H(D,"Integer"),"to_int");l(0>Y)&&this.$raise(H(D,"ArgumentError"),"attempt to take negative size");if(l(0==Y))return[];ha=0;c(this,"each",[],(Z=function(la){var g=a.slice.call(arguments,0,arguments.length);U.push(H(D,"Opal").$destructure(g));if(l(Y<=++ha))a.ret(U);else return p},Z.$$s=this,Z.$$arity=-1,Z));return U}catch(la){if(la===a.returner)return la.$v;throw la;}},sa.$$arity=-1);a.alias(e,"flat_map","collect_concat");a.def(e,"$grep",ya=function(Y){var Q=ya.$$p,Z=Q||p,U,ha=p;Q&&(ya.$$p=null);Q&&
(ya.$$p=null);ha=[];c(this,"each",[],(U=function(la){var g=a.slice.call(arguments,0,arguments.length);var C=L(g);if(!l(c(Y,"__send__",["==="].concat(a.to_a(C)))))return p;Z!==p?(l(y(g.$length(),1))&&(g=[g]),g=a.yieldX(Z,a.to_a(g))):l(w(g.$length(),1))&&(g=g["$[]"](0));return ha.$push(g)},U.$$s=this,U.$$arity=-1,U));return ha},ya.$$arity=1);a.def(e,"$grep_v",pa=function(Y){var Q=pa.$$p,Z=Q||p,U,ha=p;Q&&(pa.$$p=null);Q&&(pa.$$p=null);ha=[];c(this,"each",[],(U=function(la){var g=a.slice.call(arguments,
0,arguments.length);var C=L(g);if(l(c(Y,"__send__",["==="].concat(a.to_a(C)))))return p;Z!==p?(l(y(g.$length(),1))&&(g=[g]),g=a.yieldX(Z,a.to_a(g))):l(w(g.$length(),1))&&(g=g["$[]"](0));return ha.$push(g)},U.$$s=this,U.$$arity=-1,U));return ha},pa.$$arity=1);a.def(e,"$group_by",fa=function(){var Y=fa.$$p,Q=Y||p,Z,U=p,ha=p,la=p;Y&&(fa.$$p=null);Y&&(fa.$$p=null);if(Q===p)return c(this,"enum_for",["group_by"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z));
U=k([],{});this.$each.$$p=function(){var g=H(D,"Opal").$destructure(arguments),C=a.yield1(Q,g);l(ha=U["$[]"](C))?C=ha:(la=[C,[]],c(U,"[]=",a.to_a(la)),C=la[t(la.length,1)]);C["$<<"](g)};this.$each();return U},fa.$$arity=0);a.def(e,"$include?",F=function(Y){try{var Q;c(this,"each",[],(Q=function(Z){var U=a.slice.call(arguments,0,arguments.length);if(H(D,"Opal").$destructure(U)["$=="](Y))a.ret(!0);else return p},Q.$$s=this,Q.$$arity=-1,Q));return!1}catch(Z){if(Z===a.returner)return Z.$v;throw Z;}},
F.$$arity=1);a.def(e,"$inject",T=function(Y,Q){var Z=T.$$p,U=Z||p;Z&&(T.$$p=null);Z&&(T.$$p=null);var ha=Y;U!==p&&void 0===Q?this.$each.$$p=function(){var la=H(D,"Opal").$destructure(arguments);void 0!==ha&&(la=a.yieldX(U,[ha,la]));ha=la}:(void 0===Q&&(H(D,"Symbol")["$==="](Y)||this.$raise(H(D,"TypeError"),""+Y.$inspect()+" is not a Symbol"),Q=Y,ha=void 0),this.$each.$$p=function(){var la=H(D,"Opal").$destructure(arguments);ha=void 0===ha?la:ha.$__send__(Q,la)});this.$each();return void 0==ha?p:ha},
T.$$arity=-1);a.def(e,"$lazy",ja=function(){var Y;return c(d(H(D,"Enumerator"),"Lazy"),"new",[this,this.$enumerator_size()],(Y=function(Q,Z){null==Q&&(Q=p);var U=a.slice.call(arguments,1,arguments.length);return c(Q,"yield",a.to_a(U))},Y.$$s=this,Y.$$arity=-2,Y))},ja.$$arity=0);a.def(e,"$enumerator_size",va=function(){return l(this["$respond_to?"]("size"))?this.$size():p},va.$$arity=0);a.alias(e,"map","collect");a.def(e,"$max",ea=function(Y){var Q=ea.$$p,Z=Q||p,U=this;Q&&(ea.$$p=null);Q&&(ea.$$p=
null);if(void 0===Y||Y===p){var ha,la;U.$each.$$p=function(){var g=H(D,"Opal").$destructure(arguments);void 0===ha?ha=g:(la=Z!==p?a.yieldX(Z,[g,ha]):g["$<=>"](ha),la===p&&U.$raise(H(D,"ArgumentError"),"comparison failed"),0<la&&(ha=g))};U.$each();return void 0===ha?p:ha}Y=m(Y,H(D,"Integer"),"to_int");return c(U,"sort",[],Z.$to_proc()).$reverse().$first(Y)},ea.$$arity=-1);a.def(e,"$max_by",wa=function(Y){var Q=wa.$$p,Z=Q||p,U;Q&&(wa.$$p=null);Q&&(wa.$$p=null);null==Y&&(Y=p);if(!l(Z))return c(this,
"enum_for",["max_by",Y],(U=function(){return(null==U.$$s?this:U.$$s).$enumerator_size()},U.$$s=this,U.$$arity=0,U));if(!l(Y["$nil?"]()))return c(this,"sort_by",[],Z.$to_proc()).$reverse().$take(Y);var ha,la;this.$each.$$p=function(){var g=H(D,"Opal").$destructure(arguments),C=a.yield1(Z,g);void 0===ha?(ha=g,la=C):0<C["$<=>"](la)&&(ha=g,la=C)};this.$each();return void 0===ha?p:ha},wa.$$arity=-1);a.alias(e,"member?","include?");a.def(e,"$min",Ga=function(Y){var Q=Ga.$$p,Z=Q||p,U,ha=this;Q&&(Ga.$$p=
null);Q&&(Ga.$$p=null);null==Y&&(Y=p);if(!l(Y["$nil?"]()))return Z!==p?c(ha,"sort",[],(U=function(g,C){null==g&&(g=p);null==C&&(C=p);return a.yieldX(Z,[g,C])},U.$$s=ha,U.$$arity=2,U)).$take(Y):ha.$sort().$take(Y);var la;ha.$each.$$p=Z!==p?function(){var g=H(D,"Opal").$destructure(arguments);if(void 0===la)la=g;else{var C=Z(g,la);C===p&&ha.$raise(H(D,"ArgumentError"),"comparison failed");0>C&&(la=g)}}:function(){var g=H(D,"Opal").$destructure(arguments);void 0===la?la=g:0>H(D,"Opal").$compare(g,la)&&
(la=g)};ha.$each();return void 0===la?p:la},Ga.$$arity=-1);a.def(e,"$min_by",Fa=function(Y){var Q=Fa.$$p,Z=Q||p,U;Q&&(Fa.$$p=null);Q&&(Fa.$$p=null);null==Y&&(Y=p);if(!l(Z))return c(this,"enum_for",["min_by",Y],(U=function(){return(null==U.$$s?this:U.$$s).$enumerator_size()},U.$$s=this,U.$$arity=0,U));if(!l(Y["$nil?"]()))return c(this,"sort_by",[],Z.$to_proc()).$take(Y);var ha,la;this.$each.$$p=function(){var g=H(D,"Opal").$destructure(arguments),C=a.yield1(Z,g);void 0===ha?(ha=g,la=C):0>C["$<=>"](la)&&
(ha=g,la=C)};this.$each();return void 0===ha?p:ha},Fa.$$arity=-1);a.def(e,"$minmax",Ra=function(){var Y=Ra.$$p,Q=Y||p,Z,U=this,ha=p;Y&&(Ra.$$p=null);Y&&(Ra.$$p=null);Q=function(){return l(ha=Q)?ha:c(U,"proc",[],(Z=function(N,aa){null==N&&(N=p);null==aa&&(aa=p);return N["$<=>"](aa)},Z.$$s=U,Z.$$arity=2,Z))}();var la=p,g=p,C=!0;U.$each.$$p=function(){var N=H(D,"Opal").$destructure(arguments);if(C)la=g=N,C=!1;else{var aa=Q.$call(la,N);aa===p?U.$raise(H(D,"ArgumentError"),"comparison failed"):0<aa&&(la=
N);aa=Q.$call(g,N);aa===p?U.$raise(H(D,"ArgumentError"),"comparison failed"):0>aa&&(g=N)}};U.$each();return[la,g]},Ra.$$arity=0);a.def(e,"$minmax_by",Ta=function(){var Y=Ta.$$p,Q=Y||p,Z;Y&&(Ta.$$p=null);Y&&(Ta.$$p=null);if(!l(Q))return c(this,"enum_for",["minmax_by"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z));var U=p,ha=p,la,g;this.$each.$$p=function(){var C=H(D,"Opal").$destructure(arguments),N=a.yield1(Q,C);if(void 0===la||0>N["$<=>"](la))U=C,la=
N;if(void 0===g||0<N["$<=>"](g))ha=C,g=N};this.$each();return[U,ha]},Ta.$$arity=0);a.def(e,"$none?",Ja=function(Y){try{var Q=Ja.$$p,Z=Q||p,U,ha,la;Q&&(Ja.$$p=null);Q&&(Ja.$$p=null);l(void 0!==Y)?c(this,"each",[],(U=function(g){var C=a.slice.call(arguments,0,arguments.length);C=L(C);if(l(c(Y,"public_send",["==="].concat(a.to_a(C)))))a.ret(!1);else return p},U.$$s=this,U.$$arity=-1,U)):Z!==p?c(this,"each",[],(ha=function(g){var C=a.slice.call(arguments,0,arguments.length);if(l(a.yieldX(Z,a.to_a(C))))a.ret(!1);
else return p},ha.$$s=this,ha.$$arity=-1,ha)):c(this,"each",[],(la=function(g){var C=a.slice.call(arguments,0,arguments.length);C=H(D,"Opal").$destructure(C);if(l(C))a.ret(!1);else return p},la.$$s=this,la.$$arity=-1,la));return!0}catch(g){if(g===a.returner)return g.$v;throw g;}},Ja.$$arity=-1);a.def(e,"$one?",kb=function(Y){try{var Q=kb.$$p,Z=Q||p,U,ha,la,g=p;Q&&(kb.$$p=null);Q&&(kb.$$p=null);g=0;l(void 0!==Y)?c(this,"each",[],(U=function(C){var N=a.slice.call(arguments,0,arguments.length);N=L(N);
if(l(c(Y,"public_send",["==="].concat(a.to_a(N)))))if(g=J(g,1),l(y(g,1)))a.ret(!1);else return p;else return p},U.$$s=this,U.$$arity=-1,U)):Z!==p?c(this,"each",[],(ha=function(C){var N=a.slice.call(arguments,0,arguments.length);if(!l(a.yieldX(Z,a.to_a(N))))return p;g=J(g,1);if(l(y(g,1)))a.ret(!1);else return p},ha.$$s=this,ha.$$arity=-1,ha)):c(this,"each",[],(la=function(C){var N=a.slice.call(arguments,0,arguments.length);if(!l(H(D,"Opal").$destructure(N)))return p;g=J(g,1);if(l(y(g,1)))a.ret(!1);
else return p},la.$$s=this,la.$$arity=-1,la));return g["$=="](1)}catch(C){if(C===a.returner)return C.$v;throw C;}},kb.$$arity=-1);a.def(e,"$partition",jb=function(){var Y=jb.$$p,Q=Y||p,Z;Y&&(jb.$$p=null);Y&&(jb.$$p=null);if(Q===p)return c(this,"enum_for",["partition"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z));var U=[],ha=[];this.$each.$$p=function(){var la=H(D,"Opal").$destructure(arguments),g=a.yield1(Q,la);l(g)?U.push(la):ha.push(la)};this.$each();
return[U,ha]},jb.$$arity=0);a.alias(e,"reduce","inject");a.def(e,"$reject",W=function(){var Y=W.$$p,Q=Y||p,Z;Y&&(W.$$p=null);Y&&(W.$$p=null);if(Q===p)return c(this,"enum_for",["reject"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z));var U=[];this.$each.$$p=function(){var ha=H(D,"Opal").$destructure(arguments),la=a.yield1(Q,ha);x(la)&&U.push(ha)};this.$each();return U},W.$$arity=0);a.def(e,"$reverse_each",za=function(){var Y=za.$$p,Q=Y||p,Z;Y&&(za.$$p=null);
Y&&(za.$$p=null);if(Q===p)return c(this,"enum_for",["reverse_each"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},Z.$$s=this,Z.$$arity=0,Z));var U=[];this.$each.$$p=function(){U.push(arguments)};this.$each();for(Y=U.length-1;0<=Y;Y--)a.yieldX(Q,U[Y]);return U},za.$$arity=0);a.alias(e,"select","find_all");a.def(e,"$slice_before",Ca=function(Y){var Q=Ca.$$p,Z=Q||p,U;Q&&(Ca.$$p=null);Q&&(Ca.$$p=null);l(void 0===Y&&Z===p)&&this.$raise(H(D,"ArgumentError"),"both pattern and block are given");
l(void 0!==Y&&Z!==p||1<arguments.length)&&this.$raise(H(D,"ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)");return c(H(D,"Enumerator"),"new",[],(U=function(ha){var la=null==U.$$s?this:U.$$s;null==ha&&(ha=p);var g=[];la.$each.$$p=Z!==p?void 0===Y?function(){var C=H(D,"Opal").$destructure(arguments),N=a.yield1(Z,C);l(N)&&0<g.length&&(ha["$<<"](g),g=[]);g.push(C)}:function(){var C=H(D,"Opal").$destructure(arguments),N=Z(C,Y.$dup());l(N)&&0<g.length&&(ha["$<<"](g),g=[]);
g.push(C)}:function(){var C=H(D,"Opal").$destructure(arguments),N=Y["$==="](C);l(N)&&0<g.length&&(ha["$<<"](g),g=[]);g.push(C)};la.$each();if(0<g.length)ha["$<<"](g)},U.$$s=this,U.$$arity=1,U))},Ca.$$arity=-1);a.def(e,"$slice_after",Aa=function(Y){var Q=Aa.$$p,Z=Q||p,U,ha;Q&&(Aa.$$p=null);Q&&(Aa.$$p=null);l(void 0===Y&&Z===p)&&this.$raise(H(D,"ArgumentError"),"both pattern and block are given");l(void 0!==Y&&Z!==p||1<arguments.length)&&this.$raise(H(D,"ArgumentError"),"wrong number of arguments ("+
arguments.length+" expected 1)");l(void 0!==Y)&&(Z=c(this,"proc",[],(U=function(la){null==la&&(la=p);return Y["$==="](la)},U.$$s=this,U.$$arity=1,U)));return c(H(D,"Enumerator"),"new",[],(ha=function(la){var g=null==ha.$$s?this:ha.$$s;null==la&&(la=p);var C;g.$each.$$p=function(){var N=H(D,"Opal").$destructure(arguments),aa=a.yield1(Z,N);null==C&&(C=[]);l(aa)?(C.push(N),la.$yield(C),C=null):C.push(N)};g.$each();null!=C&&la.$yield(C)},ha.$$s=this,ha.$$arity=1,ha))},Aa.$$arity=-1);a.def(e,"$slice_when",
bb=function(){var Y=bb.$$p,Q=Y||p,Z;Y&&(bb.$$p=null);Y&&(bb.$$p=null);Q===p&&this.$raise(H(D,"ArgumentError"),"wrong number of arguments (0 for 1)");return c(H(D,"Enumerator"),"new",[],(Z=function(U){var ha=null==Z.$$s?this:Z.$$s;null==U&&(U=p);var la=p,g=p;ha.$each_cons.$$p=function(){var C=H(D,"Opal").$destructure(arguments),N=C[0];C=C[1];var aa=a.yieldX(Q,[N,C]);g=C;la===p&&(la=[]);l(aa)?(la.push(N),U.$yield(la),la=[]):la.push(N)};ha.$each_cons(2);la!==p&&(la.push(g),U.$yield(la))},Z.$$s=this,
Z.$$arity=1,Z))},bb.$$arity=0);a.def(e,"$sort",db=function(){var Y=db.$$p,Q=Y||p,Z,U=p;Y&&(db.$$p=null);Y&&(db.$$p=null);U=this.$to_a();Q===p&&(Q=I((Z=function(ha,la){null==ha&&(ha=p);null==la&&(la=p);return ha["$<=>"](la)},Z.$$s=this,Z.$$arity=2,Z)));return c(U,"sort",[],Q.$to_proc())},db.$$arity=0);a.def(e,"$sort_by",ab=function(){var Y=ab.$$p,Q=Y||p,Z,U,ha,la,g=p;Y&&(ab.$$p=null);Y&&(ab.$$p=null);if(Q===p)return c(this,"enum_for",["sort_by"],(Z=function(){return(null==Z.$$s?this:Z.$$s).$enumerator_size()},
Z.$$s=this,Z.$$arity=0,Z));g=c(this,"map",[],(U=function(){var C=H(D,"Opal").$destructure(arguments);return[a.yield1(Q,C),C]},U.$$s=this,U.$$arity=0,U));c(g,"sort!",[],(ha=function(C,N){null==C&&(C=p);null==N&&(N=p);return C[0]["$<=>"](N[0])},ha.$$s=this,ha.$$arity=2,ha));return c(g,"map!",[],(la=function(C){null==C&&(C=p);return C[1]},la.$$s=this,la.$$arity=1,la))},ab.$$arity=0);a.def(e,"$sum",Wa=function(Y){var Q,Z=Wa.$$p,U=Z||p,ha=p;Z&&(Wa.$$p=null);null==Y&&(Y=0);ha=Y;c(this,"each",[],(Q=function(la){var g=
a.slice.call(arguments,0,arguments.length);g=U!==p?a.yieldX(U,a.to_a(g)):H(D,"Opal").$destructure(g);return ha=J(ha,g)},Q.$$s=this,Q.$$arity=-1,Q));return ha},Wa.$$arity=-1);a.def(e,"$take",Ba=function(Y){return this.$first(Y)},Ba.$$arity=1);a.def(e,"$take_while",ta=function(){try{var Y=ta.$$p,Q=Y||p,Z,U=p;Y&&(ta.$$p=null);Y&&(ta.$$p=null);if(!l(Q))return this.$enum_for("take_while");U=[];return c(this,"each",[],(Z=function(ha){var la=a.slice.call(arguments,0,arguments.length);la=H(D,"Opal").$destructure(la);
l(a.yield1(Q,la))||a.ret(U);return U.push(la)},Z.$$s=this,Z.$$arity=-1,Z))}catch(ha){if(ha===a.returner)return ha.$v;throw ha;}},ta.$$arity=0);a.def(e,"$uniq",Na=function(){var Y=Na.$$p,Q=Y||p,Z,U=p;Y&&(Na.$$p=null);Y&&(Na.$$p=null);U=k([],{});c(this,"each",[],(Z=function(ha){var la=a.slice.call(arguments,0,arguments.length);la=H(D,"Opal").$destructure(la);var g=Q!==p?a.yield1(Q,la):la;if(l(U["$key?"](g)))return p;la=[g,la];c(U,"[]=",a.to_a(la));return la[t(la.length,1)]},Z.$$s=this,Z.$$arity=-1,
Z));return U.$values()},Na.$$arity=0);a.def(e,"$tally",Sa=function(){return c(c(this,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc())},Sa.$$arity=0);a.alias(e,"to_a","entries");a.def(e,"$to_h",Ya=function(Y){var Q=Ya.$$p,Z=Q||p,U=this;Q&&(Ya.$$p=null);Q&&(Ya.$$p=null);Q=a.slice.call(arguments,0,arguments.length);if(Z!==p)return c(c(U,"map",[],Z.$to_proc()),"to_h",a.to_a(Q));var ha=k([],{});U.$each.$$p=function(){var la=H(D,"Opal").$destructure(arguments);la=H(D,"Opal")["$coerce_to?"](la,
H(D,"Array"),"to_ary");la.$$is_array||U.$raise(H(D,"TypeError"),"wrong element type "+la.$class()+" (expected array)");2!==la.length&&U.$raise(H(D,"ArgumentError"),"wrong array length (expected 2, was "+la.$length()+")");a.hash_put(ha,la[0],la[1])};U.$each.apply(U,Q);return ha},Ya.$$arity=-1);a.def(e,"$zip",Ha=function(Y){var Q=Ha.$$p;Q&&(Ha.$$p=null);Q&&(Ha.$$p=null);Q=a.slice.call(arguments,0,arguments.length);return c(this.$to_a(),"zip",a.to_a(Q))},Ha.$$arity=-1)}(z[0],z)};
Opal.modules["corelib/enumerator"]=function(a){function y(I,e){return"number"===typeof I&&"number"===typeof e?I+e:I["$+"](e)}function J(I,e){return"number"===typeof I&&"number"===typeof e?I<e:I["$<"](e)}var t=a.top,w=[],z=a.nil,p=a.$$,d=a.breaker,H=a.slice,x=a.falsy,l=a.truthy,m=a.coerce_to,u=a.klass,c=a.send,k=a.send2;a.add_stubs("$require $include $allocate $new $to_proc $! $respond_to? $nil? $empty? $+ $class $__send__ $call $enum_for $size $destructure $inspect $any? $[] $raise $yield $each $enumerator_size $try_convert $< $=== $for".split(" "));
t.$require("corelib/enumerable");return function(I,$super,n){I=u(I,$super,"Enumerator");var L=[I].concat(n),D,R,ka,da,ma,b,h;I.$$prototype.size=I.$$prototype.args=I.$$prototype.object=I.$$prototype.method=z;I.$include(p(L,"Enumerable"));I.$$prototype.$$is_enumerator=!0;a.defs(I,"$for",D=function(f,q,A){var E=D.$$p,G=E||z;E&&(D.$$p=null);E&&(D.$$p=null);E=a.slice.call(arguments,1,arguments.length);if(0<E.length){var M=E[0];E.splice(0,1)}null==M&&(M="each");var ba=this.$allocate();ba.object=f;ba.size=
G;ba.method=M;ba.args=E;return ba},D.$$arity=-2);a.def(I,"$initialize",R=function(f){var q=R.$$p,A=q||z,E=z;q&&(R.$$p=null);q&&(R.$$p=null);a.slice.call(arguments,0,arguments.length);if(l(A))return this.object=c(p(L,"Generator"),"new",[],A.$to_proc()),this.method="each",this.args=[],this.size=arguments[0]||z,l(l(E=this.size)?this.size["$respond_to?"]("call")["$!"]():E)?this.size=m(this.size,p(L,"Integer"),"to_int"):z;this.object=arguments[0];this.method=arguments[1]||"each";this.args=H.call(arguments,
2);return this.size=z},R.$$arity=-1);a.def(I,"$each",ka=function(f){var q=ka.$$p,A=q||z,E=z;q&&(ka.$$p=null);q&&(ka.$$p=null);q=a.slice.call(arguments,0,arguments.length);if(l(l(E=A["$nil?"]())?q["$empty?"]():E))return this;q=y(this.args,q);return l(A["$nil?"]())?c(this.$class(),"new",[this.object,this.method].concat(a.to_a(q))):c(this.object,"__send__",[this.method].concat(a.to_a(q)),A.$to_proc())},ka.$$arity=-1);a.def(I,"$size",da=function(){return l(this.size["$respond_to?"]("call"))?c(this.size,
"call",a.to_a(this.args)):this.size},da.$$arity=0);a.def(I,"$with_index",ma=function(f){var q=ma.$$p,A=q||z,E;q&&(ma.$$p=null);q&&(ma.$$p=null);null==f&&(f=0);f=l(f)?m(f,p(L,"Integer"),"to_int"):0;if(!l(A))return c(this,"enum_for",["with_index",f],(E=function(){return(null==E.$$s?this:E.$$s).$size()},E.$$s=this,E.$$arity=0,E));var G=f;this.$each.$$p=function(){var M=p(L,"Opal").$destructure(arguments);M=A(M,G);G++;return M};return this.$each()},ma.$$arity=-1);a.alias(I,"with_object","each_with_object");
a.def(I,"$each_with_index",b=function(){var f=b.$$p,q=f||z,A,E=z,G=z,M=z;f&&(b.$$p=null);G=0;M=arguments.length;for(E=Array(M);G<M;G++)E[G]=arguments[G];f&&(b.$$p=null);if(q===z)return c(this,"enum_for",["each_with_index"],(A=function(){return(null==A.$$s?this:A.$$s).$size()},A.$$s=this,A.$$arity=0,A));k(this,a.find_super_dispatcher(this,"each_with_index",b,!1,!0),"each_with_index",E,f);return this.object},b.$$arity=0);a.def(I,"$inspect",h=function(){var f="#<"+this.$class()+": "+this.object.$inspect()+
":"+this.method;l(this.args["$any?"]())&&(f=y(f,"("+this.args.$inspect()["$[]"](p(L,"Range").$new(1,-2))+")"));return y(f,">")},h.$$arity=0);(function(f,$super,A){f=u(f,$super,"Generator");var E=[f].concat(A),G,M;f.$$prototype.block=z;f.$include(p(E,"Enumerable"));a.def(f,"$initialize",G=function(){var ba=G.$$p,ua=ba||z;ba&&(G.$$p=null);ba&&(G.$$p=null);l(ua)||this.$raise(p(E,"LocalJumpError"),"no block given");return this.block=ua},G.$$arity=0);return(a.def(f,"$each",M=function(ba){var ua=M.$$p,
Pa=ua||z;ua&&(M.$$p=null);ua&&(M.$$p=null);ua=a.slice.call(arguments,0,arguments.length);Pa=c(p(E,"Yielder"),"new",[],Pa.$to_proc());try{ua.unshift(Pa),a.yieldX(this.block,ua)}catch(xa){if(xa===d)return d.$v;throw xa;}return this},M.$$arity=-1),z)&&"each"})(L[0],null,L);(function(f,$super,A){f=u(f,$super,"Yielder");[f].concat(A);var E,G,M;f.$$prototype.block=z;a.def(f,"$initialize",E=function(){var ba=E.$$p,ua=ba||z;ba&&(E.$$p=null);ba&&(E.$$p=null);return this.block=ua},E.$$arity=0);a.def(f,"$yield",
G=function(ba){var ua=a.slice.call(arguments,0,arguments.length);ua=a.yieldX(this.block,ua);if(ua===d)throw d;return ua},G.$$arity=-1);return(a.def(f,"$<<",M=function(ba){var ua=a.slice.call(arguments,0,arguments.length);c(this,"yield",a.to_a(ua));return this},M.$$arity=-1),z)&&"<<"})(L[0],null,L);(function(f,$super,A){f=u(f,$super,"Lazy");var E=[f].concat(A),G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa;f.$$prototype.enumerator=z;(function(fa,$super,T){[u(fa,$super,"StopLazyError")].concat(T);return z})(E[0],
p(E,"Exception"),E);a.def(f,"$initialize",G=function(fa,F){var T=G.$$p,ja=T||z,va;T&&(G.$$p=null);T&&(G.$$p=null);null==F&&(F=z);ja===z&&this.$raise(p(E,"ArgumentError"),"tried to call lazy new without a block");this.enumerator=fa;return k(this,a.find_super_dispatcher(this,"initialize",G,!1,!0),"initialize",[F],(va=function(ea,wa){var Ga=null==va.$$s?this:va.$$s,Fa;null==ea&&(ea=z);var Ra=a.slice.call(arguments,1,arguments.length);try{return c(fa,"each",a.to_a(Ra),(Fa=function(Ta){var Ja=a.slice.call(arguments,
0,arguments.length);Ja.unshift(ea);a.yieldX(ja,Ja)},Fa.$$s=Ga,Fa.$$arity=-1,Fa))}catch(Ta){if(a.rescue(Ta,[p(E,"Exception")]))try{return z}finally{a.pop_exception()}else throw Ta;}},va.$$s=this,va.$$arity=-2,va))},G.$$arity=-2);a.alias(f,"force","to_a");a.def(f,"$lazy",M=function(){return this},M.$$arity=0);a.def(f,"$collect",ba=function(){var fa=ba.$$p,F=fa||z,T;fa&&(ba.$$p=null);fa&&(ba.$$p=null);l(F)||this.$raise(p(E,"ArgumentError"),"tried to call lazy map without a block");return c(p(E,"Lazy"),
"new",[this,this.$enumerator_size()],(T=function(ja,va){null==ja&&(ja=z);var ea=a.slice.call(arguments,1,arguments.length);ea=a.yieldX(F,ea);ja.$yield(ea)},T.$$s=this,T.$$arity=-2,T))},ba.$$arity=0);a.def(f,"$collect_concat",ua=function(){var fa=ua.$$p,F=fa||z,T;fa&&(ua.$$p=null);fa&&(ua.$$p=null);l(F)||this.$raise(p(E,"ArgumentError"),"tried to call lazy map without a block");return c(p(E,"Lazy"),"new",[this,z],(T=function(ja,va){var ea=null==T.$$s?this:T.$$s,wa,Ga;null==ja&&(ja=z);var Fa=a.slice.call(arguments,
1,arguments.length);Fa=a.yieldX(F,Fa);Fa["$respond_to?"]("force")&&Fa["$respond_to?"]("each")?c(Fa,"each",[],(wa=function(Ra){null==Ra&&(Ra=z);return ja.$yield(Ra)},wa.$$s=ea,wa.$$arity=1,wa)):p(E,"Opal").$try_convert(Fa,p(E,"Array"),"to_ary")===z?ja.$yield(Fa):c(Fa,"each",[],(Ga=function(Ra){null==Ra&&(Ra=z);return ja.$yield(Ra)},Ga.$$s=ea,Ga.$$arity=1,Ga))},T.$$s=this,T.$$arity=-2,T))},ua.$$arity=0);a.def(f,"$drop",Pa=function(fa){var F,T=z,ja=T=z;fa=m(fa,p(E,"Integer"),"to_int");l(J(fa,0))&&this.$raise(p(E,
"ArgumentError"),"attempt to drop negative size");T=this.$enumerator_size();T=l(p(E,"Integer")["$==="](T))?l(J(fa,T))?fa:T:T;ja=0;return c(p(E,"Lazy"),"new",[this,T],(F=function(va,ea){null==va&&(va=z);var wa=a.slice.call(arguments,1,arguments.length);return l(J(ja,fa))?ja=y(ja,1):c(va,"yield",a.to_a(wa))},F.$$s=this,F.$$arity=-2,F))},Pa.$$arity=1);a.def(f,"$drop_while",xa=function(){var fa=xa.$$p,F=fa||z,T,ja=z;fa&&(xa.$$p=null);fa&&(xa.$$p=null);l(F)||this.$raise(p(E,"ArgumentError"),"tried to call lazy drop_while without a block");
ja=!0;return c(p(E,"Lazy"),"new",[this,z],(T=function(va,ea){null==va&&(va=z);var wa=a.slice.call(arguments,1,arguments.length);if(l(ja)){var Ga=a.yieldX(F,wa);x(Ga)&&(ja=!1,c(va,"yield",a.to_a(wa)))}else return c(va,"yield",a.to_a(wa))},T.$$s=this,T.$$arity=-2,T))},xa.$$arity=0);a.def(f,"$enum_for",Da=function(fa,F){var T=Da.$$p,ja=T||z;T&&(Da.$$p=null);T&&(Da.$$p=null);T=a.slice.call(arguments,0,arguments.length);if(0<T.length){var va=T[0];T.splice(0,1)}null==va&&(va="each");return c(this.$class(),
"for",[this,va].concat(a.to_a(T)),ja.$to_proc())},Da.$$arity=-1);a.alias(f,"filter","find_all");a.def(f,"$find_all",Ma=function(){var fa=Ma.$$p,F=fa||z,T;fa&&(Ma.$$p=null);fa&&(Ma.$$p=null);l(F)||this.$raise(p(E,"ArgumentError"),"tried to call lazy select without a block");return c(p(E,"Lazy"),"new",[this,z],(T=function(ja,va){null==ja&&(ja=z);var ea=a.slice.call(arguments,1,arguments.length);var wa=a.yieldX(F,ea);l(wa)&&c(ja,"yield",a.to_a(ea))},T.$$s=this,T.$$arity=-2,T))},Ma.$$arity=0);a.alias(f,
"flat_map","collect_concat");a.def(f,"$grep",na=function(fa){var F=na.$$p,T=F||z,ja,va;F&&(na.$$p=null);F&&(na.$$p=null);return l(T)?c(p(E,"Lazy"),"new",[this,z],(ja=function(ea,wa){null==ea&&(ea=z);var Ga=a.slice.call(arguments,1,arguments.length);Ga=p(E,"Opal").$destructure(Ga);var Fa=fa["$==="](Ga);l(Fa)&&(a.yield1(T,Ga),ea.$yield(a.yield1(T,Ga)))},ja.$$s=this,ja.$$arity=-2,ja)):c(p(E,"Lazy"),"new",[this,z],(va=function(ea,wa){null==ea&&(ea=z);var Ga=a.slice.call(arguments,1,arguments.length);
Ga=p(E,"Opal").$destructure(Ga);var Fa=fa["$==="](Ga);l(Fa)&&ea.$yield(Ga)},va.$$s=this,va.$$arity=-2,va))},na.$$arity=1);a.alias(f,"map","collect");a.alias(f,"select","find_all");a.def(f,"$reject",S=function(){var fa=S.$$p,F=fa||z,T;fa&&(S.$$p=null);fa&&(S.$$p=null);l(F)||this.$raise(p(E,"ArgumentError"),"tried to call lazy reject without a block");return c(p(E,"Lazy"),"new",[this,z],(T=function(ja,va){null==ja&&(ja=z);var ea=a.slice.call(arguments,1,arguments.length);var wa=a.yieldX(F,ea);x(wa)&&
c(ja,"yield",a.to_a(ea))},T.$$s=this,T.$$arity=-2,T))},S.$$arity=0);a.def(f,"$take",sa=function(fa){var F,T=z,ja=T=z;fa=m(fa,p(E,"Integer"),"to_int");l(J(fa,0))&&this.$raise(p(E,"ArgumentError"),"attempt to take negative size");T=this.$enumerator_size();T=l(p(E,"Integer")["$==="](T))?l(J(fa,T))?fa:T:T;ja=0;return c(p(E,"Lazy"),"new",[this,T],(F=function(va,ea){var wa=null==F.$$s?this:F.$$s;null==va&&(va=z);var Ga=a.slice.call(arguments,1,arguments.length);return l(J(ja,fa))?(c(va,"yield",a.to_a(Ga)),
ja=y(ja,1)):wa.$raise(p(E,"StopLazyError"))},F.$$s=this,F.$$arity=-2,F))},sa.$$arity=1);a.def(f,"$take_while",ya=function(){var fa=ya.$$p,F=fa||z,T;fa&&(ya.$$p=null);fa&&(ya.$$p=null);l(F)||this.$raise(p(E,"ArgumentError"),"tried to call lazy take_while without a block");return c(p(E,"Lazy"),"new",[this,z],(T=function(ja,va){var ea=null==T.$$s?this:T.$$s;null==ja&&(ja=z);var wa=a.slice.call(arguments,1,arguments.length);var Ga=a.yieldX(F,wa);l(Ga)?c(ja,"yield",a.to_a(wa)):ea.$raise(p(E,"StopLazyError"))},
T.$$s=this,T.$$arity=-2,T))},ya.$$arity=0);a.alias(f,"to_enum","enum_for");return(a.def(f,"$inspect",pa=function(){return"#<"+this.$class()+": "+this.enumerator.$inspect()+">"},pa.$$arity=0),z)&&"inspect"})(L[0],I,L);return function(f,$super,A){[u(f,$super,"ArithmeticSequence")].concat(A);return z}(L[0],I,L)}(w[0],null,w)};
Opal.modules["corelib/numeric"]=function(a){function y(c,k){return"number"===typeof c&&"number"===typeof k?c-k:c["$-"](k)}function J(c,k){return"number"===typeof c&&"number"===typeof k?c*k:c["$*"](k)}function t(c,k){return"number"===typeof c&&"number"===typeof k?c<k:c["$<"](k)}function w(c,k){return"number"===typeof c&&"number"===typeof k?c/k:c["$/"](k)}var z=a.top,p=[],d=a.nil,H=a.$$$,x=a.$$,l=a.klass,m=a.truthy,u=a.hash2;a.add_stubs("$require $include $instance_of? $class $Float $respond_to? $coerce $__send__ $=== $raise $equal? $- $* $div $< $-@ $ceil $to_f $denominator $to_r $== $floor $/ $% $Complex $zero? $numerator $abs $arg $coerce_to! $round $to_i $truncate $>".split(" "));
z.$require("corelib/comparable");return function(c,$super,I){c=l(c,$super,"Numeric");var e=[c].concat(I),n,L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta;c.$include(x(e,"Comparable"));a.def(c,"$coerce",n=function(Ja){return m(Ja["$instance_of?"](this.$class()))?[Ja,this]:[this.$Float(Ja),this.$Float(this)]},n.$$arity=1);a.def(c,"$__coerced__",L=function(Ja,kb){if(m(kb["$respond_to?"]("coerce"))){kb=kb.$coerce(this);var jb=a.to_ary(kb);var W=null==jb[0]?
d:jb[0];jb=null==jb[1]?d:jb[1];kb;return W.$__send__(Ja,jb)}return"+"["$==="](Ja)||"-"["$==="](Ja)||"*"["$==="](Ja)||"/"["$==="](Ja)||"%"["$==="](Ja)||"&"["$==="](Ja)||"|"["$==="](Ja)||"^"["$==="](Ja)||"**"["$==="](Ja)?this.$raise(x(e,"TypeError"),""+kb.$class()+" can't be coerced into Numeric"):">"["$==="](Ja)||">="["$==="](Ja)||"<"["$==="](Ja)||"<="["$==="](Ja)||"<=>"["$==="](Ja)?this.$raise(x(e,"ArgumentError"),"comparison of "+this.$class()+" with "+kb.$class()+" failed"):d},L.$$arity=2);a.def(c,
"$<=>",D=function(Ja){return m(this["$equal?"](Ja))?0:d},D.$$arity=1);a.def(c,"$+@",R=function(){return this},R.$$arity=0);a.def(c,"$-@",ka=function(){return y(0,this)},ka.$$arity=0);a.def(c,"$%",da=function(Ja){return y(this,J(Ja,this.$div(Ja)))},da.$$arity=1);a.def(c,"$abs",ma=function(){return t(this,0)?this["$-@"]():this},ma.$$arity=0);a.def(c,"$abs2",b=function(){return J(this,this)},b.$$arity=0);a.def(c,"$angle",h=function(){return t(this,0)?H(x(e,"Math"),"PI"):0},h.$$arity=0);a.alias(c,"arg",
"angle");a.def(c,"$ceil",f=function(Ja){null==Ja&&(Ja=0);return this.$to_f().$ceil(Ja)},f.$$arity=-1);a.def(c,"$conj",q=function(){return this},q.$$arity=0);a.alias(c,"conjugate","conj");a.def(c,"$denominator",A=function(){return this.$to_r().$denominator()},A.$$arity=0);a.def(c,"$div",E=function(Ja){Ja["$=="](0)&&this.$raise(x(e,"ZeroDivisionError"),"divided by o");return w(this,Ja).$floor()},E.$$arity=1);a.def(c,"$divmod",G=function(Ja){return[this.$div(Ja),this["$%"](Ja)]},G.$$arity=1);a.def(c,
"$fdiv",M=function(Ja){return w(this.$to_f(),Ja)},M.$$arity=1);a.def(c,"$floor",ba=function(Ja){null==Ja&&(Ja=0);return this.$to_f().$floor(Ja)},ba.$$arity=-1);a.def(c,"$i",ua=function(){return this.$Complex(0,this)},ua.$$arity=0);a.def(c,"$imag",Pa=function(){return 0},Pa.$$arity=0);a.alias(c,"imaginary","imag");a.def(c,"$integer?",xa=function(){return!1},xa.$$arity=0);a.alias(c,"magnitude","abs");a.alias(c,"modulo","%");a.def(c,"$nonzero?",Da=function(){return m(this["$zero?"]())?d:this},Da.$$arity=
0);a.def(c,"$numerator",Ma=function(){return this.$to_r().$numerator()},Ma.$$arity=0);a.alias(c,"phase","arg");a.def(c,"$polar",na=function(){return[this.$abs(),this.$arg()]},na.$$arity=0);a.def(c,"$quo",S=function(Ja){return w(x(e,"Opal")["$coerce_to!"](this,x(e,"Rational"),"to_r"),Ja)},S.$$arity=1);a.def(c,"$real",sa=function(){return this},sa.$$arity=0);a.def(c,"$real?",ya=function(){return!0},ya.$$arity=0);a.def(c,"$rect",pa=function(){return[this,0]},pa.$$arity=0);a.alias(c,"rectangular","rect");
a.def(c,"$round",fa=function(Ja){return this.$to_f().$round(Ja)},fa.$$arity=-1);a.def(c,"$to_c",F=function(){return this.$Complex(this,0)},F.$$arity=0);a.def(c,"$to_int",T=function(){return this.$to_i()},T.$$arity=0);a.def(c,"$truncate",ja=function(Ja){null==Ja&&(Ja=0);return this.$to_f().$truncate(Ja)},ja.$$arity=-1);a.def(c,"$zero?",va=function(){return this["$=="](0)},va.$$arity=0);a.def(c,"$positive?",ea=function(){return"number"===typeof this?0<this:this["$>"](0)},ea.$$arity=0);a.def(c,"$negative?",
wa=function(){return t(this,0)},wa.$$arity=0);a.def(c,"$dup",Ga=function(){return this},Ga.$$arity=0);a.def(c,"$clone",Fa=function(Ja){if(null==Ja)u([],{});else if(!Ja.$$is_hash)throw a.ArgumentError.$new("expected kwargs");return this},Fa.$$arity=-1);a.def(c,"$finite?",Ra=function(){return!0},Ra.$$arity=0);return(a.def(c,"$infinite?",Ta=function(){return d},Ta.$$arity=0),d)&&"infinite?"}(p[0],null,p)};
Opal.modules["corelib/array"]=function(a){function y(ka,da){return"number"===typeof ka&&"number"===typeof da?ka>da:ka["$>"](da)}var J=a.top,t=[],w=a.nil,z=a.$$$,p=a.$$,d=a.truthy,H=a.falsy,x=a.hash_ids,l=a.yield1,m=a.hash_get,u=a.hash_put,c=a.hash_delete,k=a.coerce_to,I=a.respond_to,e=a.klass,n=a.hash2,L=a.send2,D=a.send,R=a.gvars;a.add_stubs("$require $include $to_a $warn $raise $replace $respond_to? $to_ary $coerce_to? $=== $join $to_str $class $hash $<=> $== $object_id $inspect $enum_for $bsearch_index $to_proc $nil? $coerce_to! $> $* $enumerator_size $empty? $size $map $equal? $dup $each $[] $dig $eql? $length $exclude_end? $flatten $__id__ $to_s $new $max $min $! $>= $** $delete_if $reverse $rotate $rand $at $keep_if $shuffle! $< $sort $sort_by $!= $times $[]= $- $<< $values $is_a? $last $first $upto $reject $pristine $singleton_class".split(" "));
J.$require("corelib/enumerable");J.$require("corelib/numeric");return function(ka,$super,ma){function b(r,K){return K.$$name===a.Array?r:K.$allocate().$replace(r.$to_a())}function h(r,K,P){for(var ca,ia=null,qa=Array(r.length),Qa=0,fb=0,Za=r.length;Qa<Za;Qa++){if(!ia)try{ca=l(P,r[Qa])}catch(lb){ia=lb}if(ia||K(ca))qa[fb]=r[Qa],fb+=1}fb!==Qa&&(r.splice.apply(r,[0,qa.length].concat(qa)),r.splice(fb,qa.length));if(ia)throw ia;}function f(r,K){var P=r.length;var ca=K.excl;var ia=k(K.begin,a.Integer,"to_int");
K=k(K.end,a.Integer,"to_int");if(0>ia&&(ia+=P,0>ia)||ia>P)return w;if(0>K&&(K+=P,0>K))return[];ca||(K+=1);P=r.slice(ia,K);return b(P,r.$class())}function q(r,K,P){var ca=r.length;K=k(K,a.Integer,"to_int");if(0>K&&(K+=ca,0>K))return w;if(void 0===P)return K>=ca||0>K?w:r[K];P=k(P,a.Integer,"to_int");if(0>P||K>ca||0>K)return w;K=r.slice(K,K+P);return b(K,r.$class())}function A(r,K){return r===K||0===K?1:0<K&&r>K?A(r-1,K-1)+A(r-1,K):0}var E=e(ka,$super,"Array"),G=[E].concat(ma),M,ba,ua,Pa,xa,Da,Ma,na,
S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za,Ca,Aa,bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha,Y,Q,Z,U,ha,la,g,C,N,aa,v,V,oa,La,ib,ob,mb,sb,tb,wb,xb,ub,X,Oa,cb,B,O,ra,Ia,Ea,Ka,Va,hb,eb,Ua,Xa,gb,qb,nb,pb,Gb,Ab,Jb,Bb,Kb,Cb,Db,Lb,Mb,Eb,Nb,Fb,Ob;E.$include(p(G,"Enumerable"));a.defineProperty(E.$$prototype,"$$is_array",!0);a.defs(E,"$[]",M=function(r){var K=a.slice.call(arguments,0,arguments.length);return b(K,this)},M.$$arity=-1);a.def(E,"$initialize",ba=function(r,K){var P=ba.$$p,ca=P||w;P&&(ba.$$p=null);
P&&(ba.$$p=null);null==r&&(r=w);null==K&&(K=w);K!==w&&ca!==w&&this.$warn("warning: block supersedes default value argument");r>z(p(G,"Integer"),"MAX")&&this.$raise(p(G,"ArgumentError"),"array size too big");2<arguments.length&&this.$raise(p(G,"ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)");if(0===arguments.length)return this.splice(0,this.length),this;if(1===arguments.length){if(r.$$is_array)return this.$replace(r.$to_a()),this;if(r["$respond_to?"]("to_ary"))return this.$replace(r.$to_ary()),
this}r=k(r,p(G,"Integer"),"to_int");0>r&&this.$raise(p(G,"ArgumentError"),"negative array size");this.splice(0,this.length);if(ca===w)for(P=0;P<r;P++)this.push(K);else for(P=0,ia;P<r;P++){var ia=ca(P);this[P]=ia}return this},ba.$$arity=-1);a.defs(E,"$try_convert",ua=function(r){return p(G,"Opal")["$coerce_to?"](r,p(G,"Array"),"to_ary")},ua.$$arity=1);a.def(E,"$&",Pa=function(r){r=d(p(G,"Array")["$==="](r))?r.$to_a():k(r,p(G,"Array"),"to_ary").$to_a();var K=[],P=n([],{}),ca;var ia=0;for(ca=r.length;ia<
ca;ia++)u(P,r[ia],!0);ia=0;for(ca=this.length;ia<ca;ia++)r=this[ia],void 0!==c(P,r)&&K.push(r);return K},Pa.$$arity=1);a.def(E,"$|",xa=function(r){r=d(p(G,"Array")["$==="](r))?r.$to_a():k(r,p(G,"Array"),"to_ary").$to_a();var K=n([],{}),P;var ca=0;for(P=this.length;ca<P;ca++)u(K,this[ca],!0);ca=0;for(P=r.length;ca<P;ca++)u(K,r[ca],!0);return K.$keys()},xa.$$arity=1);a.def(E,"$*",Da=function(r){if(d(r["$respond_to?"]("to_str")))return this.$join(r.$to_str());r=k(r,p(G,"Integer"),"to_int");d(0>r)&&this.$raise(p(G,
"ArgumentError"),"negative argument");for(var K=[],P=this.$to_a(),ca=0;ca<r;ca++)K=K.concat(P);return b(K,this.$class())},Da.$$arity=1);a.def(E,"$+",Ma=function(r){r=d(p(G,"Array")["$==="](r))?r.$to_a():k(r,p(G,"Array"),"to_ary").$to_a();return this.concat(r)},Ma.$$arity=1);a.def(E,"$-",na=function(r){r=d(p(G,"Array")["$==="](r))?r.$to_a():k(r,p(G,"Array"),"to_ary").$to_a();if(d(0===this.length))return[];if(d(0===r.length))return this.slice();var K=[],P=n([],{}),ca;var ia=0;for(ca=r.length;ia<ca;ia++)u(P,
r[ia],!0);ia=0;for(ca=this.length;ia<ca;ia++)r=this[ia],void 0===m(P,r)&&K.push(r);return K},na.$$arity=1);a.def(E,"$<<",S=function(r){this.push(r);return this},S.$$arity=1);a.def(E,"$<=>",sa=function(r){if(d(p(G,"Array")["$==="](r)))r=r.$to_a();else if(d(r["$respond_to?"]("to_ary")))r=r.$to_ary().$to_a();else return w;if(this.$hash()===r.$hash())return 0;for(var K=Math.min(this.length,r.length),P=0;P<K;P++){var ca=this[P]["$<=>"](r[P]);if(0!==ca)return ca}return this.length["$<=>"](r.length)},sa.$$arity=
1);a.def(E,"$==",ya=function(r){function K(ca,ia){var qa;if(ca===ia)return!0;if(!ia.$$is_array)return I(ia,"$to_ary")?ia["$=="](ca):!1;ca.$$constructor!==Array&&(ca=ca.$to_a());ia.$$constructor!==Array&&(ia=ia.$to_a());if(ca.length!==ia.length)return!1;P[ca.$object_id()]=!0;var Qa=0;for(qa=ca.length;Qa<qa;Qa++){var fb=ca[Qa];var Za=ia[Qa];if(fb.$$is_array){if(Za.$$is_array&&Za.length!==fb.length||!P.hasOwnProperty(fb.$object_id())&&!K(fb,Za))return!1}else if(!fb["$=="](Za))return!1}return!0}var P=
{};return K(this,r)},ya.$$arity=1);a.def(E,"$[]",pa=function(r,K){return r.$$is_range?f(this,r):q(this,r,K)},pa.$$arity=-2);a.def(E,"$[]=",fa=function(r,K,P){var ca=w;var ia=this.length;if(d(p(G,"Range")["$==="](r))){ca=d(p(G,"Array")["$==="](K))?K.$to_a():d(K["$respond_to?"]("to_ary"))?K.$to_ary().$to_a():[K];var qa=r.excl;P=k(r.begin,p(G,"Integer"),"to_int");var Qa=k(r.end,p(G,"Integer"),"to_int");0>P&&(P+=ia,0>P&&this.$raise(p(G,"RangeError"),""+r.$inspect()+" out of range"));0>Qa&&(Qa+=ia);qa||
(Qa+=1);if(P>ia)for(;ia<P;ia++)this[ia]=w;0>Qa?this.splice.apply(this,[P,0].concat(ca)):this.splice.apply(this,[P,Qa-P].concat(ca))}else{d(void 0===P)?Qa=1:(Qa=K,K=P,ca=d(p(G,"Array")["$==="](K))?K.$to_a():d(K["$respond_to?"]("to_ary"))?K.$to_ary().$to_a():[K]);r=k(r,p(G,"Integer"),"to_int");Qa=k(Qa,p(G,"Integer"),"to_int");0>r&&(qa=r,r+=ia,0>r&&this.$raise(p(G,"IndexError"),"index "+qa+" too small for array; minimum "+-this.length));0>Qa&&this.$raise(p(G,"IndexError"),"negative length ("+Qa+")");
if(r>ia)for(;ia<r;ia++)this[ia]=w;void 0===P?this[r]=K:this.splice.apply(this,[r,Qa].concat(ca))}return K},fa.$$arity=-3);a.def(E,"$any?",F=function(r){var K=F.$$p,P;K&&(F.$$p=null);var ca=0;var ia=arguments.length;for(P=Array(ia);ca<ia;ca++)P[ca]=arguments[ca];K&&(F.$$p=null);return 0===this.length?!1:L(this,a.find_super_dispatcher(this,"any?",F,!1,!0),"any?",P,K)},F.$$arity=-1);a.def(E,"$assoc",T=function(r){for(var K=0,P=this.length,ca;K<P;K++)if(ca=this[K],ca.length&&ca[0]["$=="](r))return ca;
return w},T.$$arity=1);a.def(E,"$at",ja=function(r){r=k(r,p(G,"Integer"),"to_int");0>r&&(r+=this.length);return 0>r||r>=this.length?w:this[r]},ja.$$arity=1);a.def(E,"$bsearch_index",va=function(){var r=va.$$p,K=r||w;r&&(va.$$p=null);r&&(va.$$p=null);if(K===w)return this.$enum_for("bsearch_index");r=0;for(var P=this.length,ca,ia,qa=!1,Qa=w;r<P;){ca=r+Math.floor((P-r)/2);ia=this[ca];ia=l(K,ia);if(!0===ia)Qa=ca,qa=!0;else if(!1===ia||ia===w)qa=!1;else if(ia.$$is_number){if(0===ia)return ca;qa=0>ia}else this.$raise(p(G,
"TypeError"),"wrong argument type "+ia.$class()+" (must be numeric, true, false or nil)");qa?P=ca:r=ca+1}return Qa},va.$$arity=0);a.def(E,"$bsearch",ea=function(){var r=ea.$$p,K=r||w;r&&(ea.$$p=null);r&&(ea.$$p=null);if(K===w)return this.$enum_for("bsearch");r=D(this,"bsearch_index",[],K.$to_proc());return null!=r&&r.$$is_number?this[r]:r},ea.$$arity=0);a.def(E,"$cycle",wa=function(r){var K=wa.$$p,P=K||w,ca,ia=w;K&&(wa.$$p=null);K&&(wa.$$p=null);null==r&&(r=w);if(P===w)return D(this,"enum_for",["cycle",
r],(ca=function(){var qa=null==ca.$$s?this:ca.$$s;if(d(r["$nil?"]()))return z(p(G,"Float"),"INFINITY");r=p(G,"Opal")["$coerce_to!"](r,p(G,"Integer"),"to_int");return d(y(r,0))?(qa=qa.$enumerator_size(),"number"===typeof qa&&"number"===typeof r?qa*r:qa["$*"](r)):0},ca.$$s=this,ca.$$arity=0,ca));if(d(d(ia=this["$empty?"]())?ia:r["$=="](0)))return w;if(r===w)for(;;)for(K=0,ia=this.length;K<ia;K++)l(P,this[K]);else{r=p(G,"Opal")["$coerce_to!"](r,p(G,"Integer"),"to_int");if(0>=r)return this;for(;0<r;){K=
0;for(ia=this.length;K<ia;K++)l(P,this[K]);r--}}return this},wa.$$arity=-1);a.def(E,"$clear",Ga=function(){this.splice(0,this.length);return this},Ga.$$arity=0);a.def(E,"$count",Fa=function(r){var K=Fa.$$p,P=K||w,ca=w,ia;K&&(Fa.$$p=null);var qa=0;var Qa=arguments.length;for(ia=Array(Qa);qa<Qa;qa++)ia[qa]=arguments[qa];K&&(Fa.$$p=null);null==r&&(r=w);return d(d(ca=r)?ca:P)?L(this,a.find_super_dispatcher(this,"count",Fa,!1,!0),"count",ia,K):this.$size()},Fa.$$arity=-1);a.def(E,"$initialize_copy",Ra=
function(r){return this.$replace(r)},Ra.$$arity=1);a.def(E,"$collect",Ta=function(){var r=Ta.$$p,K=r||w,P;r&&(Ta.$$p=null);r&&(Ta.$$p=null);if(K===w)return D(this,"enum_for",["collect"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));r=[];for(var ca=0,ia=this.length;ca<ia;ca++){var qa=l(K,this[ca]);r.push(qa)}return r},Ta.$$arity=0);a.def(E,"$collect!",Ja=function(){var r=Ja.$$p,K=r||w,P;r&&(Ja.$$p=null);r&&(Ja.$$p=null);if(K===w)return D(this,"enum_for",["collect!"],
(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));r=0;for(var ca=this.length;r<ca;r++){var ia=l(K,this[r]);this[r]=ia}return this},Ja.$$arity=0);a.def(E,"$combination",kb=function(r){var K,P=kb.$$p,ca=P||w,ia=w;P&&(kb.$$p=null);ia=p(G,"Opal")["$coerce_to!"](r,p(G,"Integer"),"to_int");if(ca===w)return D(this,"enum_for",["combination",ia],(K=function(){return A((null==K.$$s?this:K.$$s).length,ia)},K.$$s=this,K.$$arity=0,K));if(0===ia)a.yield1(ca,[]);else if(1===ia)for(P=
0,r=this.length;P<r;P++)a.yield1(ca,[this[P]]);else if(ia===this.length)a.yield1(ca,this.slice());else if(0<=ia&&ia<this.length){r=[];for(P=0;P<=ia+1;P++)r.push(0);P=[];var qa=0;var Qa=!1;for(r[0]=-1;!Qa;){for(P[qa]=this[r[qa+1]];qa<ia-1;)qa++,Qa=r[qa+1]=r[qa]+1,P[qa]=this[Qa];a.yield1(ca,P.slice());qa++;do Qa=0===qa,r[qa]++,qa--;while(r[qa+1]+ia===this.length+qa+1)}}return this},kb.$$arity=1);a.def(E,"$repeated_combination",jb=function(r){function K(Qa,fb,Za,lb){if(Za.length==Qa)Qa=Za.slice(),a.yield1(ia,
Qa);else for(;fb<lb.length;fb++)Za.push(lb[fb]),K(Qa,fb,Za,lb),Za.pop()}var P,ca=jb.$$p,ia=ca||w,qa=w;ca&&(jb.$$p=null);qa=p(G,"Opal")["$coerce_to!"](r,p(G,"Integer"),"to_int");if(ia===w)return D(this,"enum_for",["repeated_combination",qa],(P=function(){return A((null==P.$$s?this:P.$$s).length+qa-1,qa)},P.$$s=this,P.$$arity=0,P));0<=qa&&K(qa,0,[],this);return this},jb.$$arity=1);a.def(E,"$compact",W=function(){for(var r=[],K=0,P=this.length,ca;K<P;K++)(ca=this[K])!==w&&r.push(ca);return r},W.$$arity=
0);a.def(E,"$compact!",za=function(){for(var r=this.length,K=0,P=this.length;K<P;K++)this[K]===w&&(this.splice(K,1),P--,K--);return this.length===r?w:this},za.$$arity=0);a.def(E,"$concat",Ca=function(r){var K,P;var ca=a.slice.call(arguments,0,arguments.length);ca=D(ca,"map",[],(K=function(ia){var qa=null==K.$$s?this:K.$$s;null==ia&&(ia=w);ia=d(p(G,"Array")["$==="](ia))?ia.$to_a():k(ia,p(G,"Array"),"to_ary").$to_a();d(ia["$equal?"](qa))&&(ia=ia.$dup());return ia},K.$$s=this,K.$$arity=1,K));D(ca,"each",
[],(P=function(ia){var qa=null==P.$$s?this:P.$$s;null==ia&&(ia=w);for(var Qa=0,fb=ia.length;Qa<fb;Qa++)qa.push(ia[Qa])},P.$$s=this,P.$$arity=1,P));return this},Ca.$$arity=-1);a.def(E,"$delete",Aa=function(r){var K=Aa.$$p,P=K||w;K&&(Aa.$$p=null);K=this.length;for(var ca=0,ia=K;ca<ia;ca++)this[ca]["$=="](r)&&(this.splice(ca,1),ia--,ca--);return this.length===K?P!==w?a.yieldX(P,[]):w:r},Aa.$$arity=1);a.def(E,"$delete_at",bb=function(r){r=k(r,p(G,"Integer"),"to_int");0>r&&(r+=this.length);if(0>r||r>=
this.length)return w;var K=this[r];this.splice(r,1);return K},bb.$$arity=1);a.def(E,"$delete_if",db=function(){var r=db.$$p,K=r||w,P;r&&(db.$$p=null);r&&(db.$$p=null);if(K===w)return D(this,"enum_for",["delete_if"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));h(this,H,K);return this},db.$$arity=0);a.alias(E,"difference","-");a.def(E,"$dig",ab=function(r,K){var P=a.slice.call(arguments,1,arguments.length);var ca=this["$[]"](r);if(ca===w||0===P.length)return ca;d(ca["$respond_to?"]("dig"))||
this.$raise(p(G,"TypeError"),""+ca.$class()+" does not have #dig method");return D(ca,"dig",a.to_a(P))},ab.$$arity=-2);a.def(E,"$drop",Wa=function(r){0>r&&this.$raise(p(G,"ArgumentError"));return this.slice(r)},Wa.$$arity=1);a.def(E,"$dup",Ba=function(){var r=Ba.$$p,K;r&&(Ba.$$p=null);var P=0;var ca=arguments.length;for(K=Array(ca);P<ca;P++)K[P]=arguments[P];return this.$$class===a.Array&&this.$$class.$allocate.$$pristine&&this.$copy_instance_variables.$$pristine&&this.$initialize_dup.$$pristine?
this.slice(0):L(this,a.find_super_dispatcher(this,"dup",Ba,!1,!0),"dup",K,r)},Ba.$$arity=0);a.def(E,"$each",ta=function(){var r=ta.$$p,K=r||w,P;r&&(ta.$$p=null);r&&(ta.$$p=null);if(K===w)return D(this,"enum_for",["each"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));r=0;for(var ca=this.length;r<ca;r++)l(K,this[r]);return this},ta.$$arity=0);a.def(E,"$each_index",Na=function(){var r=Na.$$p,K=r||w,P;r&&(Na.$$p=null);r&&(Na.$$p=null);if(K===w)return D(this,"enum_for",
["each_index"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));r=0;for(var ca=this.length;r<ca;r++)l(K,r);return this},Na.$$arity=0);a.def(E,"$empty?",Sa=function(){return 0===this.length},Sa.$$arity=0);a.def(E,"$eql?",Ya=function(r){function K(ca,ia){var qa;if(!ia.$$is_array)return!1;ia=ia.$to_a();if(ca.length!==ia.length)return!1;P[ca.$object_id()]=!0;var Qa=0;for(qa=ca.length;Qa<qa;Qa++){var fb=ca[Qa];var Za=ia[Qa];if(fb.$$is_array){if(Za.$$is_array&&Za.length!==
fb.length||!P.hasOwnProperty(fb.$object_id())&&!K(fb,Za))return!1}else if(!fb["$eql?"](Za))return!1}return!0}var P={};return K(this,r)},Ya.$$arity=1);a.def(E,"$fetch",Ha=function(r,K){var P=Ha.$$p,ca=P||w;P&&(Ha.$$p=null);P&&(Ha.$$p=null);P=r;r=k(r,p(G,"Integer"),"to_int");0>r&&(r+=this.length);if(0<=r&&r<this.length)return this[r];ca!==w&&null!=K&&this.$warn("warning: block supersedes default value argument");if(ca!==w)return ca(P);if(null!=K)return K;0===this.length?this.$raise(p(G,"IndexError"),
"index "+P+" outside of array bounds: 0...0"):this.$raise(p(G,"IndexError"),"index "+P+" outside of array bounds: -"+this.length+"..."+this.length)},Ha.$$arity=-2);a.def(E,"$fill",Y=function(r){var K=Y.$$p,P=K||w,ca=w;K&&(Y.$$p=null);K&&(Y.$$p=null);K=a.slice.call(arguments,0,arguments.length);if(d(P)){d(2<K.length)&&this.$raise(p(G,"ArgumentError"),"wrong number of arguments ("+K.$length()+" for 0..2)");var ia=K;var qa=a.to_ary(ia);K=null==qa[0]?w:qa[0];qa=null==qa[1]?w:qa[1]}else d(0==K.length)?
this.$raise(p(G,"ArgumentError"),"wrong number of arguments (0 for 1..3)"):d(3<K.length)&&this.$raise(p(G,"ArgumentError"),"wrong number of arguments ("+K.$length()+" for 1..3)"),ia=K,qa=a.to_ary(ia),ca=null==qa[0]?w:qa[0],K=null==qa[1]?w:qa[1],qa=null==qa[2]?w:qa[2];ia;if(d(p(G,"Range")["$==="](K))){if(d(qa)&&this.$raise(p(G,"TypeError"),"length invalid with range"),ia=k(K.begin,p(G,"Integer"),"to_int"),d(0>ia)&&(ia+=this.length),d(0>ia)&&this.$raise(p(G,"RangeError"),""+K.$inspect()+" out of range"),
qa=k(K.end,p(G,"Integer"),"to_int"),d(0>qa)&&(qa+=this.length),d(K["$exclude_end?"]())||(qa+=1),d(qa<=ia))return this}else if(d(K))if(ia=k(K,p(G,"Integer"),"to_int"),d(0>ia)&&(ia+=this.length),d(0>ia)&&(ia=0),d(qa)){qa=k(qa,p(G,"Integer"),"to_int");if(d(0==qa))return this;qa+=ia}else qa=this.length;else ia=0,qa=this.length;if(d(ia>this.length))for(K=this.length;K<qa;K++)this[K]=w;d(qa>this.length)&&(this.length=qa);if(d(P))for(;ia<qa;ia++)ca=P(ia),this[ia]=ca;else for(;ia<qa;ia++)this[ia]=ca;return this},
Y.$$arity=-1);a.def(E,"$first",Q=function(r){if(null==r)return 0===this.length?w:this[0];r=k(r,p(G,"Integer"),"to_int");0>r&&this.$raise(p(G,"ArgumentError"),"negative array size");return this.slice(0,r)},Q.$$arity=-1);a.def(E,"$flatten",Z=function(r){function K(ca,ia){var qa=[],Qa;ca=ca.$to_a();var fb=0;for(Qa=ca.length;fb<Qa;fb++){var Za=ca[fb];if(I(Za,"$to_ary",!0)){var lb=Za.$to_ary();if(lb===w)qa.push(Za);else switch(lb.$$is_array||P.$raise(p(G,"TypeError")),lb===P&&P.$raise(p(G,"ArgumentError")),
ia){case void 0:qa=qa.concat(K(lb));break;case 0:qa.push(lb);break;default:qa.push.apply(qa,K(lb,ia-1))}}else qa.push(Za)}return qa}var P=this;void 0!==r&&(r=k(r,p(G,"Integer"),"to_int"));return b(K(P,r),P.$class())},Z.$$arity=-1);a.def(E,"$flatten!",U=function(r){r=this.$flatten(r);if(this.length==r.length){for(var K=0,P=this.length;K<P&&this[K]===r[K];K++);if(K==P)return w}this.$replace(r);return this},U.$$arity=-1);a.def(E,"$hash",ha=function(){var r=void 0===x,K=["A"],P=this.$object_id(),ca,ia;
try{r&&(x=Object.create(null));if(x[P])return"self";for(ia in x){var qa=x[ia];if(this["$eql?"](qa))return"self"}x[P]=this;for(ca=0;ca<this.length;ca++)qa=this[ca],K.push(qa.$hash());return K.join(",")}finally{r&&(x=void 0)}},ha.$$arity=0);a.def(E,"$include?",la=function(r){for(var K=0,P=this.length;K<P;K++)if(this[K]["$=="](r))return!0;return!1},la.$$arity=1);a.def(E,"$index",g=function(r){var K=g.$$p,P=K||w;K&&(g.$$p=null);K&&(g.$$p=null);var ca;null!=r&&P!==w&&this.$warn("warning: given block not used");
if(null!=r)for(K=0,ca=this.length;K<ca;K++){if(this[K]["$=="](r))return K}else if(P!==w)for(K=0,ca=this.length;K<ca;K++){if(r=P(this[K]),!1!==r&&r!==w)return K}else return this.$enum_for("index");return w},g.$$arity=-1);a.def(E,"$insert",C=function(r,K){var P=a.slice.call(arguments,1,arguments.length);r=k(r,p(G,"Integer"),"to_int");if(0<P.length){0>r&&(r+=this.length+1,0>r&&this.$raise(p(G,"IndexError"),""+r+" is out of bounds"));if(r>this.length)for(var ca=this.length;ca<r;ca++)this.push(w);this.splice.apply(this,
[r,0].concat(P))}return this},C.$$arity=-2);a.def(E,"$inspect",N=function(){for(var r=[],K=this.$__id__(),P=0,ca=this.length;P<ca;P++){var ia=this["$[]"](P);ia.$__id__()===K?r.push("[...]"):r.push(ia.$inspect())}return"["+r.join(", ")+"]"},N.$$arity=0);a.alias(E,"intersection","&");a.def(E,"$join",aa=function(r){null==R[","]&&(R[","]=w);null==r&&(r=w);if(d(0===this.length))return"";d(r===w)&&(r=R[","]);var K=[],P;var ca=0;for(P=this.length;ca<P;ca++){var ia=this[ca];if(I(ia,"$to_str")){var qa=ia.$to_str();
if(qa!==w){K.push(qa.$to_s());continue}}if(I(ia,"$to_ary")&&(qa=ia.$to_ary(),qa===this&&this.$raise(p(G,"ArgumentError")),qa!==w)){K.push(qa.$join(r));continue}if(I(ia,"$to_s")&&(qa=ia.$to_s(),qa!==w)){K.push(qa);continue}this.$raise(p(G,"NoMethodError").$new(""+a.inspect(ia)+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return r===w?K.join(""):K.join(p(G,"Opal")["$coerce_to!"](r,p(G,"String"),"to_str").$to_s())},aa.$$arity=-1);a.def(E,"$keep_if",v=function(){var r=v.$$p,K=r||w,P;r&&
(v.$$p=null);r&&(v.$$p=null);if(K===w)return D(this,"enum_for",["keep_if"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));h(this,d,K);return this},v.$$arity=0);a.def(E,"$last",V=function(r){if(null==r)return 0===this.length?w:this[this.length-1];r=k(r,p(G,"Integer"),"to_int");0>r&&this.$raise(p(G,"ArgumentError"),"negative array size");r>this.length&&(r=this.length);return this.slice(this.length-r,this.length)},V.$$arity=-1);a.def(E,"$length",oa=function(){return this.length},
oa.$$arity=0);a.alias(E,"map","collect");a.alias(E,"map!","collect!");a.def(E,"$max",La=function(r){var K=La.$$p,P=K||w;K&&(La.$$p=null);K&&(La.$$p=null);return D(this.$each(),"max",[r],P.$to_proc())},La.$$arity=-1);a.def(E,"$min",ib=function(){var r=ib.$$p,K=r||w;r&&(ib.$$p=null);r&&(ib.$$p=null);return D(this.$each(),"min",[],K.$to_proc())},ib.$$arity=0);a.def(E,"$permutation",ob=function(r){var K=ob.$$p,P=K||w,ca,ia=this,qa=w,Qa=w;K&&(ob.$$p=null);K&&(ob.$$p=null);if(P===w)return D(ia,"enum_for",
["permutation",r],(ca=function(){var lb=null==ca.$$s?this:ca.$$s,vb=lb.length;lb=void 0===r?lb.length:r;for(var yb=0<=lb?1:0;lb;)yb*=vb,vb--,lb--;return yb},ca.$$s=ia,ca.$$arity=0,ca));var fb;r=void 0===r?ia.length:k(r,p(G,"Integer"),"to_int");if(!(0>r||ia.length<r))if(0===r)a.yield1(P,[]);else if(1===r)for(qa=0;qa<ia.length;qa++)a.yield1(P,[ia[qa]]);else{qa=p(G,"Array").$new(r);Qa=p(G,"Array").$new(ia.length,!1);var Za=function(lb,vb,yb,Hb,Pb){ia=this;for(var zb=0;zb<ia.length;zb++)if(Hb["$[]"](zb)["$!"]())if(vb[yb]=
zb,yb<lb-1)Hb[zb]=!0,Za.call(ia,lb,vb,yb+1,Hb,Pb),Hb[zb]=!1;else{fb=[];for(var Ib=0;Ib<vb.length;Ib++)fb.push(ia[vb[Ib]]);l(Pb,fb)}};P!==w?(K=ia.slice(),Za.call(K,r,qa,0,Qa,P)):Za.call(ia,r,qa,0,Qa,P)}return ia},ob.$$arity=-1);a.def(E,"$repeated_permutation",mb=function(r){function K(Qa,fb,Za){if(fb.length==Qa)Qa=fb.slice(),a.yield1(ia,Qa);else for(var lb=0;lb<Za.length;lb++)fb.push(Za[lb]),K(Qa,fb,Za),fb.pop()}var P,ca=mb.$$p,ia=ca||w,qa=w;ca&&(mb.$$p=null);qa=p(G,"Opal")["$coerce_to!"](r,p(G,"Integer"),
"to_int");if(ia===w)return D(this,"enum_for",["repeated_permutation",qa],(P=function(){var Qa=null==P.$$s?this:P.$$s;return d("number"===typeof qa?0<=qa:qa["$>="](0))?Qa.$size()["$**"](qa):0},P.$$s=this,P.$$arity=0,P));K(qa,[],this.slice());return this},mb.$$arity=1);a.def(E,"$pop",sb=function(r){if(d(void 0===r))return d(0===this.length)?w:this.pop();r=k(r,p(G,"Integer"),"to_int");d(0>r)&&this.$raise(p(G,"ArgumentError"),"negative array size");return d(0===this.length)?[]:d(1===r)?[this.pop()]:d(r>
this.length)?this.splice(0,this.length):this.splice(this.length-r,this.length)},sb.$$arity=-1);a.def(E,"$product",tb=function(r){var K=tb.$$p,P=K||w;K&&(tb.$$p=null);K&&(tb.$$p=null);var ca=a.slice.call(arguments,0,arguments.length);K=P!==w?null:[];var ia=ca.length+1,qa=Array(ia),Qa=Array(ia),fb=Array(ia),Za;var lb=1;fb[0]=this;for(Za=1;Za<ia;Za++)fb[Za]=k(ca[Za-1],p(G,"Array"),"to_ary");for(Za=0;Za<ia;Za++){ca=fb[Za].length;if(0===ca)return K||this;lb*=ca;2147483647<lb&&this.$raise(p(G,"RangeError"),
"too big to product");Qa[Za]=ca;qa[Za]=0}a:for(;;){lb=[];for(Za=0;Za<ia;Za++)lb.push(fb[Za][qa[Za]]);K?K.push(lb):a.yield1(P,lb);Za=ia-1;for(qa[Za]++;qa[Za]===Qa[Za];){qa[Za]=0;if(0>--Za)break a;qa[Za]++}}return K||this},tb.$$arity=-1);a.def(E,"$push",wb=function(r){var K=a.slice.call(arguments,0,arguments.length);for(var P=0,ca=K.length;P<ca;P++)this.push(K[P]);return this},wb.$$arity=-1);a.alias(E,"append","push");a.def(E,"$rassoc",xb=function(r){for(var K=0,P=this.length,ca;K<P;K++)if(ca=this[K],
ca.length&&void 0!==ca[1]&&ca[1]["$=="](r))return ca;return w},xb.$$arity=1);a.def(E,"$reject",ub=function(){var r=ub.$$p,K=r||w,P;r&&(ub.$$p=null);r&&(ub.$$p=null);if(K===w)return D(this,"enum_for",["reject"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));r=[];for(var ca=0,ia=this.length,qa;ca<ia;ca++)qa=K(this[ca]),!1!==qa&&qa!==w||r.push(this[ca]);return r},ub.$$arity=0);a.def(E,"$reject!",X=function(){var r=X.$$p,K=r||w,P,ca=w;r&&(X.$$p=null);r&&(X.$$p=null);
if(K===w)return D(this,"enum_for",["reject!"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));ca=this.$length();D(this,"delete_if",[],K.$to_proc());return this.$length()["$=="](ca)?w:this},X.$$arity=0);a.def(E,"$replace",Oa=function(r){r=d(p(G,"Array")["$==="](r))?r.$to_a():k(r,p(G,"Array"),"to_ary").$to_a();this.splice(0,this.length);this.push.apply(this,r);return this},Oa.$$arity=1);a.def(E,"$reverse",cb=function(){return this.slice(0).reverse()},cb.$$arity=0);a.def(E,
"$reverse!",B=function(){return this.reverse()},B.$$arity=0);a.def(E,"$reverse_each",O=function(){var r=O.$$p,K=r||w,P;r&&(O.$$p=null);r&&(O.$$p=null);if(K===w)return D(this,"enum_for",["reverse_each"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));D(this.$reverse(),"each",[],K.$to_proc());return this},O.$$arity=0);a.def(E,"$rindex",ra=function(r){var K=ra.$$p,P=K||w;K&&(ra.$$p=null);K&&(ra.$$p=null);null!=r&&P!==w&&this.$warn("warning: given block not used");if(null!=
r)for(K=this.length-1;0<=K&&!(K>=this.length);K--){if(this[K]["$=="](r))return K}else if(P!==w)for(K=this.length-1;0<=K&&!(K>=this.length);K--){if(r=P(this[K]),!1!==r&&r!==w)return K}else if(null==r)return this.$enum_for("rindex");return w},ra.$$arity=-1);a.def(E,"$rotate",Ia=function(r){null==r&&(r=1);r=k(r,p(G,"Integer"),"to_int");if(1===this.length)return this.slice();if(0===this.length)return[];var K=this.slice();var P=r%K.length;r=K.slice(P);K=K.slice(0,P);return r.concat(K)},Ia.$$arity=-1);
a.def(E,"$rotate!",Ea=function(r){null==r&&(r=1);if(0===this.length||1===this.length)return this;r=k(r,p(G,"Integer"),"to_int");r=this.$rotate(r);return this.$replace(r)},Ea.$$arity=-1);(function(r,$super,P){r=e(r,$super,"SampleRandom");var ca=[r].concat(P),ia,qa;r.$$prototype.rng=w;a.def(r,"$initialize",ia=function(Qa){return this.rng=Qa},ia.$$arity=1);return(a.def(r,"$rand",qa=function(Qa){var fb=k(this.rng.$rand(Qa),p(ca,"Integer"),"to_int");d(0>fb)&&this.$raise(p(ca,"RangeError"),"random value must be >= 0");
d(fb<Qa)||this.$raise(p(ca,"RangeError"),"random value must be less than Array size");return fb},qa.$$arity=1),w)&&"rand"})(G[0],null,G);a.def(E,"$sample",Ka=function(r,K){var P=w,ca=w,ia=w;if(d(void 0===r))return this.$at(p(G,"Kernel").$rand(this.length));d(void 0===K)?d(K=p(G,"Opal")["$coerce_to?"](r,p(G,"Hash"),"to_hash"))?r=w:(K=w,r=k(r,p(G,"Integer"),"to_int")):(r=k(r,p(G,"Integer"),"to_int"),K=k(K,p(G,"Hash"),"to_hash"));d(d(P=r)?0>r:P)&&this.$raise(p(G,"ArgumentError"),"count must be greater than 0");
d(K)&&(ca=K["$[]"]("random"));ca=d(d(ia=ca)?ca["$respond_to?"]("rand"):ia)?p(G,"SampleRandom").$new(ca):p(G,"Kernel");if(!d(r))return this[ca.$rand(this.length)];r>this.length&&(r=this.length);switch(r){case 0:return[];case 1:return[this[ca.$rand(this.length)]];case 2:var qa=ca.$rand(this.length);var Qa=ca.$rand(this.length);qa===Qa&&(Qa=0===qa?qa+1:qa-1);return[this[qa],this[Qa]];default:if(3<this.length/r){ia=!1;K=0;P=p(G,"Array").$new(r);qa=1;for(P[0]=ca.$rand(this.length);qa<r;){var fb=ca.$rand(this.length);
for(Qa=0;Qa<qa;){for(;fb===P[Qa];){K++;if(100<K){ia=!0;break}fb=ca.$rand(this.length)}if(ia)break;Qa++}if(ia)break;P[qa]=fb;qa++}if(!ia){for(qa=0;qa<r;)P[qa]=this[P[qa]],qa++;return P}}P=this.slice();for(qa=0;qa<r;qa++)ia=ca.$rand(this.length),K=P[qa],P[qa]=P[ia],P[ia]=K;return r===this.length?P:P["$[]"](0,r)}},Ka.$$arity=-1);a.def(E,"$select",Va=function(){var r=Va.$$p,K=r||w,P;r&&(Va.$$p=null);r&&(Va.$$p=null);if(K===w)return D(this,"enum_for",["select"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},
P.$$s=this,P.$$arity=0,P));r=[];for(var ca=0,ia=this.length,qa,Qa;ca<ia;ca++)qa=this[ca],Qa=l(K,qa),d(Qa)&&r.push(qa);return r},Va.$$arity=0);a.def(E,"$select!",hb=function(){var r=hb.$$p,K=r||w,P;r&&(hb.$$p=null);r&&(hb.$$p=null);if(K===w)return D(this,"enum_for",["select!"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P));r=this.length;D(this,"keep_if",[],K.$to_proc());return this.length===r?w:this},hb.$$arity=0);a.alias(E,"filter","select");a.alias(E,"filter!","select!");
a.def(E,"$shift",eb=function(r){if(d(void 0===r)){if(d(0===this.length))return w;r=this[0];for(var K=1,P=this.length;K<P;K++)this[K-1]=this[K];this.pop();return r}r=k(r,p(G,"Integer"),"to_int");d(0>r)&&this.$raise(p(G,"ArgumentError"),"negative array size");return d(0===this.length)?[]:this.splice(0,r)},eb.$$arity=-1);a.alias(E,"size","length");a.def(E,"$shuffle",Ua=function(r){return this.$dup().$to_a()["$shuffle!"](r)},Ua.$$arity=-1);a.def(E,"$shuffle!",Xa=function(r){var K,P=this.length;void 0!==
r&&(r=p(G,"Opal")["$coerce_to?"](r,p(G,"Hash"),"to_hash"),r!==w&&(r=r["$[]"]("random"),r!==w&&r["$respond_to?"]("rand")&&(K=r)));for(;P;){K?(r=K.$rand(P).$to_int(),0>r&&this.$raise(p(G,"RangeError"),"random number too small "+r),r>=P&&this.$raise(p(G,"RangeError"),"random number too big "+r)):r=this.$rand(P);var ca=this[--P];this[P]=this[r];this[r]=ca}return this},Xa.$$arity=-1);a.alias(E,"slice","[]");a.def(E,"$slice!",gb=function(r,K){if(d(void 0===K))if(d(p(G,"Range")["$==="](r))){var P=this["$[]"](r);
K=k(r.begin,p(G,"Integer"),"to_int");var ca=k(r.end,p(G,"Integer"),"to_int");0>K&&(K+=this.length);0>ca?ca+=this.length:ca>=this.length&&(ca=this.length-1,r.excl&&(ca+=1));var ia=ca-K;r.excl?--ca:ia+=1;K<this.length&&0<=K&&ca<this.length&&0<=ca&&0<ia&&this.splice(K,ia)}else{r=k(r,p(G,"Integer"),"to_int");0>r&&(r+=this.length);if(0>r||r>=this.length)return w;P=this[r];0===r?this.shift():this.splice(r,1)}else{r=k(r,p(G,"Integer"),"to_int");K=k(K,p(G,"Integer"),"to_int");if(0>K)return w;P=this["$[]"](r,
K);0>r&&(r+=this.length);r+K>this.length&&(K=this.length-r);r<this.length&&0<=r&&this.splice(r,K)}return P},gb.$$arity=-2);a.def(E,"$sort",qb=function(){var r=qb.$$p,K=r||w,P=this;r&&(qb.$$p=null);r&&(qb.$$p=null);if(!d(1<P.length))return P;K===w&&(K=function(ca,ia){return ca["$<=>"](ia)});return P.slice().sort(function(ca,ia){var qa=K(ca,ia);qa===w&&P.$raise(p(G,"ArgumentError"),"comparison of "+ca.$inspect()+" with "+ia.$inspect()+" failed");return y(qa,0)?1:("number"===typeof qa?0>qa:qa["$<"](0))?
-1:0})},qb.$$arity=0);a.def(E,"$sort!",nb=function(){var r=nb.$$p,K=r||w;r&&(nb.$$p=null);r&&(nb.$$p=null);r=K!==w?D(this.slice(),"sort",[],K.$to_proc()):this.slice().$sort();K=this.length=0;for(var P=r.length;K<P;K++)this.push(r[K]);return this},nb.$$arity=0);a.def(E,"$sort_by!",pb=function(){var r=pb.$$p,K=r||w,P;r&&(pb.$$p=null);r&&(pb.$$p=null);return K===w?D(this,"enum_for",["sort_by!"],(P=function(){return(null==P.$$s?this:P.$$s).$size()},P.$$s=this,P.$$arity=0,P)):this.$replace(D(this,"sort_by",
[],K.$to_proc()))},pb.$$arity=0);a.def(E,"$take",Gb=function(r){0>r&&this.$raise(p(G,"ArgumentError"));return this.slice(0,r)},Gb.$$arity=1);a.def(E,"$take_while",Ab=function(){var r=Ab.$$p,K=r||w;r&&(Ab.$$p=null);r&&(Ab.$$p=null);r=[];for(var P=0,ca=this.length,ia,qa;P<ca;P++){ia=this[P];qa=K(ia);if(!1===qa||qa===w)break;r.push(ia)}return r},Ab.$$arity=0);a.def(E,"$to_a",Jb=function(){return this},Jb.$$arity=0);a.alias(E,"to_ary","to_a");a.def(E,"$to_h",Bb=function(){var r=Bb.$$p,K=r||w;r&&(Bb.$$p=
null);r&&(Bb.$$p=null);r=this;K!==w&&(r=D(r,"map",[],K.$to_proc()));var P=r.length,ca=n([],{});for(K=0;K<P;K++){var ia=p(G,"Opal")["$coerce_to?"](r[K],p(G,"Array"),"to_ary");ia.$$is_array||this.$raise(p(G,"TypeError"),"wrong element type "+ia.$class()+" at "+K+" (expected array)");2!==ia.length&&this.$raise(p(G,"ArgumentError"),"wrong array length at "+K+" (expected 2, was "+ia.$length()+")");var qa=ia[0];ia=ia[1];u(ca,qa,ia)}return ca},Bb.$$arity=0);a.alias(E,"to_s","inspect");a.def(E,"$transpose",
Kb=function(){var r,K=w,P=w;if(d(this["$empty?"]()))return[];K=[];P=w;D(this,"each",[],(r=function(ca){var ia=null==r.$$s?this:r.$$s,qa,Qa=w;null==ca&&(ca=w);ca=d(p(G,"Array")["$==="](ca))?ca.$to_a():k(ca,p(G,"Array"),"to_ary").$to_a();P=d(Qa=P)?Qa:ca.length;d(ca.length["$!="](P))&&ia.$raise(p(G,"IndexError"),"element size differs ("+ca.length+" should be "+P+")");return D(ca.length,"times",[],(qa=function(fb){var Za;null==fb&&(fb=w);if(!d(Za=K["$[]"](fb))){Za=[fb,[]];D(K,"[]=",a.to_a(Za));var lb=
Za.length;lb="number"===typeof lb?lb-1:lb["$-"](1);Za=Za[lb]}return Za["$<<"](ca.$at(fb))},qa.$$s=ia,qa.$$arity=1,qa))},r.$$s=this,r.$$arity=1,r));return K},Kb.$$arity=0);a.alias(E,"union","|");a.def(E,"$uniq",Cb=function(){var r=Cb.$$p,K=r||w;r&&(Cb.$$p=null);r&&(Cb.$$p=null);r=n([],{});var P;if(K===w){var ca=0;for(P=this.length;ca<P;ca++){var ia=this[ca];void 0===m(r,ia)&&u(r,ia,ia)}}else for(ca=0,P=this.length;ca<P;ca++){ia=this[ca];var qa=l(K,ia);void 0===m(r,qa)&&u(r,qa,ia)}return b(r.$values(),
this.$class())},Cb.$$arity=0);a.def(E,"$uniq!",Db=function(){var r=Db.$$p,K=r||w;r&&(Db.$$p=null);r&&(Db.$$p=null);r=this.length;var P=n([],{}),ca;var ia=0;for(ca=r;ia<ca;ia++){var qa=this[ia];var Qa=K===w?qa:l(K,qa);void 0===m(P,Qa)?u(P,Qa,qa):(this.splice(ia,1),ca--,ia--)}return this.length===r?w:this},Db.$$arity=0);a.def(E,"$unshift",Lb=function(r){var K=a.slice.call(arguments,0,arguments.length);for(var P=K.length-1;0<=P;P--)this.unshift(K[P]);return this},Lb.$$arity=-1);a.alias(E,"prepend","unshift");
a.def(E,"$values_at",Mb=function(r){var K,P=w;var ca=a.slice.call(arguments,0,arguments.length);P=[];D(ca,"each",[],(K=function(ia){var qa=null==K.$$s?this:K.$$s,Qa,fb=w,Za=w;fb=w;null==ia&&(ia=w);if(d(ia["$is_a?"](p(G,"Range")))){fb=k(ia.$last(),p(G,"Integer"),"to_int");Za=k(ia.$first(),p(G,"Integer"),"to_int");if(0>Za)return Za+=qa.length,w;0>fb&&(fb+=qa.length);ia["$exclude_end?"]()&&fb--;return fb<Za?w:D(Za,"upto",[fb],(Qa=function(lb){var vb=null==Qa.$$s?this:Qa.$$s;null==lb&&(lb=w);return P["$<<"](vb.$at(lb))},
Qa.$$s=qa,Qa.$$arity=1,Qa))}fb=k(ia,p(G,"Integer"),"to_int");return P["$<<"](qa.$at(fb))},K.$$s=this,K.$$arity=1,K));return P},Mb.$$arity=-1);a.def(E,"$zip",Eb=function(r){var K=Eb.$$p,P=K||w,ca=w;K&&(Eb.$$p=null);K&&(Eb.$$p=null);K=a.slice.call(arguments,0,arguments.length);var ia=[],qa=this.length,Qa,fb;var Za=0;for(fb=K.length;Za<fb;Za++){var lb=K[Za];lb.$$is_array||(lb.$$is_enumerator?Infinity===lb.$size()?K[Za]=lb.$take(qa):K[Za]=lb.$to_a():K[Za]=(d(ca=p(G,"Opal")["$coerce_to?"](lb,p(G,"Array"),
"to_ary"))?ca:p(G,"Opal")["$coerce_to!"](lb,p(G,"Enumerator"),"to_enum","each")).$to_a())}for(Qa=0;Qa<qa;Qa++){ca=[this[Qa]];Za=0;for(fb=K.length;Za<fb;Za++)lb=K[Za][Qa],null==lb&&(lb=w),ca[Za+1]=lb;ia[Qa]=ca}if(P!==w){for(Qa=0;Qa<qa;Qa++)P(ia[Qa]);return w}return ia},Eb.$$arity=-1);a.defs(E,"$inherited",Nb=function(r){r.$$prototype.$to_a=function(){return this.slice(0,this.length)}},Nb.$$arity=1);a.def(E,"$instance_variables",Fb=function(){var r,K=Fb.$$p,P=w,ca=w,ia=w;K&&(Fb.$$p=null);ca=0;ia=arguments.length;
for(P=Array(ia);ca<ia;ca++)P[ca]=arguments[ca];return D(L(this,a.find_super_dispatcher(this,"instance_variables",Fb,!1,!0),"instance_variables",P,K),"reject",[],(r=function(qa){var Qa;null==qa&&(qa=w);return d(Qa=/^@\d+$/.test(qa))?Qa:qa["$=="]("@length")},r.$$s=this,r.$$arity=1,r))},Fb.$$arity=0);p(G,"Opal").$pristine(E.$singleton_class(),"allocate");p(G,"Opal").$pristine(E,"copy_instance_variables","initialize_dup");return(a.def(E,"$pack",Ob=function(r){a.slice.call(arguments,0,arguments.length);
return this.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},Ob.$$arity=-1),w)&&"pack"}(t[0],Array,t)};
Opal.modules["corelib/hash"]=function(a){function y(l,m){return"number"===typeof l&&"number"===typeof m?l>=m:l["$>="](m)}var J=a.top,t=[],w=a.nil,z=a.$$,p=a.klass,d=a.send,H=a.hash2,x=a.truthy;a.add_stubs("$require $include $coerce_to? $[] $merge! $allocate $raise $coerce_to! $each $fetch $>= $> $== $compare_by_identity $lambda? $abs $arity $enum_for $size $respond_to? $class $dig $new $inspect $map $to_proc $flatten $eql? $default $dup $default_proc $default_proc= $- $default= $to_h $proc".split(" "));J.$require("corelib/enumerable");
return function(l,$super,u){l=p(l,$super,"Hash");var c=[l].concat(u),k,I,e,n,L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za,Ca,Aa,bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha,Y,Q,Z,U,ha;l.$include(z(c,"Enumerable"));l.$$prototype.$$is_hash=!0;a.defs(l,"$[]",k=function(g){var C=a.slice.call(arguments,0,arguments.length);var N=C.length,aa;if(1===N){var v=z(c,"Opal")["$coerce_to?"](C["$[]"](0),z(c,"Hash"),"to_hash");if(v!==w)return this.$allocate()["$merge!"](v);
C=z(c,"Opal")["$coerce_to?"](C["$[]"](0),z(c,"Array"),"to_ary");C===w&&this.$raise(z(c,"ArgumentError"),"odd number of arguments for Hash");N=C.length;v=this.$allocate();for(aa=0;aa<N;aa++)if(C[aa].$$is_array)switch(C[aa].length){case 1:v.$store(C[aa][0],w);break;case 2:v.$store(C[aa][0],C[aa][1]);break;default:this.$raise(z(c,"ArgumentError"),"invalid number of elements ("+C[aa].length+" for 1..2)")}return v}0!==N%2&&this.$raise(z(c,"ArgumentError"),"odd number of arguments for Hash");v=this.$allocate();
for(aa=0;aa<N;aa+=2)v.$store(C[aa],C[aa+1]);return v},k.$$arity=-1);a.defs(l,"$allocate",I=function(){var g=new this.$$constructor;a.hash_init(g);g.$$none=w;g.$$proc=w;return g},I.$$arity=0);a.defs(l,"$try_convert",e=function(g){return z(c,"Opal")["$coerce_to?"](g,z(c,"Hash"),"to_hash")},e.$$arity=1);a.def(l,"$initialize",n=function(g){var C=n.$$p,N=C||w;C&&(n.$$p=null);C&&(n.$$p=null);void 0!==g&&N!==w&&this.$raise(z(c,"ArgumentError"),"wrong number of arguments (1 for 0)");this.$$none=void 0===
g?w:g;this.$$proc=N;return this},n.$$arity=-1);a.def(l,"$==",L=function(g){if(this===g)return!0;if(!g.$$is_hash||this.$$keys.length!==g.$$keys.length)return!1;for(var C=0,N=this.$$keys,aa=N.length,v,V;C<aa;C++)if(v=N[C],v.$$is_string?(V=this.$$smap[v],v=g.$$smap[v]):(V=v.value,v=a.hash_get(g,v.key)),void 0===v||!V["$eql?"](v))return!1;return!0},L.$$arity=1);a.def(l,"$>=",D=function(g){var C,N=w;g=z(c,"Opal")["$coerce_to!"](g,z(c,"Hash"),"to_hash");if(this.$$keys.length<g.$$keys.length)return!1;N=
!0;d(g,"each",[],(C=function(aa,v){var V=null==C.$$s?this:C.$$s;null==aa&&(aa=w);null==v&&(v=w);aa=V.$fetch(aa,null);if(null==aa||aa!==v)N=!1},C.$$s=this,C.$$arity=2,C));return N},D.$$arity=1);a.def(l,"$>",R=function(g){g=z(c,"Opal")["$coerce_to!"](g,z(c,"Hash"),"to_hash");return this.$$keys.length<=g.$$keys.length?!1:y(this,g)},R.$$arity=1);a.def(l,"$<",ka=function(g){g=z(c,"Opal")["$coerce_to!"](g,z(c,"Hash"),"to_hash");return"number"===typeof g&&"number"===typeof this?g>this:g["$>"](this)},ka.$$arity=
1);a.def(l,"$<=",da=function(g){g=z(c,"Opal")["$coerce_to!"](g,z(c,"Hash"),"to_hash");return y(g,this)},da.$$arity=1);a.def(l,"$[]",ma=function(g){var C=a.hash_get(this,g);return void 0!==C?C:this.$default(g)},ma.$$arity=1);a.def(l,"$[]=",b=function(g,C){a.hash_put(this,g,C);return C},b.$$arity=2);a.def(l,"$assoc",h=function(g){for(var C=0,N=this.$$keys,aa=N.length,v;C<aa;C++)if(v=N[C],v.$$is_string){if(v["$=="](g))return[v,this.$$smap[v]]}else if(v.key["$=="](g))return[v.key,v.value];return w},h.$$arity=
1);a.def(l,"$clear",f=function(){a.hash_init(this);return this},f.$$arity=0);a.def(l,"$clone",q=function(){var g=new this.$$class;a.hash_init(g);a.hash_clone(this,g);return g},q.$$arity=0);a.def(l,"$compact",A=function(){for(var g=a.hash(),C=0,N=this.$$keys,aa=N.length,v,V;C<aa;C++)v=N[C],v.$$is_string?V=this.$$smap[v]:(V=v.value,v=v.key),V!==w&&a.hash_put(g,v,V);return g},A.$$arity=0);a.def(l,"$compact!",E=function(){for(var g=!1,C=0,N=this.$$keys,aa=N.length,v,V;C<aa;C++)v=N[C],v.$$is_string?V=
this.$$smap[v]:(V=v.value,v=v.key),V===w&&void 0!==a.hash_delete(this,v)&&(g=!0,aa--,C--);return g?this:w},E.$$arity=0);a.def(l,"$compare_by_identity",G=function(){var g,C=this.$$keys;if(this.$$by_identity)return this;if(0===this.$$keys.length)return this.$$by_identity=!0,this;var N=H([],{}).$compare_by_identity();var aa=0;for(g=C.length;aa<g;aa++){var v=C[aa];v.$$is_string||(v=v.key);a.hash_put(N,v,a.hash_get(this,v))}this.$$by_identity=!0;this.$$map=N.$$map;this.$$smap=N.$$smap;return this},G.$$arity=
0);a.def(l,"$compare_by_identity?",M=function(){return!0===this.$$by_identity},M.$$arity=0);a.def(l,"$default",ba=function(g){return void 0!==g&&this.$$proc!==w&&void 0!==this.$$proc?this.$$proc.$call(this,g):void 0===this.$$none?w:this.$$none},ba.$$arity=-1);a.def(l,"$default=",ua=function(g){this.$$proc=w;return this.$$none=g},ua.$$arity=1);a.def(l,"$default_proc",Pa=function(){return void 0!==this.$$proc?this.$$proc:w},Pa.$$arity=0);a.def(l,"$default_proc=",xa=function(g){var C=g;C!==w&&(C=z(c,
"Opal")["$coerce_to!"](C,z(c,"Proc"),"to_proc"),C["$lambda?"]()&&2!==C.$arity().$abs()&&this.$raise(z(c,"TypeError"),"default_proc takes two arguments"));this.$$none=w;this.$$proc=C;return g},xa.$$arity=1);a.def(l,"$delete",Da=function(g){var C=Da.$$p,N=C||w;C&&(Da.$$p=null);C&&(Da.$$p=null);C=a.hash_delete(this,g);return void 0!==C?C:N!==w?a.yield1(N,g):w},Da.$$arity=1);a.def(l,"$delete_if",Ma=function(){var g=Ma.$$p,C=g||w,N;g&&(Ma.$$p=null);g&&(Ma.$$p=null);if(!x(C))return d(this,"enum_for",["delete_if"],
(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=0;for(var aa=this.$$keys,v=aa.length,V,oa;g<v;g++)V=aa[g],V.$$is_string?oa=this.$$smap[V]:(oa=V.value,V=V.key),oa=C(V,oa),!1!==oa&&oa!==w&&void 0!==a.hash_delete(this,V)&&(v--,g--);return this},Ma.$$arity=0);a.alias(l,"dup","clone");a.def(l,"$dig",na=function(g,C){var N=a.slice.call(arguments,1,arguments.length);var aa=this["$[]"](g);if(aa===w||0===N.length)return aa;x(aa["$respond_to?"]("dig"))||this.$raise(z(c,"TypeError"),
""+aa.$class()+" does not have #dig method");return d(aa,"dig",a.to_a(N))},na.$$arity=-2);a.def(l,"$each",S=function(){var g=S.$$p,C=g||w,N;g&&(S.$$p=null);g&&(S.$$p=null);if(!x(C))return d(this,"enum_for",["each"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=0;for(var aa=this.$$keys,v=aa.length,V,oa;g<v;g++)V=aa[g],V.$$is_string?oa=this.$$smap[V]:(oa=V.value,V=V.key),a.yield1(C,[V,oa]);return this},S.$$arity=0);a.def(l,"$each_key",sa=function(){var g=sa.$$p,
C=g||w,N;g&&(sa.$$p=null);g&&(sa.$$p=null);if(!x(C))return d(this,"enum_for",["each_key"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=0;for(var aa=this.$$keys,v=aa.length,V;g<v;g++)V=aa[g],C(V.$$is_string?V:V.key);return this},sa.$$arity=0);a.alias(l,"each_pair","each");a.def(l,"$each_value",ya=function(){var g=ya.$$p,C=g||w,N;g&&(ya.$$p=null);g&&(ya.$$p=null);if(!x(C))return d(this,"enum_for",["each_value"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},
N.$$s=this,N.$$arity=0,N));g=0;for(var aa=this.$$keys,v=aa.length,V;g<v;g++)V=aa[g],C(V.$$is_string?this.$$smap[V]:V.value);return this},ya.$$arity=0);a.def(l,"$empty?",pa=function(){return 0===this.$$keys.length},pa.$$arity=0);a.alias(l,"eql?","==");a.def(l,"$fetch",fa=function(g,C){var N=fa.$$p,aa=N||w;N&&(fa.$$p=null);N&&(fa.$$p=null);N=a.hash_get(this,g);return void 0!==N?N:aa!==w?aa(g):void 0!==C?C:this.$raise(z(c,"KeyError").$new("key not found: "+g.$inspect(),H(["key","receiver"],{key:g,receiver:this})))},
fa.$$arity=-2);a.def(l,"$fetch_values",F=function(g){var C=F.$$p,N=C||w,aa;C&&(F.$$p=null);C&&(F.$$p=null);C=a.slice.call(arguments,0,arguments.length);return d(C,"map",[],(aa=function(v){var V=null==aa.$$s?this:aa.$$s;null==v&&(v=w);return d(V,"fetch",[v],N.$to_proc())},aa.$$s=this,aa.$$arity=1,aa))},F.$$arity=-1);a.def(l,"$flatten",T=function(g){null==g&&(g=1);g=z(c,"Opal")["$coerce_to!"](g,z(c,"Integer"),"to_int");for(var C=[],N=0,aa=this.$$keys,v=aa.length,V,oa;N<v;N++)V=aa[N],V.$$is_string?oa=
this.$$smap[V]:(oa=V.value,V=V.key),C.push(V),oa.$$is_array?1===g?C.push(oa):C=C.concat(oa.$flatten(g-2)):C.push(oa);return C},T.$$arity=-1);a.def(l,"$has_key?",ja=function(g){return void 0!==a.hash_get(this,g)},ja.$$arity=1);a.def(l,"$has_value?",va=function(g){for(var C=0,N=this.$$keys,aa=N.length,v;C<aa;C++)if(v=N[C],(v.$$is_string?this.$$smap[v]:v.value)["$=="](g))return!0;return!1},va.$$arity=1);a.def(l,"$hash",ea=function(){var g=void 0===a.hash_ids,C=this.$object_id(),N=["Hash"];try{g&&(a.hash_ids=
Object.create(null));if(a[C])return"self";for(oa in a.hash_ids){var aa=a.hash_ids[oa];if(this["$eql?"](aa))return"self"}a.hash_ids[C]=this;C=0;for(var v=this.$$keys,V=v.length;C<V;C++){var oa=v[C];oa.$$is_string?N.push([oa,this.$$smap[oa].$hash()]):N.push([oa.key_hash,oa.value.$hash()])}return N.sort().join()}finally{g&&(a.hash_ids=void 0)}},ea.$$arity=0);a.alias(l,"include?","has_key?");a.def(l,"$index",wa=function(g){for(var C=0,N=this.$$keys,aa=N.length,v,V;C<aa;C++)if(v=N[C],v.$$is_string?V=this.$$smap[v]:
(V=v.value,v=v.key),V["$=="](g))return v;return w},wa.$$arity=1);a.def(l,"$indexes",Ga=function(g){var C=a.slice.call(arguments,0,arguments.length);for(var N=[],aa=0,v=C.length,V;aa<v;aa++)V=C[aa],V=a.hash_get(this,V),void 0===V?N.push(this.$default()):N.push(V);return N},Ga.$$arity=-1);a.alias(l,"indices","indexes");var la;a.def(l,"$inspect",Fa=function(){var g=void 0===la,C=this.$object_id(),N=[];try{g&&(la={});if(la.hasOwnProperty(C))return"{...}";la[C]=!0;C=0;for(var aa=this.$$keys,v=aa.length,
V,oa;C<v;C++)V=aa[C],V.$$is_string?oa=this.$$smap[V]:(oa=V.value,V=V.key),N.push(V.$inspect()+"=>"+oa.$inspect());return"{"+N.join(", ")+"}"}finally{g&&(la=void 0)}},Fa.$$arity=0);a.def(l,"$invert",Ra=function(){for(var g=a.hash(),C=0,N=this.$$keys,aa=N.length,v,V;C<aa;C++)v=N[C],v.$$is_string?V=this.$$smap[v]:(V=v.value,v=v.key),a.hash_put(g,V,v);return g},Ra.$$arity=0);a.def(l,"$keep_if",Ta=function(){var g=Ta.$$p,C=g||w,N;g&&(Ta.$$p=null);g&&(Ta.$$p=null);if(!x(C))return d(this,"enum_for",["keep_if"],
(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=0;for(var aa=this.$$keys,v=aa.length,V,oa;g<v;g++)V=aa[g],V.$$is_string?oa=this.$$smap[V]:(oa=V.value,V=V.key),oa=C(V,oa),!1!==oa&&oa!==w||void 0===a.hash_delete(this,V)||(v--,g--);return this},Ta.$$arity=0);a.alias(l,"key","index");a.alias(l,"key?","has_key?");a.def(l,"$keys",Ja=function(){for(var g=[],C=0,N=this.$$keys,aa=N.length,v;C<aa;C++)v=N[C],v.$$is_string?g.push(v):g.push(v.key);return g},Ja.$$arity=0);a.def(l,
"$length",kb=function(){return this.$$keys.length},kb.$$arity=0);a.alias(l,"member?","has_key?");a.def(l,"$merge",jb=function(g){var C=jb.$$p,N=C||w;C&&(jb.$$p=null);C&&(jb.$$p=null);return d(this.$dup(),"merge!",[g],N.$to_proc())},jb.$$arity=1);a.def(l,"$merge!",W=function(g){var C=W.$$p,N=C||w;C&&(W.$$p=null);C&&(W.$$p=null);g.$$is_hash||(g=z(c,"Opal")["$coerce_to!"](g,z(c,"Hash"),"to_hash"));var aa=g.$$keys,v=aa.length;if(N===w){for(C=0;C<v;C++){var V=aa[C];if(V.$$is_string)var oa=g.$$smap[V];
else oa=V.value,V=V.key;a.hash_put(this,V,oa)}return this}for(C=0;C<v;C++){V=aa[C];V.$$is_string?oa=g.$$smap[V]:(oa=V.value,V=V.key);var La=a.hash_get(this,V);void 0===La?a.hash_put(this,V,oa):a.hash_put(this,V,N(V,La,oa))}return this},W.$$arity=1);a.def(l,"$rassoc",za=function(g){for(var C=0,N=this.$$keys,aa=N.length,v,V;C<aa;C++)if(v=N[C],v.$$is_string?V=this.$$smap[v]:(V=v.value,v=v.key),V["$=="](g))return[v,V];return w},za.$$arity=1);a.def(l,"$rehash",Ca=function(){a.hash_rehash(this);return this},
Ca.$$arity=0);a.def(l,"$reject",Aa=function(){var g=Aa.$$p,C=g||w,N;g&&(Aa.$$p=null);g&&(Aa.$$p=null);if(!x(C))return d(this,"enum_for",["reject"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=a.hash();for(var aa=0,v=this.$$keys,V=v.length,oa,La,ib;aa<V;aa++)oa=v[aa],oa.$$is_string?La=this.$$smap[oa]:(La=oa.value,oa=oa.key),ib=C(oa,La),!1!==ib&&ib!==w||a.hash_put(g,oa,La);return g},Aa.$$arity=0);a.def(l,"$reject!",bb=function(){var g=bb.$$p,C=g||w,N;g&&(bb.$$p=
null);g&&(bb.$$p=null);if(!x(C))return d(this,"enum_for",["reject!"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=!1;for(var aa=0,v=this.$$keys,V=v.length,oa,La;aa<V;aa++)oa=v[aa],oa.$$is_string?La=this.$$smap[oa]:(La=oa.value,oa=oa.key),La=C(oa,La),!1!==La&&La!==w&&void 0!==a.hash_delete(this,oa)&&(g=!0,V--,aa--);return g?this:w},bb.$$arity=0);a.def(l,"$replace",db=function(g){g=z(c,"Opal")["$coerce_to!"](g,z(c,"Hash"),"to_hash");a.hash_init(this);var C=0;for(var N=
g.$$keys,aa=N.length,v,V;C<aa;C++)v=N[C],v.$$is_string?V=g.$$smap[v]:(V=v.value,v=v.key),a.hash_put(this,v,V);x(g.$default_proc())?(C=[g.$default_proc()],d(this,"default_proc=",a.to_a(C))):(C=[g.$default()],d(this,"default=",a.to_a(C)));g=C;C=C.length;C="number"===typeof C?C-1:C["$-"](1);g[C];return this},db.$$arity=1);a.def(l,"$select",ab=function(){var g=ab.$$p,C=g||w,N;g&&(ab.$$p=null);g&&(ab.$$p=null);if(!x(C))return d(this,"enum_for",["select"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},
N.$$s=this,N.$$arity=0,N));g=a.hash();for(var aa=0,v=this.$$keys,V=v.length,oa,La,ib;aa<V;aa++)oa=v[aa],oa.$$is_string?La=this.$$smap[oa]:(La=oa.value,oa=oa.key),ib=C(oa,La),!1!==ib&&ib!==w&&a.hash_put(g,oa,La);return g},ab.$$arity=0);a.def(l,"$select!",Wa=function(){var g=Wa.$$p,C=g||w,N;g&&(Wa.$$p=null);g&&(Wa.$$p=null);if(!x(C))return d(this,"enum_for",["select!"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=w;for(var aa=0,v=this.$$keys,V=v.length,oa,La;aa<
V;aa++)if(oa=v[aa],oa.$$is_string?La=this.$$smap[oa]:(La=oa.value,oa=oa.key),La=C(oa,La),!1===La||La===w)void 0!==a.hash_delete(this,oa)&&(V--,aa--),g=this;return g},Wa.$$arity=0);a.alias(l,"filter","select");a.alias(l,"filter!","select!");a.def(l,"$shift",Ba=function(){var g=this.$$keys;return 0<g.length?(g=g[0],g=g.$$is_string?g:g.key,[g,a.hash_delete(this,g)]):this.$default(w)},Ba.$$arity=0);a.alias(l,"size","length");a.def(l,"$slice",ta=function(g){var C=a.slice.call(arguments,0,arguments.length);
for(var N=a.hash(),aa=0,v=C.length;aa<v;aa++){var V=C[aa],oa=a.hash_get(this,V);void 0!==oa&&a.hash_put(N,V,oa)}return N},ta.$$arity=-1);a.alias(l,"store","[]=");a.def(l,"$to_a",Na=function(){for(var g=[],C=0,N=this.$$keys,aa=N.length,v,V;C<aa;C++)v=N[C],v.$$is_string?V=this.$$smap[v]:(V=v.value,v=v.key),g.push([v,V]);return g},Na.$$arity=0);a.def(l,"$to_h",Sa=function(){var g=Sa.$$p,C=g||w;g&&(Sa.$$p=null);g&&(Sa.$$p=null);if(C!==w)return d(this,"map",[],C.$to_proc()).$to_h();if(this.$$class===a.Hash)return this;
g=new a.Hash;a.hash_init(g);a.hash_clone(this,g);return g},Sa.$$arity=0);a.def(l,"$to_hash",Ya=function(){return this},Ya.$$arity=0);a.def(l,"$to_proc",Ha=function(){var g;return d(this,"proc",[],(g=function(C){var N=null==g.$$s?this:g.$$s;null==C&&N.$raise(z(c,"ArgumentError"),"no key given");return N["$[]"](C)},g.$$s=this,g.$$arity=-1,g))},Ha.$$arity=0);a.alias(l,"to_s","inspect");a.def(l,"$transform_keys",Y=function(){var g=Y.$$p,C=g||w,N;g&&(Y.$$p=null);g&&(Y.$$p=null);if(!x(C))return d(this,
"enum_for",["transform_keys"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=a.hash();for(var aa=0,v=this.$$keys,V=v.length,oa,La;aa<V;aa++)oa=v[aa],oa.$$is_string?La=this.$$smap[oa]:(La=oa.value,oa=oa.key),oa=a.yield1(C,oa),a.hash_put(g,oa,La);return g},Y.$$arity=0);a.def(l,"$transform_keys!",Q=function(){var g=Q.$$p,C=g||w,N;g&&(Q.$$p=null);g&&(Q.$$p=null);if(!x(C))return d(this,"enum_for",["transform_keys!"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},
N.$$s=this,N.$$arity=0,N));g=a.slice.call(this.$$keys);var aa,v=g.length;for(aa=0;aa<v;aa++){var V=g[aa];if(V.$$is_string)var oa=this.$$smap[V];else oa=V.value,V=V.key;var La=a.yield1(C,V);a.hash_delete(this,V);a.hash_put(this,La,oa)}return this},Q.$$arity=0);a.def(l,"$transform_values",Z=function(){var g=Z.$$p,C=g||w,N;g&&(Z.$$p=null);g&&(Z.$$p=null);if(!x(C))return d(this,"enum_for",["transform_values"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=a.hash();
for(var aa=0,v=this.$$keys,V=v.length,oa,La;aa<V;aa++)oa=v[aa],oa.$$is_string?La=this.$$smap[oa]:(La=oa.value,oa=oa.key),La=a.yield1(C,La),a.hash_put(g,oa,La);return g},Z.$$arity=0);a.def(l,"$transform_values!",U=function(){var g=U.$$p,C=g||w,N;g&&(U.$$p=null);g&&(U.$$p=null);if(!x(C))return d(this,"enum_for",["transform_values!"],(N=function(){return(null==N.$$s?this:N.$$s).$size()},N.$$s=this,N.$$arity=0,N));g=0;for(var aa=this.$$keys,v=aa.length,V,oa;g<v;g++)V=aa[g],V.$$is_string?oa=this.$$smap[V]:
(oa=V.value,V=V.key),oa=a.yield1(C,oa),a.hash_put(this,V,oa);return this},U.$$arity=0);a.alias(l,"update","merge!");a.alias(l,"value?","has_value?");a.alias(l,"values_at","indexes");return(a.def(l,"$values",ha=function(){for(var g=[],C=0,N=this.$$keys,aa=N.length,v;C<aa;C++)v=N[C],v.$$is_string?g.push(this.$$smap[v]):g.push(v.value);return g},ha.$$arity=0),w)&&"values"}(t[0],null,t)};
Opal.modules["corelib/number"]=function(a){function y(n,L){return"number"===typeof n&&"number"===typeof L?n>L:n["$>"](L)}function J(n,L){return"number"===typeof n&&"number"===typeof L?n<L:n["$<"](L)}function t(n,L){return"number"===typeof n&&"number"===typeof L?n+L:n["$+"](L)}function w(n,L){return"number"===typeof n&&"number"===typeof L?n-L:n["$-"](L)}function z(n,L){return"number"===typeof n&&"number"===typeof L?n/L:n["$/"](L)}function p(n,L){return"number"===typeof n&&"number"===typeof L?n*L:n["$*"](L)}
var d=a.top,H=[],x=a.nil,l=a.$$$,m=a.$$,u=a.klass,c=a.truthy,k=a.send2,I=a.send,e=a.hash2;a.add_stubs("$require $bridge $raise $name $class $Float $respond_to? $coerce_to! $__coerced__ $=== $! $> $** $new $< $to_f $== $nan? $infinite? $enum_for $+ $- $gcd $lcm $% $/ $frexp $to_i $ldexp $rationalize $* $<< $to_r $truncate $-@ $size $<= $>= $<=> $compare $any?".split(" "));d.$require("corelib/numeric");(function(n,$super,D){n=u(n,$super,"Number");var R=[n].concat(D),ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,
xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za,Ca,Aa,bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha,Y,Q,Z,U,ha,la,g,C,N,aa,v,V,oa,La,ib,ob,mb,sb,tb,wb,xb,ub;m(R,"Opal").$bridge(Number,n);a.defineProperty(n.$$prototype,"$$is_number",!0);n.$$is_number_class=!0;(function(X,Oa){var cb=[X].concat(Oa),B;a.def(X,"$allocate",B=function(){return this.$raise(m(cb,"TypeError"),"allocator undefined for "+this.$name())},B.$$arity=0);a.udef(X,"$new");return x})(a.get_singleton_class(n),R);a.def(n,"$coerce",
ka=function(X){if(X!==x){if(X.$$is_string)return[this.$Float(X),this];if(X["$respond_to?"]("to_f"))return[m(R,"Opal")["$coerce_to!"](X,m(R,"Float"),"to_f"),this];if(X.$$is_number)return[X,this]}this.$raise(m(R,"TypeError"),"can't convert "+X.$class()+" into Float")},ka.$$arity=1);a.def(n,"$__id__",da=function(){return 2*this+1},da.$$arity=0);a.alias(n,"object_id","__id__");a.def(n,"$+",ma=function(X){return X.$$is_number?this+X:this.$__coerced__("+",X)},ma.$$arity=1);a.def(n,"$-",b=function(X){return X.$$is_number?
this-X:this.$__coerced__("-",X)},b.$$arity=1);a.def(n,"$*",h=function(X){return X.$$is_number?this*X:this.$__coerced__("*",X)},h.$$arity=1);a.def(n,"$/",f=function(X){return X.$$is_number?this/X:this.$__coerced__("/",X)},f.$$arity=1);a.alias(n,"fdiv","/");a.def(n,"$%",q=function(X){if(X.$$is_number){if(-Infinity==X)return X;if(0==X)this.$raise(m(R,"ZeroDivisionError"),"divided by 0");else return 0>X||0>this?(this%X+X)%X:this%X}else return this.$__coerced__("%",X)},q.$$arity=1);a.def(n,"$&",A=function(X){return X.$$is_number?
this&X:this.$__coerced__("&",X)},A.$$arity=1);a.def(n,"$|",E=function(X){return X.$$is_number?this|X:this.$__coerced__("|",X)},E.$$arity=1);a.def(n,"$^",G=function(X){return X.$$is_number?this^X:this.$__coerced__("^",X)},G.$$arity=1);a.def(n,"$<",M=function(X){return X.$$is_number?this<X:this.$__coerced__("<",X)},M.$$arity=1);a.def(n,"$<=",ba=function(X){return X.$$is_number?this<=X:this.$__coerced__("<=",X)},ba.$$arity=1);a.def(n,"$>",ua=function(X){return X.$$is_number?this>X:this.$__coerced__(">",
X)},ua.$$arity=1);a.def(n,"$>=",Pa=function(X){return X.$$is_number?this>=X:this.$__coerced__(">=",X)},Pa.$$arity=1);a.def(n,"$<=>",xa=function(X){try{return X.$$is_number?isNaN(this)||isNaN(X)?x:this>X?1:this<X?-1:0:this.$__coerced__("<=>",X)}catch(Oa){if(a.rescue(Oa,[m(R,"ArgumentError")]))try{return x}finally{a.pop_exception()}else throw Oa;}},xa.$$arity=1);a.def(n,"$<<",Da=function(X){X=m(R,"Opal")["$coerce_to!"](X,m(R,"Integer"),"to_int");return 0<X?this<<X:this>>-X},Da.$$arity=1);a.def(n,"$>>",
Ma=function(X){X=m(R,"Opal")["$coerce_to!"](X,m(R,"Integer"),"to_int");return 0<X?this>>X:this<<-X},Ma.$$arity=1);a.def(n,"$[]",na=function(X){X=m(R,"Opal")["$coerce_to!"](X,m(R,"Integer"),"to_int");return 0>X?0:32<=X?0>this?1:0:this>>X&1},na.$$arity=1);a.def(n,"$+@",S=function(){return+this},S.$$arity=0);a.def(n,"$-@",sa=function(){return-this},sa.$$arity=0);a.def(n,"$~",ya=function(){return~this},ya.$$arity=0);a.def(n,"$**",pa=function(X){var Oa=x,cb=x,B=x;return c(m(R,"Integer")["$==="](X))?c(c(Oa=
m(R,"Integer")["$==="](this)["$!"]())?Oa:y(X,0))?Math.pow(this,X):m(R,"Rational").$new(this,1)["$**"](X):c(c(cb=J(this,0))?c(B=m(R,"Float")["$==="](X))?B:m(R,"Rational")["$==="](X):cb)?m(R,"Complex").$new(this,0)["$**"](X.$to_f()):c(null!=X.$$is_number)?Math.pow(this,X):this.$__coerced__("**",X)},pa.$$arity=1);a.def(n,"$===",fa=function(X){return X.$$is_number?this.valueOf()===X.valueOf():X["$respond_to?"]("==")?X["$=="](this):!1},fa.$$arity=1);a.def(n,"$==",F=function(X){return X.$$is_number?this.valueOf()===
X.valueOf():X["$respond_to?"]("==")?X["$=="](this):!1},F.$$arity=1);a.def(n,"$abs",T=function(){return Math.abs(this)},T.$$arity=0);a.def(n,"$abs2",ja=function(){return Math.abs(this*this)},ja.$$arity=0);a.def(n,"$allbits?",va=function(X){X=m(R,"Opal")["$coerce_to!"](X,m(R,"Integer"),"to_int");return(this&X)==X},va.$$arity=1);a.def(n,"$anybits?",ea=function(X){X=m(R,"Opal")["$coerce_to!"](X,m(R,"Integer"),"to_int");return 0!==(this&X)},ea.$$arity=1);a.def(n,"$angle",wa=function(){return c(this["$nan?"]())?
this:0==this?0<1/this?0:Math.PI:0>this?Math.PI:0},wa.$$arity=0);a.alias(n,"arg","angle");a.alias(n,"phase","angle");a.def(n,"$bit_length",Ga=function(){c(m(R,"Integer")["$==="](this))||this.$raise(m(R,"NoMethodError").$new("undefined method `bit_length` for "+this+":Float","bit_length"));if(0===this||-1===this)return 0;for(var X=0,Oa=0>this?~this:this;0!=Oa;)X+=1,Oa>>>=1;return X},Ga.$$arity=0);a.def(n,"$ceil",Fa=function(X){null==X&&(X=0);var Oa=this.$to_f();if(0===Oa%1&&0<=X)return Oa;X=Math.pow(10,
X);X=Math.ceil(Oa*X)/X;0===Oa%1&&(X=Math.round(X));return X},Fa.$$arity=-1);a.def(n,"$chr",Ra=function(){return String.fromCharCode(this)},Ra.$$arity=-1);a.def(n,"$denominator",Ta=function(){var X=Ta.$$p,Oa=x,cb;X&&(Ta.$$p=null);var B=0;var O=arguments.length;for(cb=Array(O);B<O;B++)cb[B]=arguments[B];return c(c(Oa=this["$nan?"]())?Oa:this["$infinite?"]())?1:k(this,a.find_super_dispatcher(this,"denominator",Ta,!1,!0),"denominator",cb,X)},Ta.$$arity=0);a.def(n,"$downto",Ja=function(X){var Oa=Ja.$$p,
cb=Oa||x,B;Oa&&(Ja.$$p=null);Oa&&(Ja.$$p=null);if(cb===x)return I(this,"enum_for",["downto",X],(B=function(){var O=null==B.$$s?this:B.$$s;c(m(R,"Numeric")["$==="](X))||O.$raise(m(R,"ArgumentError"),"comparison of "+O.$class()+" with "+X.$class()+" failed");return c(y(X,O))?0:t(w(O,X),1)},B.$$s=this,B.$$arity=0,B));X.$$is_number||this.$raise(m(R,"ArgumentError"),"comparison of "+this.$class()+" with "+X.$class()+" failed");for(Oa=this;Oa>=X;Oa--)cb(Oa);return this},Ja.$$arity=1);a.alias(n,"eql?","==");
a.def(n,"$equal?",kb=function(X){var Oa;return c(Oa=this["$=="](X))?Oa:isNaN(this)&&isNaN(X)},kb.$$arity=1);a.def(n,"$even?",jb=function(){return 0===this%2},jb.$$arity=0);a.def(n,"$floor",W=function(X){null==X&&(X=0);var Oa=this.$to_f();if(0===Oa%1&&0<=X)return Oa;X=Math.pow(10,X);X=Math.floor(Oa*X)/X;0===Oa%1&&(X=Math.round(X));return X},W.$$arity=-1);a.def(n,"$gcd",za=function(X){c(m(R,"Integer")["$==="](X))||this.$raise(m(R,"TypeError"),"not an integer");var Oa=Math.abs(this);for(X=Math.abs(X);0<
Oa;){var cb=Oa;Oa=X%Oa;X=cb}return X},za.$$arity=1);a.def(n,"$gcdlcm",Ca=function(X){return[this.$gcd(X),this.$lcm(X)]},Ca.$$arity=1);a.def(n,"$integer?",Aa=function(){return 0===this%1},Aa.$$arity=0);a.def(n,"$is_a?",bb=function(X){var Oa=bb.$$p,cb=x,B=x,O=x,ra;Oa&&(bb.$$p=null);var Ia=0;var Ea=arguments.length;for(ra=Array(Ea);Ia<Ea;Ia++)ra[Ia]=arguments[Ia];return c(c(cb=X["$=="](m(R,"Integer")))?m(R,"Integer")["$==="](this):cb)||c(c(B=X["$=="](m(R,"Integer")))?m(R,"Integer")["$==="](this):B)||
c(c(O=X["$=="](m(R,"Float")))?m(R,"Float")["$==="](this):O)?!0:k(this,a.find_super_dispatcher(this,"is_a?",bb,!1,!0),"is_a?",ra,Oa)},bb.$$arity=1);a.alias(n,"kind_of?","is_a?");a.def(n,"$instance_of?",db=function(X){var Oa=db.$$p,cb=x,B=x,O=x,ra;Oa&&(db.$$p=null);var Ia=0;var Ea=arguments.length;for(ra=Array(Ea);Ia<Ea;Ia++)ra[Ia]=arguments[Ia];return c(c(cb=X["$=="](m(R,"Integer")))?m(R,"Integer")["$==="](this):cb)||c(c(B=X["$=="](m(R,"Integer")))?m(R,"Integer")["$==="](this):B)||c(c(O=X["$=="](m(R,
"Float")))?m(R,"Float")["$==="](this):O)?!0:k(this,a.find_super_dispatcher(this,"instance_of?",db,!1,!0),"instance_of?",ra,Oa)},db.$$arity=1);a.def(n,"$lcm",ab=function(X){c(m(R,"Integer")["$==="](X))||this.$raise(m(R,"TypeError"),"not an integer");return 0==this||0==X?0:Math.abs(this*X/this.$gcd(X))},ab.$$arity=1);a.alias(n,"magnitude","abs");a.alias(n,"modulo","%");a.def(n,"$next",Wa=function(){return this+1},Wa.$$arity=0);a.def(n,"$nobits?",Ba=function(X){X=m(R,"Opal")["$coerce_to!"](X,m(R,"Integer"),
"to_int");return 0==(this&X)},Ba.$$arity=1);a.def(n,"$nonzero?",ta=function(){return 0==this?x:this},ta.$$arity=0);a.def(n,"$numerator",Na=function(){var X=Na.$$p,Oa=x,cb;X&&(Na.$$p=null);var B=0;var O=arguments.length;for(cb=Array(O);B<O;B++)cb[B]=arguments[B];return c(c(Oa=this["$nan?"]())?Oa:this["$infinite?"]())?this:k(this,a.find_super_dispatcher(this,"numerator",Na,!1,!0),"numerator",cb,X)},Na.$$arity=0);a.def(n,"$odd?",Sa=function(){return 0!==this%2},Sa.$$arity=0);a.def(n,"$ord",Ya=function(){return this},
Ya.$$arity=0);a.def(n,"$pow",Ha=function(X,Oa){0==this&&this.$raise(m(R,"ZeroDivisionError"),"divided by 0");if(void 0===Oa)return this["$**"](X);m(R,"Integer")["$==="](X)||this.$raise(m(R,"TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer");0>X&&this.$raise(m(R,"TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified");m(R,"Integer")["$==="](Oa)||this.$raise(m(R,"TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers");
0===Oa&&this.$raise(m(R,"ZeroDivisionError"),"divided by 0");return this["$**"](X)["$%"](Oa)},Ha.$$arity=-2);a.def(n,"$pred",Y=function(){return this-1},Y.$$arity=0);a.def(n,"$quo",Q=function(X){var Oa=Q.$$p,cb;Oa&&(Q.$$p=null);var B=0;var O=arguments.length;for(cb=Array(O);B<O;B++)cb[B]=arguments[B];return c(m(R,"Integer")["$==="](this))?k(this,a.find_super_dispatcher(this,"quo",Q,!1,!0),"quo",cb,Oa):z(this,X)},Q.$$arity=1);a.def(n,"$rationalize",Z=function(X){1<arguments.length&&this.$raise(m(R,
"ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)");if(c(m(R,"Integer")["$==="](this)))return m(R,"Rational").$new(this,1);if(c(this["$infinite?"]()))return this.$raise(m(R,"FloatDomainError"),"Infinity");if(c(this["$nan?"]()))return this.$raise(m(R,"FloatDomainError"),"NaN");if(c(null==X)){var Oa=m(R,"Math").$frexp(this);var cb=a.to_ary(Oa);var B=null==cb[0]?x:cb[0];cb=null==cb[1]?x:cb[1];Oa;B=m(R,"Math").$ldexp(B,l(m(R,"Float"),"MANT_DIG")).$to_i();cb=w(cb,l(m(R,"Float"),
"MANT_DIG"));return m(R,"Rational").$new(p(2,B),1["$<<"](w(1,cb))).$rationalize(m(R,"Rational").$new(1,1["$<<"](w(1,cb))))}return this.$to_r().$rationalize(X)},Z.$$arity=-1);a.def(n,"$remainder",U=function(X){return w(this,p(X,z(this,X).$truncate()))},U.$$arity=1);a.def(n,"$round",ha=function(X){var Oa,cb,B=cb=Oa=x;if(c(m(R,"Integer")["$==="](this))){if(c(null==X))return this;c(c(Oa=m(R,"Float")["$==="](X))?X["$infinite?"]():Oa)&&this.$raise(m(R,"RangeError"),"Infinity");X=m(R,"Opal")["$coerce_to!"](X,
m(R,"Integer"),"to_int");c(J(X,l(m(R,"Integer"),"MIN")))&&this.$raise(m(R,"RangeError"),"out of bounds");if(c(0<=X))return this;X=X["$-@"]();if(.415241*X-.125>this.$size())return 0;X=Math.pow(10,X);X*=Math.floor((Math.abs(this)+X/2)/X);return 0>this?-X:X}c(c(cb=this["$nan?"]())?null==X:cb)&&this.$raise(m(R,"FloatDomainError"),"NaN");X=m(R,"Opal")["$coerce_to!"](X||0,m(R,"Integer"),"to_int");if(c("number"===typeof X?0>=X:X["$<="](0)))c(this["$nan?"]())?this.$raise(m(R,"RangeError"),"NaN"):c(this["$infinite?"]())&&
this.$raise(m(R,"FloatDomainError"),"Infinity");else{if(X["$=="](0))return Math.round(this);if(c(c(B=this["$nan?"]())?B:this["$infinite?"]()))return this}cb=m(R,"Math").$frexp(this);Oa=a.to_ary(cb);Oa=null==Oa[1]?x:Oa[1];cb;cb=w(t(l(m(R,"Float"),"DIG"),2),c(y(Oa,0))?z(Oa,4):w(z(Oa,3),1));cb="number"===typeof X&&"number"===typeof cb?X>=cb:X["$>="](cb);return c(cb)?this:c(J(X,(c(y(Oa,0))?t(z(Oa,3),1):z(Oa,4))["$-@"]()))?0:Math.round(this*Math.pow(10,X))/Math.pow(10,X)},ha.$$arity=-1);a.def(n,"$step",
la=function(X,Oa,cb){function B(){void 0!==gb&&(Ua=gb);void 0===Ua&&(Ua=x);Xa===x&&hb.$raise(m(R,"TypeError"),"step must be numeric");0===Xa&&hb.$raise(m(R,"ArgumentError"),"step can't be 0");void 0!==qb&&(Xa=qb);if(Xa===x||null==Xa)Xa=1;var nb=Xa["$<=>"](0);nb===x&&hb.$raise(m(R,"ArgumentError"),"0 can't be coerced into "+Xa.$class());if(Ua===x||null==Ua)Ua=0<nb?l(m(R,"Float"),"INFINITY"):l(m(R,"Float"),"INFINITY")["$-@"]();m(R,"Opal").$compare(hb,Ua)}function O(){if(0<Xa&&hb>Ua||0>Xa&&hb<Ua)return 0;
if(Infinity===Xa||-Infinity===Xa)return 1;var nb=Math.abs,pb=Math.floor;nb=(nb(hb)+nb(Ua)+nb(Ua-hb))/nb(Xa)*l(m(R,"Float"),"EPSILON");if(Infinity===nb||-Infinity===nb)return 0;.5<nb&&(nb=.5);return pb((Ua-hb)/Xa+nb)+1}function ra(){B();if(0===Xa)return Infinity;if(0!==Xa%1)return O();if(0<Xa&&hb>Ua||0>Xa&&hb<Ua)return 0;var nb=Math.ceil,pb=Math.abs,Gb=pb(hb-Ua)+1;pb=pb(Xa);return nb(Gb/pb)}var Ia=la.$$p,Ea=Ia||x,Ka,Va,hb=this,eb=Ka=x;Ia&&(la.$$p=null);Ia&&(la.$$p=null);Ia=a.slice.call(arguments,0,
arguments.length);Ka=a.extract_kwargs(Ia);if(null==Ka)Ka=e([],{});else if(!Ka.$$is_hash)throw a.ArgumentError.$new("expected kwargs");if(0<Ia.length){var Ua=Ia[0];Ia.splice(0,1)}if(0<Ia.length){var Xa=Ia[0];Ia.splice(0,1)}var gb=Ka.$$smap.to;var qb=Ka.$$smap.by;void 0!==Ua&&void 0!==gb&&hb.$raise(m(R,"ArgumentError"),"to is given twice");void 0!==Xa&&void 0!==qb&&hb.$raise(m(R,"ArgumentError"),"step is given twice");if(Ea===x)return Ka=[],eb=e([],{}),void 0!==Ua&&Ka.push(Ua),void 0!==Xa&&Ka.push(Xa),
void 0!==gb&&a.hash_put(eb,"to",gb),void 0!==qb&&a.hash_put(eb,"by",qb),eb["$any?"]()&&Ka.push(eb),I(hb,"enum_for",["step"].concat(a.to_a(Ka)),(Va=function(){return ra()},Va.$$s=hb,Va.$$arity=0,Va));B();if(0===Xa)for(;;)Ea(hb);if(0!==hb%1||0!==Ua%1||0!==Xa%1){if(Va=O(),0<Va)if(Infinity===Xa||-Infinity===Xa)Ea(hb);else if(Ia=0,0<Xa)for(;Ia<Va;)Ka=Ia*Xa+hb,Ua<Ka&&(Ka=Ua),Ea(Ka),Ia+=1;else for(;Ia<Va;)Ka=Ia*Xa+hb,Ua>Ka&&(Ka=Ua),Ea(Ka),Ia+=1}else if(Va=hb,0<Xa)for(;Va<=Ua;)Ea(Va),Va+=Xa;else for(;Va>=
Ua;)Ea(Va),Va+=Xa;return hb},la.$$arity=-1);a.alias(n,"succ","next");a.def(n,"$times",g=function(){var X=g.$$p,Oa=X||x,cb;X&&(g.$$p=null);X&&(g.$$p=null);if(!c(Oa))return I(this,"enum_for",["times"],(cb=function(){return null==cb.$$s?this:cb.$$s},cb.$$s=this,cb.$$arity=0,cb));for(X=0;X<this;X++)Oa(X);return this},g.$$arity=0);a.def(n,"$to_f",C=function(){return this},C.$$arity=0);a.def(n,"$to_i",N=function(){return parseInt(this,10)},N.$$arity=0);a.alias(n,"to_int","to_i");a.def(n,"$to_r",aa=function(){if(c(m(R,
"Integer")["$==="](this)))return m(R,"Rational").$new(this,1);var X=m(R,"Math").$frexp(this);var Oa=a.to_ary(X);var cb=null==Oa[0]?x:Oa[0];Oa=null==Oa[1]?x:Oa[1];X;cb=m(R,"Math").$ldexp(cb,l(m(R,"Float"),"MANT_DIG")).$to_i();Oa=w(Oa,l(m(R,"Float"),"MANT_DIG"));return p(cb,l(m(R,"Float"),"RADIX")["$**"](Oa)).$to_r()},aa.$$arity=0);a.def(n,"$to_s",v=function(X){var Oa=x;null==X&&(X=10);X=m(R,"Opal")["$coerce_to!"](X,m(R,"Integer"),"to_int");c(c(Oa=J(X,2))?Oa:y(X,36))&&this.$raise(m(R,"ArgumentError"),
"invalid radix "+X);return this.toString(X)},v.$$arity=-1);a.def(n,"$truncate",V=function(X){null==X&&(X=0);var Oa=this.$to_f();if(0===Oa%1&&0<=X)return Oa;X=Math.pow(10,X);X=parseInt(Oa*X,10)/X;0===Oa%1&&(X=Math.round(X));return X},V.$$arity=-1);a.alias(n,"inspect","to_s");a.def(n,"$digits",oa=function(X){null==X&&(X=10);J(this,0)&&this.$raise(l(m(R,"Math"),"DomainError"),"out of domain");X=m(R,"Opal")["$coerce_to!"](X,m(R,"Integer"),"to_int");c(J(X,2))&&this.$raise(m(R,"ArgumentError"),"invalid radix "+
X);for(var Oa=this,cb=[];0!==Oa;)cb.push(Oa%X),Oa=parseInt(Oa/X,10);return cb},oa.$$arity=-1);a.def(n,"$divmod",La=function(X){var Oa=La.$$p,cb=x,B;Oa&&(La.$$p=null);var O=0;var ra=arguments.length;for(B=Array(ra);O<ra;O++)B[O]=arguments[O];return c(c(cb=this["$nan?"]())?cb:X["$nan?"]())?this.$raise(m(R,"FloatDomainError"),"NaN"):c(this["$infinite?"]())?this.$raise(m(R,"FloatDomainError"),"Infinity"):k(this,a.find_super_dispatcher(this,"divmod",La,!1,!0),"divmod",B,Oa)},La.$$arity=1);a.def(n,"$upto",
ib=function(X){var Oa=ib.$$p,cb=Oa||x,B;Oa&&(ib.$$p=null);Oa&&(ib.$$p=null);if(cb===x)return I(this,"enum_for",["upto",X],(B=function(){var O=null==B.$$s?this:B.$$s;c(m(R,"Numeric")["$==="](X))||O.$raise(m(R,"ArgumentError"),"comparison of "+O.$class()+" with "+X.$class()+" failed");return c(J(X,O))?0:t(w(X,O),1)},B.$$s=this,B.$$arity=0,B));X.$$is_number||this.$raise(m(R,"ArgumentError"),"comparison of "+this.$class()+" with "+X.$class()+" failed");for(Oa=this;Oa<=X;Oa++)cb(Oa);return this},ib.$$arity=
1);a.def(n,"$zero?",ob=function(){return 0==this},ob.$$arity=0);a.def(n,"$size",mb=function(){return 4},mb.$$arity=0);a.def(n,"$nan?",sb=function(){return isNaN(this)},sb.$$arity=0);a.def(n,"$finite?",tb=function(){return Infinity!=this&&-Infinity!=this&&!isNaN(this)},tb.$$arity=0);a.def(n,"$infinite?",wb=function(){return Infinity==this?1:-Infinity==this?-1:x},wb.$$arity=0);a.def(n,"$positive?",xb=function(){return 0!=this&&(Infinity==this||0<1/this)},xb.$$arity=0);return(a.def(n,"$negative?",ub=
function(){return-Infinity==this||0>1/this},ub.$$arity=0),x)&&"negative?"})(H[0],m(H,"Numeric"),H);a.const_set(H[0],"Fixnum",m(H,"Number"));(function(n,$super,D){n=u(n,$super,"Integer");D=[n].concat(D);n.$$is_number_class=!0;n.$$is_integer_class=!0;(function(R,ka){var da=[R].concat(ka),ma,b;a.def(R,"$allocate",ma=function(){return this.$raise(m(da,"TypeError"),"allocator undefined for "+this.$name())},ma.$$arity=0);a.udef(R,"$new");return(a.def(R,"$sqrt",b=function(h){h=m(da,"Opal")["$coerce_to!"](h,
m(da,"Integer"),"to_int");0>h&&this.$raise(l(m(da,"Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"');return parseInt(Math.sqrt(h),10)},b.$$arity=1),x)&&"sqrt"})(a.get_singleton_class(n),D);a.const_set(D[0],"MAX",Math.pow(2,30)-1);return a.const_set(D[0],"MIN",-Math.pow(2,30))})(H[0],m(H,"Numeric"),H);return function(n,$super,D){n=u(n,$super,"Float");D=[n].concat(D);n.$$is_number_class=!0;(function(R,ka){var da=[R].concat(ka),ma,b;a.def(R,"$allocate",ma=function(){return this.$raise(m(da,
"TypeError"),"allocator undefined for "+this.$name())},ma.$$arity=0);a.udef(R,"$new");return(a.def(R,"$===",b=function(h){return!!h.$$is_number},b.$$arity=1),x)&&"==="})(a.get_singleton_class(n),D);a.const_set(D[0],"INFINITY",Infinity);a.const_set(D[0],"MAX",Number.MAX_VALUE);a.const_set(D[0],"MIN",Number.MIN_VALUE);a.const_set(D[0],"NAN",NaN);a.const_set(D[0],"DIG",15);a.const_set(D[0],"MANT_DIG",53);a.const_set(D[0],"RADIX",2);return a.const_set(D[0],"EPSILON",Number.EPSILON||2.220446049250313E-16)}(H[0],
m(H,"Numeric"),H)};
Opal.modules["corelib/range"]=function(a){function y(k,I){return"number"===typeof k&&"number"===typeof I?k<=I:k["$<="](I)}function J(k,I){return"number"===typeof k&&"number"===typeof I?k<I:k["$<"](I)}function t(k,I){return"number"===typeof k&&"number"===typeof I?k>I:k["$>"](I)}function w(k,I){return"number"===typeof k&&"number"===typeof I?k+I:k["$+"](I)}var z=a.top,p=[],d=a.nil,H=a.$$$,x=a.$$,l=a.klass,m=a.truthy,u=a.send,c=a.send2;a.add_stubs("$require $include $attr_reader $raise $<=> $include? $<= $< $enum_for $size $upto $to_proc $respond_to? $class $succ $! $== $=== $exclude_end? $eql? $begin $end $last $to_a $> $- $abs $to_i $coerce_to! $ceil $/ $loop $+ $* $>= $each_with_index $% $bsearch $inspect $[] $hash".split(" "));z.$require("corelib/enumerable");
return function(k,$super,e){k=l(k,$super,"Range");var n=[k].concat(e),L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa;k.$$prototype.begin=k.$$prototype.end=k.$$prototype.excl=d;k.$include(x(n,"Enumerable"));k.$$prototype.$$is_range=!0;k.$attr_reader("begin","end");a.def(k,"$initialize",L=function(xa,Da,Ma){null==Ma&&(Ma=!1);m(this.begin)&&this.$raise(x(n,"NameError"),"'initialize' called twice");m(xa["$<=>"](Da))||this.$raise(x(n,"ArgumentError"),"bad value for range");this.begin=xa;this.end=Da;return this.excl=
Ma},L.$$arity=-3);a.def(k,"$===",D=function(xa){return this["$include?"](xa)},D.$$arity=1);a.def(k,"$cover?",R=function(xa){var Da=d,Ma=d,na=d;var S=this.begin["$<=>"](xa);if(!m(m(Da=S)?y(S,0):Da))return!1;xa=xa["$<=>"](this.end);return m(this.excl)?m(Ma=xa)?J(xa,0):Ma:m(na=xa)?y(xa,0):na},R.$$arity=1);a.def(k,"$each",ka=function(){var xa=ka.$$p,Da=xa||d,Ma,na=d,S=d,sa=d;xa&&(ka.$$p=null);xa&&(ka.$$p=null);if(Da===d)return u(this,"enum_for",["each"],(Ma=function(){return(null==Ma.$$s?this:Ma.$$s).$size()},
Ma.$$s=this,Ma.$$arity=0,Ma));if(this.begin.$$is_number&&this.end.$$is_number){0===this.begin%1&&0===this.end%1||this.$raise(x(n,"TypeError"),"can't iterate from Float");xa=this.begin;for(na=this.end+(m(this.excl)?0:1);xa<na;xa++)Da(xa);return this}if(this.begin.$$is_string&&this.end.$$is_string)return u(this.begin,"upto",[this.end,this.excl],Da.$to_proc()),this;na=this.begin;S=this.end;for(m(na["$respond_to?"]("succ"))||this.$raise(x(n,"TypeError"),"can't iterate from "+na.$class());m(J(na["$<=>"](S),
0));)a.yield1(Da,na),na=na.$succ();m(m(sa=this.excl["$!"]())?na["$=="](S):sa)&&a.yield1(Da,na);return this},ka.$$arity=0);a.def(k,"$eql?",da=function(xa){var Da=d,Ma=d;return m(x(n,"Range")["$==="](xa))?m(Da=m(Ma=this.excl["$==="](xa["$exclude_end?"]()))?this.begin["$eql?"](xa.$begin()):Ma)?this.end["$eql?"](xa.$end()):Da:!1},da.$$arity=1);a.alias(k,"==","eql?");a.def(k,"$exclude_end?",ma=function(){return this.excl},ma.$$arity=0);a.def(k,"$first",b=function(xa){var Da=b.$$p,Ma;Da&&(b.$$p=null);var na=
0;var S=arguments.length;for(Ma=Array(S);na<S;na++)Ma[na]=arguments[na];return m(null==xa)?this.begin:c(this,a.find_super_dispatcher(this,"first",b,!1,!0),"first",Ma,Da)},b.$$arity=-1);a.alias(k,"include?","cover?");a.def(k,"$last",h=function(xa){return m(null==xa)?this.end:this.$to_a().$last(xa)},h.$$arity=-1);a.def(k,"$max",f=function(){var xa=f.$$p,Da=xa||d,Ma=d,na;xa&&(f.$$p=null);var S=0;var sa=arguments.length;for(na=Array(sa);S<sa;S++)na[S]=arguments[S];return Da!==d?c(this,a.find_super_dispatcher(this,
"max",f,!1,!0),"max",na,xa):m(t(this.begin,this.end))?d:m(m(Ma=this.excl)?this.begin["$=="](this.end):Ma)?d:this.excl?this.end-1:this.end},f.$$arity=0);a.alias(k,"member?","cover?");a.def(k,"$min",q=function(){var xa=q.$$p,Da=xa||d,Ma=d,na;xa&&(q.$$p=null);var S=0;var sa=arguments.length;for(na=Array(sa);S<sa;S++)na[S]=arguments[S];return Da!==d?c(this,a.find_super_dispatcher(this,"min",q,!1,!0),"min",na,xa):m(t(this.begin,this.end))?d:m(m(Ma=this.excl)?this.begin["$=="](this.end):Ma)?d:this.begin},
q.$$arity=0);a.def(k,"$size",A=function(){var xa=d;var Da=this.begin;var Ma=this.end;m(this.excl)&&(Ma="number"===typeof Ma?Ma-1:Ma["$-"](1));if(!m(m(xa=x(n,"Numeric")["$==="](Da))?x(n,"Numeric")["$==="](Ma):xa))return d;if(m(J(Ma,Da)))return 0;xa=H(x(n,"Float"),"INFINITY");return m([Da.$abs(),Ma.$abs()]["$include?"](xa))?xa:(Math.abs(Ma-Da)+1).$to_i()},A.$$arity=0);a.def(k,"$step",E=function(xa){function Da(){xa.$$is_number||(xa=x(n,"Opal")["$coerce_to!"](xa,x(n,"Integer"),"to_int"));0>xa?fa.$raise(x(n,
"ArgumentError"),"step can't be negative"):0===xa&&fa.$raise(x(n,"ArgumentError"),"step can't be 0")}function Ma(){if(!fa.begin["$respond_to?"]("succ")||fa.begin.$$is_string&&fa.end.$$is_string)return d;if(0===xa%1){var T=fa.$size();return("number"===typeof T&&"number"===typeof xa?T/xa:T["$/"](xa)).$ceil()}T=fa.begin;var ja=fa.end,va=Math.abs,ea=Math.floor;va=(va(T)+va(ja)+va(ja-T))/va(xa)*H(x(n,"Float"),"EPSILON");.5<va&&(va=.5);fa.excl?(ea=ea((ja-T)/xa-va),ea*xa+T<ja&&ea++):ea=ea((ja-T)/xa+va)+
1;return ea}var na,S,sa,ya=E.$$p,pa=ya||d,fa=this,F=d;ya&&(E.$$p=null);null==xa&&(xa=1);if(pa===d)return u(fa,"enum_for",["step",xa],(na=function(){Da();return Ma()},na.$$s=fa,na.$$arity=0,na));Da();m(fa.begin.$$is_number&&fa.end.$$is_number)?(F=0,function(){var T=a.new_brk();try{return u(fa,"loop",[],(S=function(){var ja=null==S.$$s?this:S.$$s;null==ja.begin&&(ja.begin=d);null==ja.excl&&(ja.excl=d);null==ja.end&&(ja.end=d);var va=w(ja.begin,"number"===typeof F&&"number"===typeof xa?F*xa:F["$*"](xa));
m(ja.excl)?(ja=ja.end,ja="number"===typeof va&&"number"===typeof ja?va>=ja:va["$>="](ja),m(ja)&&a.brk(d,T)):m(t(va,ja.end))&&a.brk(d,T);a.yield1(pa,va);return F=w(F,1)},S.$$s=fa,S.$$brk=T,S.$$arity=0,S))}catch(ja){if(ja===T)return ja.$v;throw ja;}}()):(fa.begin.$$is_string&&fa.end.$$is_string&&0!==xa%1&&fa.$raise(x(n,"TypeError"),"no implicit conversion to float from string"),u(fa,"each_with_index",[],(sa=function(T,ja){null==T&&(T=d);null==ja&&(ja=d);return ja["$%"](xa)["$=="](0)?a.yield1(pa,T):
d},sa.$$s=fa,sa.$$arity=2,sa)));return fa},E.$$arity=-1);a.def(k,"$bsearch",G=function(){var xa=G.$$p,Da=xa||d;xa&&(G.$$p=null);xa&&(G.$$p=null);if(Da===d)return this.$enum_for("bsearch");m(this.begin.$$is_number&&this.end.$$is_number)||this.$raise(x(n,"TypeError"),"can't do binary search for "+this.begin.$class());return u(this.$to_a(),"bsearch",[],Da.$to_proc())},G.$$arity=0);a.def(k,"$to_s",M=function(){return""+this.begin+(m(this.excl)?"...":"..")+this.end},M.$$arity=0);a.def(k,"$inspect",ba=
function(){return""+this.begin.$inspect()+(m(this.excl)?"...":"..")+this.end.$inspect()},ba.$$arity=0);a.def(k,"$marshal_load",ua=function(xa){this.begin=xa["$[]"]("begin");this.end=xa["$[]"]("end");return this.excl=xa["$[]"]("excl")},ua.$$arity=1);return(a.def(k,"$hash",Pa=function(){return[this.begin,this.end,this.excl].$hash()},Pa.$$arity=0),d)&&"hash"}(p[0],null,p)};
Opal.modules["corelib/proc"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.slice,z=a.klass,p=a.truthy,d=a.send;a.add_stubs(["$raise","$proc","$call","$to_proc","$coerce_to!"]);return function(H,$super,l){H=z(H,$super,"Proc");var m=[H].concat(l),u,c,k,I,e,n,L,D,R,ka,da,ma;a.defineProperty(H.$$prototype,"$$is_proc",!0);a.defineProperty(H.$$prototype,"$$is_lambda",!1);a.defs(H,"$new",u=function(){var b=u.$$p,h=b||J;b&&(u.$$p=null);b&&(u.$$p=null);p(h)||this.$raise(t(m,"ArgumentError"),"tried to create a Proc object without a block");
return h},u.$$arity=0);a.def(H,"$call",c=function(b){var h=c.$$p,f=h||J;h&&(c.$$p=null);h&&(c.$$p=null);h=a.slice.call(arguments,0,arguments.length);f!==J&&(this.$$p=f);if(f=this.$$brk)try{var q=this.$$is_lambda?this.apply(null,h):a.yieldX(this,h)}catch(A){if(A===f)return f.$v;throw A;}else q=this.$$is_lambda?this.apply(null,h):a.yieldX(this,h);return q},c.$$arity=-1);a.alias(H,"[]","call");a.alias(H,"===","call");a.alias(H,"yield","call");a.def(H,"$>>",k=function(b){var h;k.$$p&&(k.$$p=null);return d(this,
"proc",[],(h=function(f){var q=null==h.$$s?this:h.$$s,A=h.$$p,E=A||J;A&&(h.$$p=null);A=a.slice.call(arguments,0,arguments.length);q=d(q,"call",a.to_a(A),E.$to_proc());return b.$call(q)},h.$$s=this,h.$$arity=-1,h))},k.$$arity=1);a.def(H,"$<<",I=function(b){var h;I.$$p&&(I.$$p=null);return d(this,"proc",[],(h=function(f){var q=null==h.$$s?this:h.$$s,A=h.$$p,E=A||J;A&&(h.$$p=null);A=a.slice.call(arguments,0,arguments.length);E=d(b,"call",a.to_a(A),E.$to_proc());return q.$call(E)},h.$$s=this,h.$$arity=
-1,h))},I.$$arity=1);a.def(H,"$to_proc",e=function(){return this},e.$$arity=0);a.def(H,"$lambda?",n=function(){return!!this.$$is_lambda},n.$$arity=0);a.def(H,"$arity",L=function(){return this.$$is_curried?-1:this.$$arity},L.$$arity=0);a.def(H,"$source_location",D=function(){return J},D.$$arity=0);a.def(H,"$binding",R=function(){this.$$is_curried&&this.$raise(t(m,"ArgumentError"),"Can't create Binding");return J},R.$$arity=0);a.def(H,"$parameters",ka=function(){if(this.$$is_curried)return[["rest"]];
if(this.$$parameters){if(this.$$is_lambda)return this.$$parameters;var b=[],h;var f=0;for(h=this.$$parameters.length;f<h;f++){var q=this.$$parameters[f];"req"===q[0]&&(q=["opt",q[1]]);b.push(q)}return b}return[]},ka.$$arity=0);a.def(H,"$curry",da=function(b){function h(){var q=w.call(arguments),A=q.length;A>b&&f.$$is_lambda&&!f.$$is_curried&&f.$raise(t(m,"ArgumentError"),"wrong number of arguments ("+A+" for "+b+")");if(A>=b)return f.$call.apply(f,q);A=function(){return h.apply(null,q.concat(w.call(arguments)))};
A.$$is_lambda=f.$$is_lambda;A.$$is_curried=!0;return A}var f=this;void 0===b?b=f.length:(b=t(m,"Opal")["$coerce_to!"](b,t(m,"Integer"),"to_int"),f.$$is_lambda&&b!==f.length&&f.$raise(t(m,"ArgumentError"),"wrong number of arguments ("+b+" for "+f.length+")"));h.$$is_lambda=f.$$is_lambda;h.$$is_curried=!0;return h},da.$$arity=-1);a.def(H,"$dup",ma=function(){function b(){return h.apply(this,arguments)}var h=this.$$original_proc||this,f;for(f in this)this.hasOwnProperty(f)&&(b[f]=this[f]);return b},
ma.$$arity=0);return a.alias(H,"clone","dup")}(y[0],Function,y)};
Opal.modules["corelib/method"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.klass,z=a.truthy;a.add_stubs("$attr_reader $arity $>> $<< $new $class $join $source_location $raise".split(" "));(function(p,$super,H){p=w(p,$super,"Method");var x=[p].concat(H),l,m,u,c,k,I,e,n,L,D,R;p.$$prototype.method=p.$$prototype.receiver=p.$$prototype.owner=p.$$prototype.name=J;p.$attr_reader("owner","receiver","name");a.def(p,"$initialize",l=function(ka,da,ma,b){this.receiver=ka;this.owner=da;this.name=b;return this.method=
ma},l.$$arity=4);a.def(p,"$arity",m=function(){return this.method.$arity()},m.$$arity=0);a.def(p,"$parameters",u=function(){return this.method.$$parameters},u.$$arity=0);a.def(p,"$source_location",c=function(){var ka;return z(ka=this.method.$$source_location)?ka:["(eval)",0]},c.$$arity=0);a.def(p,"$comments",k=function(){var ka;return z(ka=this.method.$$comments)?ka:[]},k.$$arity=0);a.def(p,"$call",I=function(ka){var da=I.$$p,ma=da||J;da&&(I.$$p=null);da&&(I.$$p=null);da=a.slice.call(arguments,0,
arguments.length);this.method.$$p=ma;return this.method.apply(this.receiver,da)},I.$$arity=-1);a.alias(p,"[]","call");a.def(p,"$>>",e=function(ka){return this.method["$>>"](ka)},e.$$arity=1);a.def(p,"$<<",n=function(ka){return this.method["$<<"](ka)},n.$$arity=1);a.def(p,"$unbind",L=function(){return t(x,"UnboundMethod").$new(this.receiver.$class(),this.owner,this.method,this.name)},L.$$arity=0);a.def(p,"$to_proc",D=function(){var ka=this.$call.bind(this);ka.$$unbound=this.method;ka.$$is_lambda=!0;
ka.$$arity=this.method.$$arity;ka.$$parameters=this.method.$$parameters;return ka},D.$$arity=0);return(a.def(p,"$inspect",R=function(){return"#<"+this.$class()+": "+this.receiver.$class()+"#"+this.name+" (defined in "+this.owner+" in "+this.$source_location().$join(":")+")>"},R.$$arity=0),J)&&"inspect"})(y[0],null,y);return function(p,$super,H){p=w(p,$super,"UnboundMethod");var x=[p].concat(H),l,m,u,c,k,I,e;p.$$prototype.method=p.$$prototype.owner=p.$$prototype.name=p.$$prototype.source=J;p.$attr_reader("source",
"owner","name");a.def(p,"$initialize",l=function(n,L,D,R){this.source=n;this.owner=L;this.method=D;return this.name=R},l.$$arity=4);a.def(p,"$arity",m=function(){return this.method.$arity()},m.$$arity=0);a.def(p,"$parameters",u=function(){return this.method.$$parameters},u.$$arity=0);a.def(p,"$source_location",c=function(){var n;return z(n=this.method.$$source_location)?n:["(eval)",0]},c.$$arity=0);a.def(p,"$comments",k=function(){var n;return z(n=this.method.$$comments)?n:[]},k.$$arity=0);a.def(p,
"$bind",I=function(n){if(this.owner.$$is_module||a.is_a(n,this.owner))return t(x,"Method").$new(n,this.owner,this.method,this.name);this.$raise(t(x,"TypeError"),"can't bind singleton method to a different class (expected "+n+".kind_of?("+this.owner+" to be true)")},I.$$arity=1);return(a.def(p,"$inspect",e=function(){return"#<"+this.$class()+": "+this.source+"#"+this.name+" (defined in "+this.owner+" in "+this.$source_location().$join(":")+")>"},e.$$arity=0),J)&&"inspect"}(y[0],null,y)};
Opal.modules["corelib/variables"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.gvars,z=a.hash2;a.add_stubs(["$new"]);w["&"]=w["~"]=w["`"]=w["'"]=J;w.LOADED_FEATURES=w['"']=a.loaded_features;w.LOAD_PATH=w[":"]=[];w["/"]="\n";w[","]=J;a.const_set(y[0],"ARGV",[]);a.const_set(y[0],"ARGF",t(y,"Object").$new());a.const_set(y[0],"ENV",z([],{}));w.VERBOSE=!1;w.DEBUG=!1;return w.SAFE=0};
Opal.modules["corelib/io"]=function(a){function y(u,c){return"number"===typeof u&&"number"===typeof c?u-c:u["$-"](c)}var J=[],t=a.nil,w=a.$$$,z=a.$$,p=a.klass,d=a.module,H=a.gvars,x=a.send,l=t;a.add_stubs("$attr_accessor $size $write $String $chomp $getbyte $getc $raise $new $write_proc= $- $extend".split(" "));(function(u,$super,k){u=p(u,$super,"IO");k=[u].concat(k);var I,e,n,L;u.$$prototype.tty=u.$$prototype.closed=t;a.const_set(k[0],"SEEK_SET",0);a.const_set(k[0],"SEEK_CUR",1);a.const_set(k[0],
"SEEK_END",2);a.def(u,"$tty?",I=function(){return this.tty},I.$$arity=0);a.def(u,"$closed?",e=function(){return this.closed},e.$$arity=0);u.$attr_accessor("write_proc");a.def(u,"$write",n=function(D){this.write_proc(D);return D.$size()},n.$$arity=1);u.$attr_accessor("sync","tty");a.def(u,"$flush",L=function(){return t},L.$$arity=0);(function(D,R){D=d(D,"Writable");[D].concat(R);var ka,da,ma;a.def(D,"$<<",ka=function(b){this.$write(b);return this},ka.$$arity=1);a.def(D,"$print",da=function(b){null==
H[","]&&(H[","]=t);var h=a.slice.call(arguments,0,arguments.length);for(var f=0,q=h.length;f<q;f++)h[f]=this.$String(h[f]);this.$write(h.join(H[","]));return t},da.$$arity=-1);a.def(D,"$puts",ma=function(b){null==H["/"]&&(H["/"]=t);var h=a.slice.call(arguments,0,arguments.length);for(var f=0,q=h.length;f<q;f++)h[f]=this.$String(h[f]).$chomp();this.$write(h.concat([t]).join(H["/"]));return t},ma.$$arity=-1)})(k[0],k);return function(D,R){D=d(D,"Readable");var ka=[D].concat(R),da,ma,b,h;a.def(D,"$readbyte",
da=function(){return this.$getbyte()},da.$$arity=0);a.def(D,"$readchar",ma=function(){return this.$getc()},ma.$$arity=0);a.def(D,"$readline",b=function(){null==H["/"]&&(H["/"]=t);return this.$raise(z(ka,"NotImplementedError"))},b.$$arity=-1);a.def(D,"$readpartial",h=function(){return this.$raise(z(ka,"NotImplementedError"))},h.$$arity=-2)}(k[0],k)})(J[0],null,J);a.const_set(J[0],"STDERR",H.stderr=z(J,"IO").$new());a.const_set(J[0],"STDIN",H.stdin=z(J,"IO").$new());a.const_set(J[0],"STDOUT",H.stdout=
z(J,"IO").$new());var m=a.global.console;l=["object"===typeof process&&"object"===typeof process.stdout?function(u){process.stdout.write(u)}:function(u){m.log(u)}];x(z(J,"STDOUT"),"write_proc=",a.to_a(l));l[y(l.length,1)];l=["object"===typeof process&&"object"===typeof process.stderr?function(u){process.stderr.write(u)}:function(u){m.warn(u)}];x(z(J,"STDERR"),"write_proc=",a.to_a(l));l[y(l.length,1)];z(J,"STDOUT").$extend(w(z(J,"IO"),"Writable"));return z(J,"STDERR").$extend(w(z(J,"IO"),"Writable"))};
Opal.modules["opal/regexp_anchors"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.module;a.add_stubs(["$==","$new"]);y=[w(y[0],"Opal")].concat(y);a.const_set(y[0],"REGEXP_START",t(y,"RUBY_ENGINE")["$=="]("opal")?"^":J);a.const_set(y[0],"REGEXP_END",t(y,"RUBY_ENGINE")["$=="]("opal")?"$":J);a.const_set(y[0],"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F");a.const_set(y[0],"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F");
a.const_set(y[0],"INLINE_IDENTIFIER_REGEXP",t(y,"Regexp").$new("[^"+t(y,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+t(y,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]"));a.const_set(y[0],"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F");a.const_set(y[0],"CONST_NAME_REGEXP",t(y,"Regexp").$new(""+t(y,"REGEXP_START")+"(::)?[A-Z][^"+t(y,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+t(y,"REGEXP_END")))};
Opal.modules["opal/mini"]=function(a){var y=a.top;a.add_stubs(["$require"]);y.$require("opal/base");y.$require("corelib/nil");y.$require("corelib/boolean");y.$require("corelib/string");y.$require("corelib/comparable");y.$require("corelib/enumerable");y.$require("corelib/enumerator");y.$require("corelib/array");y.$require("corelib/hash");y.$require("corelib/number");y.$require("corelib/range");y.$require("corelib/proc");y.$require("corelib/method");y.$require("corelib/regexp");y.$require("corelib/variables");
y.$require("corelib/io");return y.$require("opal/regexp_anchors")};
Opal.modules["corelib/kernel/format"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.coerce_to,z=a.module,p=a.truthy,d=a.gvars;a.add_stubs("$== $length $respond_to? $[] $coerce_to? $nil? $to_a $raise $to_int $fetch $Integer $Float $to_ary $to_str $inspect $to_s".split(" "));return function(H,x){H=z(H,"Kernel");var l=[H].concat(x),m;a.def(H,"$format",m=function(u,c){function k(){ba&32&&da.$raise(t(l,"ArgumentError"),"flag after width");ba&128&&da.$raise(t(l,"ArgumentError"),"flag after precision")}function I(){ba&
32&&da.$raise(t(l,"ArgumentError"),"width given twice");ba&128&&da.$raise(t(l,"ArgumentError"),"width after precision")}function e(pa){pa>=h.length&&da.$raise(t(l,"ArgumentError"),"too few arguments");return h[pa]}function n(){switch(G){case -1:da.$raise(t(l,"ArgumentError"),"unnumbered("+E+") mixed with numbered");case -2:da.$raise(t(l,"ArgumentError"),"unnumbered("+E+") mixed with named")}G=E++;return e(G-1)}function L(pa){0<G&&da.$raise(t(l,"ArgumentError"),"numbered("+pa+") after unnumbered("+
G+")");-2===G&&da.$raise(t(l,"ArgumentError"),"numbered("+pa+") after named");1>pa&&da.$raise(t(l,"ArgumentError"),"invalid index - "+pa+"$");G=-1;return e(pa-1)}function D(){return void 0===Pa?n():Pa}function R(pa){var fa;for(fa="";;f++){f===q&&da.$raise(t(l,"ArgumentError"),"malformed format string - %*[0-9]");if(48>u.charCodeAt(f)||57<u.charCodeAt(f))return f--,fa=parseInt(fa,10)||0,2147483647<fa&&da.$raise(t(l,"ArgumentError"),""+pa+" too big"),fa;fa+=u.charAt(f)}}function ka(pa){pa=R(pa);"$"===
u.charAt(f+1)?(f++,pa=L(pa)):pa=n();return pa.$to_int()}var da=this,ma=J,b=J;null==d.DEBUG&&(d.DEBUG=J);var h=a.slice.call(arguments,1,arguments.length);p(p(ma=h.$length()["$=="](1))?h["$[]"](0)["$respond_to?"]("to_ary"):ma)&&(b=t(l,"Opal")["$coerce_to?"](h["$[]"](0),t(l,"Array"),"to_ary"),p(b["$nil?"]())||(h=b.$to_a()));ma="";b=0;var f,q=u.length,A,E=1,G=0;for(f=u.indexOf("%");-1!==f;f=u.indexOf("%",f)){var M=void 0;var ba=0;var ua=A=-1;var Pa=void 0;var xa=f;f++;switch(u.charAt(f)){case "%":b=f;
case "":case "\n":case "\x00":f++;continue}a:for(;f<q;f++)switch(u.charAt(f)){case " ":k();ba|=16;continue a;case "#":k();ba|=1;continue a;case "+":k();ba|=4;continue a;case "-":k();ba|=2;continue a;case "0":k();ba|=8;continue a;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":var Da=R("width");if("$"===u.charAt(f+1)){if(f+2===q){M="%";f++;break a}void 0!==Pa&&da.$raise(t(l,"ArgumentError"),"value given twice - %"+Da+"$");Pa=L(Da);f++}else I(),ba|=32,A=Da;continue a;
case "<":case "{":var Ma="<"===u.charAt(f)?">":"}";Da="";for(f++;;f++){f===q&&da.$raise(t(l,"ArgumentError"),"malformed name - unmatched parenthesis");if(u.charAt(f)===Ma)if(0<G&&da.$raise(t(l,"ArgumentError"),"named "+Da+" after unnumbered("+G+")"),-1===G&&da.$raise(t(l,"ArgumentError"),"named "+Da+" after numbered"),G=-2,void 0!==h[0]&&h[0].$$is_hash||da.$raise(t(l,"ArgumentError"),"one hash required"),Pa=h[0].$fetch(Da),">"===Ma)continue a;else{M=Pa.toString();-1!==ua&&(M=M.slice(0,ua));if(ba&
2)for(;M.length<A;)M+=" ";else for(;M.length<A;)M=" "+M;break a}Da+=u.charAt(f)}case "*":f++;I();ba|=32;A=ka("width");0>A&&(ba|=2,A=-A);continue a;case ".":ba&128&&da.$raise(t(l,"ArgumentError"),"precision given twice");ba|=192;ua=0;f++;if("*"===u.charAt(f)){f++;ua=ka("precision");0>ua&&(ba&=-65);continue a}ua=R("precision");continue a;case "d":case "i":case "u":Da=da.$Integer(D());if(0<=Da){for(M=Da.toString();M.length<ua;)M="0"+M;if(ba&2){if(ba&4||ba&16)M=(ba&4?"+":" ")+M;for(;M.length<A;)M+=" "}else if(ba&
8&&-1===ua){for(;M.length<A-(ba&4||ba&16?1:0);)M="0"+M;if(ba&4||ba&16)M=(ba&4?"+":" ")+M}else{if(ba&4||ba&16)M=(ba&4?"+":" ")+M;for(;M.length<A;)M=" "+M}}else{for(M=(-Da).toString();M.length<ua;)M="0"+M;if(ba&2)for(M="-"+M;M.length<A;)M+=" ";else if(ba&8&&-1===ua){for(;M.length<A-1;)M="0"+M;M="-"+M}else for(M="-"+M;M.length<A;)M=" "+M}break a;case "b":case "B":case "o":case "x":case "X":switch(u.charAt(f)){case "b":case "B":var na=2;var S="0b";var sa=/^1+/;var ya="1";break;case "o":na=8;S="0";sa=
/^3?7+/;ya="7";break;case "x":case "X":na=16,S="0x",sa=/^f+/,ya="f"}Da=da.$Integer(D());if(0<=Da){for(M=Da.toString(na);M.length<ua;)M="0"+M;if(ba&2){if(ba&4||ba&16)M=(ba&4?"+":" ")+M;for(ba&1&&0!==Da&&(M=S+M);M.length<A;)M+=" "}else if(ba&8&&-1===ua){for(;M.length<A-(ba&4||ba&16?1:0)-(ba&1&&0!==Da?S.length:0);)M="0"+M;ba&1&&0!==Da&&(M=S+M);if(ba&4||ba&16)M=(ba&4?"+":" ")+M}else{ba&1&&0!==Da&&(M=S+M);if(ba&4||ba&16)M=(ba&4?"+":" ")+M;for(;M.length<A;)M=" "+M}}else if(ba&4||ba&16){for(M=(-Da).toString(na);M.length<
ua;)M="0"+M;if(ba&2)for(ba&1&&(M=S+M),M="-"+M;M.length<A;)M+=" ";else if(ba&8&&-1===ua){for(;M.length<A-1-(ba&1?2:0);)M="0"+M;ba&1&&(M=S+M);M="-"+M}else for(ba&1&&(M=S+M),M="-"+M;M.length<A;)M=" "+M}else{for(M=(Da>>>0).toString(na).replace(sa,ya);M.length<ua-2;)M=ya+M;if(ba&2)for(M=".."+M,ba&1&&(M=S+M);M.length<A;)M+=" ";else if(ba&8&&-1===ua){for(;M.length<A-2-(ba&1?S.length:0);)M=ya+M;M=".."+M;ba&1&&(M=S+M)}else for(M=".."+M,ba&1&&(M=S+M);M.length<A;)M=" "+M}u.charAt(f)===u.charAt(f).toUpperCase()&&
(M=M.toUpperCase());break a;case "f":case "e":case "E":case "g":case "G":Da=da.$Float(D());if(0<=Da||isNaN(Da)){if(Infinity===Da)M="Inf";else switch(u.charAt(f)){case "f":M=Da.toFixed(-1===ua?6:ua);break;case "e":case "E":M=Da.toExponential(-1===ua?6:ua);break;case "g":case "G":M=Da.toExponential(),Ma=parseInt(M.split("e")[1],10),-4>Ma||Ma>=(-1===ua?6:ua)||(M=Da.toPrecision(-1===ua?ba&1?6:void 0:ua))}if(ba&2){if(ba&4||ba&16)M=(ba&4?"+":" ")+M;for(;M.length<A;)M+=" "}else if(ba&8&&Infinity!==Da&&!isNaN(Da)){for(;M.length<
A-(ba&4||ba&16?1:0);)M="0"+M;if(ba&4||ba&16)M=(ba&4?"+":" ")+M}else{if(ba&4||ba&16)M=(ba&4?"+":" ")+M;for(;M.length<A;)M=" "+M}}else{if(-Infinity===Da)M="Inf";else switch(u.charAt(f)){case "f":M=(-Da).toFixed(-1===ua?6:ua);break;case "e":case "E":M=(-Da).toExponential(-1===ua?6:ua);break;case "g":case "G":M=(-Da).toExponential(),Ma=parseInt(M.split("e")[1],10),-4>Ma||Ma>=(-1===ua?6:ua)||(M=(-Da).toPrecision(-1===ua?ba&1?6:void 0:ua))}if(ba&2)for(M="-"+M;M.length<A;)M+=" ";else if(ba&8&&-Infinity!==
Da){for(;M.length<A-1;)M="0"+M;M="-"+M}else for(M="-"+M;M.length<A;)M=" "+M}u.charAt(f)!==u.charAt(f).toUpperCase()||Infinity===Da||-Infinity===Da||isNaN(Da)||(M=M.toUpperCase());M=M.replace(/([eE][-+]?)([0-9])$/,"$10$2");break a;case "a":case "A":da.$raise(t(l,"NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case "c":Da=D();Da["$respond_to?"]("to_ary")&&(Da=Da.$to_ary()[0]);M=Da["$respond_to?"]("to_str")?Da.$to_str():String.fromCharCode(w(Da,t(l,"Integer"),
"to_int"));1!==M.length&&da.$raise(t(l,"ArgumentError"),"%c requires a character");if(ba&2)for(;M.length<A;)M+=" ";else for(;M.length<A;)M=" "+M;break a;case "p":M=D().$inspect();-1!==ua&&(M=M.slice(0,ua));if(ba&2)for(;M.length<A;)M+=" ";else for(;M.length<A;)M=" "+M;break a;case "s":M=D().$to_s();-1!==ua&&(M=M.slice(0,ua));if(ba&2)for(;M.length<A;)M+=" ";else for(;M.length<A;)M=" "+M;break a;default:da.$raise(t(l,"ArgumentError"),"malformed format string - %"+u.charAt(f))}void 0===M&&da.$raise(t(l,
"ArgumentError"),"malformed format string - %");ma+=u.slice(b,xa)+M;b=f+1}d.DEBUG&&0<=G&&E<h.length&&da.$raise(t(l,"ArgumentError"),"too many arguments for format string");return ma+u.slice(b)},m.$$arity=-2);a.alias(H,"sprintf","format")}(y[0],y)};
Opal.modules["corelib/string/encoding"]=function(a){function y(n,L){return"number"===typeof n&&"number"===typeof L?n+L:n["$+"](L)}var J,t,w,z,p,d=a.top,H=[],x=a.nil,l=a.$$$,m=a.$$,u=a.klass,c=a.hash2,k=a.truthy,I=a.send,e=x;a.add_stubs("$require $+ $[] $new $instance_eval $to_proc $each $const_set $sub $== $default_external $upcase $raise $attr_accessor $singleton_class $attr_reader $register $length $bytes $to_a $each_byte $dup $bytesize $enum_for $each_codepoint $coerce_to! $find $< $default_external= $-".split(" "));d.$require("corelib/string");
(function(n,$super,D){n=u(n,$super,"Encoding");var R=[n].concat(D),ka,da,ma,b,h,f,q,A,E;n.$$prototype.ascii=n.$$prototype.dummy=n.$$prototype.name=x;a.defs(n,"$register",ka=function(G,M){var ba=ka.$$p,ua=ba||x,Pa,xa=x,Da=x,Ma=x,na=x,S=x,sa=x,ya=x,pa=x;ba&&(ka.$$p=null);ba&&(ka.$$p=null);null==M&&(M=c([],{}));xa=y([G],k(Da=M["$[]"]("aliases"))?Da:[]);Ma=k(na=M["$[]"]("ascii"))?na:!1;S=k(sa=M["$[]"]("dummy"))?sa:!1;ya=this.$new(G,xa,Ma,S);I(ya,"instance_eval",[],ua.$to_proc());pa=a.encodings;return I(xa,
"each",[],(Pa=function(fa){var F=null==Pa.$$s?this:Pa.$$s;null==fa&&(fa=x);F.$const_set(fa.$sub("-","_"),ya);return pa[fa]=ya},Pa.$$s=this,Pa.$$arity=1,Pa))},ka.$$arity=-2);a.defs(n,"$find",da=function(G){var M=x;if(G["$=="]("default_external"))return this.$default_external();var ba=a.encodings;ba=k(M=ba[G])?M:ba[G.$upcase()];k(ba)||this.$raise(m(R,"ArgumentError"),"unknown encoding name - "+G);return ba},da.$$arity=1);n.$singleton_class().$attr_accessor("default_external");n.$attr_reader("name",
"names");a.def(n,"$initialize",ma=function(G,M,ba,ua){this.name=G;this.names=M;this.ascii=ba;return this.dummy=ua},ma.$$arity=4);a.def(n,"$ascii_compatible?",b=function(){return this.ascii},b.$$arity=0);a.def(n,"$dummy?",h=function(){return this.dummy},h.$$arity=0);a.def(n,"$to_s",f=function(){return this.name},f.$$arity=0);a.def(n,"$inspect",q=function(){return"#<Encoding:"+this.name+(k(this.dummy)?" (dummy)":x)+">"},q.$$arity=0);a.def(n,"$each_byte",A=function(G){a.slice.call(arguments,0,arguments.length);
return this.$raise(m(R,"NotImplementedError"))},A.$$arity=-1);a.def(n,"$bytesize",E=function(G){a.slice.call(arguments,0,arguments.length);return this.$raise(m(R,"NotImplementedError"))},E.$$arity=-1);(function(G,$super,ba){[u(G,$super,"EncodingError")].concat(ba);return x})(R[0],m(R,"StandardError"),R);return function(G,$super,ba){[u(G,$super,"CompatibilityError")].concat(ba);return x}(R[0],m(R,"EncodingError"),R)})(H[0],null,H);I(m(H,"Encoding"),"register",["UTF-8",c(["aliases","ascii"],{aliases:["CP65001"],
ascii:!0})],(J=function(){var n=null==J.$$s?this:J.$$s,L,D;a.def(n,"$each_byte",L=function(R){var ka=L.$$p,da=ka||x;ka&&(L.$$p=null);ka&&(L.$$p=null);ka=Infinity;for(var ma,b=R.length,h=null,f=0;f<b;++f){ma=R.charCodeAt(f);if(55295<ma&&57344>ma){if(!h){if(56319<ma){-1<(ka-=3)&&(a.yield1(da,239),a.yield1(da,191),a.yield1(da,189));continue}else if(f+1===b){-1<(ka-=3)&&(a.yield1(da,239),a.yield1(da,191),a.yield1(da,189));continue}h=ma;continue}if(56320>ma){-1<(ka-=3)&&(a.yield1(da,239),a.yield1(da,191),
a.yield1(da,189));h=ma;continue}ma=(h-55296<<10|ma-56320)+65536}else h&&-1<(ka-=3)&&(a.yield1(da,239),a.yield1(da,191),a.yield1(da,189));h=null;if(128>ma){if(0>--ka)break;a.yield1(da,ma)}else if(2048>ma){if(0>(ka-=2))break;a.yield1(da,ma>>6|192);a.yield1(da,ma&63|128)}else if(65536>ma){if(0>(ka-=3))break;a.yield1(da,ma>>12|224);a.yield1(da,ma>>6&63|128);a.yield1(da,ma&63|128)}else if(1114112>ma){if(0>(ka-=4))break;a.yield1(da,ma>>18|240);a.yield1(da,ma>>12&63|128);a.yield1(da,ma>>6&63|128);a.yield1(da,
ma&63|128)}}},L.$$arity=1);return(a.def(n,"$bytesize",D=function(R){return R.$bytes().$length()},D.$$arity=1),x)&&"bytesize"},J.$$s=d,J.$$arity=0,J));I(m(H,"Encoding"),"register",["UTF-16LE"],(t=function(){var n=null==t.$$s?this:t.$$s,L,D;a.def(n,"$each_byte",L=function(R){var ka=L.$$p,da=ka||x;ka&&(L.$$p=null);ka&&(L.$$p=null);ka=0;for(var ma=R.length;ka<ma;ka++){var b=R.charCodeAt(ka);a.yield1(da,b&255);a.yield1(da,b>>8)}},L.$$arity=1);return(a.def(n,"$bytesize",D=function(R){return R.$bytes().$length()},
D.$$arity=1),x)&&"bytesize"},t.$$s=d,t.$$arity=0,t));I(m(H,"Encoding"),"register",["UTF-16BE"],(w=function(){var n=null==w.$$s?this:w.$$s,L,D;a.def(n,"$each_byte",L=function(R){var ka=L.$$p,da=ka||x;ka&&(L.$$p=null);ka&&(L.$$p=null);ka=0;for(var ma=R.length;ka<ma;ka++){var b=R.charCodeAt(ka);a.yield1(da,b>>8);a.yield1(da,b&255)}},L.$$arity=1);return(a.def(n,"$bytesize",D=function(R){return R.$bytes().$length()},D.$$arity=1),x)&&"bytesize"},w.$$s=d,w.$$arity=0,w));I(m(H,"Encoding"),"register",["UTF-32LE"],
(z=function(){var n=null==z.$$s?this:z.$$s,L,D;a.def(n,"$each_byte",L=function(R){var ka=L.$$p,da=ka||x;ka&&(L.$$p=null);ka&&(L.$$p=null);ka=0;for(var ma=R.length;ka<ma;ka++){var b=R.charCodeAt(ka);a.yield1(da,b&255);a.yield1(da,b>>8)}},L.$$arity=1);return(a.def(n,"$bytesize",D=function(R){return R.$bytes().$length()},D.$$arity=1),x)&&"bytesize"},z.$$s=d,z.$$arity=0,z));I(m(H,"Encoding"),"register",["ASCII-8BIT",c(["aliases","ascii","dummy"],{aliases:["BINARY","US-ASCII","ASCII"],ascii:!0,dummy:!0})],
(p=function(){var n=null==p.$$s?this:p.$$s,L,D;a.def(n,"$each_byte",L=function(R){var ka=L.$$p,da=ka||x;ka&&(L.$$p=null);ka&&(L.$$p=null);ka=0;for(var ma=R.length;ka<ma;ka++){var b=R.charCodeAt(ka);a.yield1(da,b&255);a.yield1(da,b>>8)}},L.$$arity=1);return(a.def(n,"$bytesize",D=function(R){return R.$bytes().$length()},D.$$arity=1),x)&&"bytesize"},p.$$s=d,p.$$arity=0,p));(function(n,$super,D){n=u(n,$super,"String");var R=[n].concat(D),ka,da,ma,b,h,f,q,A,E;n.$$prototype.bytes=n.$$prototype.internal_encoding=
x;n.$attr_reader("encoding");n.$attr_reader("internal_encoding");a.defineProperty(String.prototype,"bytes",x);a.defineProperty(String.prototype,"encoding",l(m(R,"Encoding"),"UTF_8"));a.defineProperty(String.prototype,"internal_encoding",l(m(R,"Encoding"),"UTF_8"));a.def(n,"$bytes",ka=function(){var G=x;this.bytes=k(G=this.bytes)?G:this.$each_byte().$to_a();return this.bytes.$dup()},ka.$$arity=0);a.def(n,"$bytesize",da=function(){return this.internal_encoding.$bytesize(this)},da.$$arity=0);a.def(n,
"$each_byte",ma=function(){var G=ma.$$p,M=G||x;G&&(ma.$$p=null);G&&(ma.$$p=null);if(M===x)return this.$enum_for("each_byte");I(this.internal_encoding,"each_byte",[this],M.$to_proc());return this},ma.$$arity=0);a.def(n,"$each_codepoint",b=function(){var G=b.$$p,M=G||x;G&&(b.$$p=null);G&&(b.$$p=null);if(M===x)return this.$enum_for("each_codepoint");G=0;for(var ba=this.length;G<ba;G++)a.yield1(M,this.codePointAt(G));return this},b.$$arity=0);a.def(n,"$codepoints",h=function(){var G=h.$$p,M=G||x;G&&(h.$$p=
null);G&&(h.$$p=null);return M!==x?I(this,"each_codepoint",[],M.$to_proc()):this.$each_codepoint().$to_a()},h.$$arity=0);a.def(n,"$encode",f=function(G){return a.enc(this,G)},f.$$arity=1);a.def(n,"$force_encoding",q=function(G){if(G===this.encoding)return this;G=m(R,"Opal")["$coerce_to!"](G,m(R,"String"),"to_s");G=m(R,"Encoding").$find(G);if(G===this.encoding)return this;a.set_encoding(this,G);return this},q.$$arity=1);a.def(n,"$getbyte",A=function(G){var M=this.$bytes();G=m(R,"Opal")["$coerce_to!"](G,
m(R,"Integer"),"to_int");var ba=M.$length();ba="number"===typeof ba&&"number"===typeof G?ba<G:ba["$<"](G);return k(ba)?x:M["$[]"](G)},A.$$arity=1);return(a.def(n,"$valid_encoding?",E=function(){return!0},E.$$arity=0),x)&&"valid_encoding?"})(H[0],null,H);e=[l(m(H,"Encoding"),"UTF_8")];I(m(H,"Encoding"),"default_external=",a.to_a(e));return e[function(n,L){return"number"===typeof n&&"number"===typeof L?n-L:n["$-"](L)}(e.length,1)]};
Opal.modules["corelib/math"]=function(a){var y=[],J=a.$$$,t=a.$$,w=a.type_error,z=a.module,p=a.truthy;a.add_stubs("$new $raise $Float $Integer $module_function $checked $float! $=== $gamma $- $integer! $/ $infinite?".split(" "));return function(d,H){d=z(d,"Math");var x=[d].concat(H),l,m,u,c,k,I,e,n,L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na;a.const_set(x[0],"E",Math.E);a.const_set(x[0],"PI",Math.PI);a.const_set(x[0],"DomainError",t(x,"Class").$new(t(x,"StandardError")));a.defs(d,"$checked",
l=function(S,sa){var ya=a.slice.call(arguments,1,arguments.length);if(isNaN(ya[0])||2==ya.length&&isNaN(ya[1]))return NaN;ya=Math[S].apply(null,ya);isNaN(ya)&&this.$raise(t(x,"DomainError"),'Numerical argument is out of domain - "'+S+'"');return ya},l.$$arity=-2);a.defs(d,"$float!",m=function(S){try{return this.$Float(S)}catch(sa){if(a.rescue(sa,[t(x,"ArgumentError")]))try{return this.$raise(w(S,t(x,"Float")))}finally{a.pop_exception()}else throw sa;}},m.$$arity=1);a.defs(d,"$integer!",u=function(S){try{return this.$Integer(S)}catch(sa){if(a.rescue(sa,
[t(x,"ArgumentError")]))try{return this.$raise(w(S,t(x,"Integer")))}finally{a.pop_exception()}else throw sa;}},u.$$arity=1);d.$module_function();a.def(d,"$acos",c=function(S){return t(x,"Math").$checked("acos",t(x,"Math")["$float!"](S))},c.$$arity=1);p("undefined"!==typeof Math.acosh)||(Math.acosh=function(S){return Math.log(S+Math.sqrt(S*S-1))});a.def(d,"$acosh",k=function(S){return t(x,"Math").$checked("acosh",t(x,"Math")["$float!"](S))},k.$$arity=1);a.def(d,"$asin",I=function(S){return t(x,"Math").$checked("asin",
t(x,"Math")["$float!"](S))},I.$$arity=1);p("undefined"!==typeof Math.asinh)||(Math.asinh=function(S){return Math.log(S+Math.sqrt(S*S+1))});a.def(d,"$asinh",e=function(S){return t(x,"Math").$checked("asinh",t(x,"Math")["$float!"](S))},e.$$arity=1);a.def(d,"$atan",n=function(S){return t(x,"Math").$checked("atan",t(x,"Math")["$float!"](S))},n.$$arity=1);a.def(d,"$atan2",L=function(S,sa){return t(x,"Math").$checked("atan2",t(x,"Math")["$float!"](S),t(x,"Math")["$float!"](sa))},L.$$arity=2);p("undefined"!==
typeof Math.atanh)||(Math.atanh=function(S){return.5*Math.log((1+S)/(1-S))});a.def(d,"$atanh",D=function(S){return t(x,"Math").$checked("atanh",t(x,"Math")["$float!"](S))},D.$$arity=1);p("undefined"!==typeof Math.cbrt)||(Math.cbrt=function(S){if(0==S)return 0;if(0>S)return-Math.cbrt(-S);for(var sa=S,ya=0;.125>sa;)sa*=8,ya--;for(;1<sa;)sa*=.125,ya++;for(sa=(-.46946116*sa+1.072302)*sa+.3812513;0>ya;)sa*=.5,ya++;for(;0<ya;)sa*=2,ya--;sa=2/3*sa+1/3*S/(sa*sa);sa=2/3*sa+1/3*S/(sa*sa);sa=2/3*sa+1/3*S/(sa*
sa);return 2/3*sa+1/3*S/(sa*sa)});a.def(d,"$cbrt",R=function(S){return t(x,"Math").$checked("cbrt",t(x,"Math")["$float!"](S))},R.$$arity=1);a.def(d,"$cos",ka=function(S){return t(x,"Math").$checked("cos",t(x,"Math")["$float!"](S))},ka.$$arity=1);p("undefined"!==typeof Math.cosh)||(Math.cosh=function(S){return(Math.exp(S)+Math.exp(-S))/2});a.def(d,"$cosh",da=function(S){return t(x,"Math").$checked("cosh",t(x,"Math")["$float!"](S))},da.$$arity=1);p("undefined"!==typeof Math.erf)||a.defineProperty(Math,
"erf",function(S){var sa=1;0>S&&(sa=-1);S=Math.abs(S);var ya=1/(1+.3275911*S);return sa*(1-((((1.061405429*ya+-1.453152027)*ya+1.421413741)*ya+-.284496736)*ya+.254829592)*ya*Math.exp(-S*S))});a.def(d,"$erf",ma=function(S){return t(x,"Math").$checked("erf",t(x,"Math")["$float!"](S))},ma.$$arity=1);p("undefined"!==typeof Math.erfc)||a.defineProperty(Math,"erfc",function(S){var sa=Math.abs(S),ya=1/(.5*sa+1);sa=ya*Math.exp(-sa*sa-1.26551223+ya*(ya*(ya*(ya*(ya*(ya*(ya*(ya*(.17087277*ya+-.82215223)+1.48851587)+
-1.13520398)+.27886807)+-.18628806)+.09678418)+.37409196)+1.00002368));return 0>S?2-sa:sa});a.def(d,"$erfc",b=function(S){return t(x,"Math").$checked("erfc",t(x,"Math")["$float!"](S))},b.$$arity=1);a.def(d,"$exp",h=function(S){return t(x,"Math").$checked("exp",t(x,"Math")["$float!"](S))},h.$$arity=1);a.def(d,"$frexp",f=function(S){S=t(x,"Math")["$float!"](S);if(isNaN(S))return[NaN,0];var sa=Math.floor(Math.log(Math.abs(S))/Math.log(2))+1;return[S/Math.pow(2,sa),sa]},f.$$arity=1);a.def(d,"$gamma",
q=function(S){S=t(x,"Math")["$float!"](S);var sa=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];if(isNaN(S))return NaN;if(0===S&&0>1/S)return-Infinity;-1!==S&&-Infinity!==S||this.$raise(t(x,"DomainError"),'Numerical argument is out of domain - "gamma"');
if(t(x,"Integer")["$==="](S)){if(0>=S)return isFinite(S)?Infinity:NaN;if(171<S)return Infinity;var ya=S-2;for(--S;1<ya;)S*=ya,ya--;0==S&&(S=1);return S}if(.5>S)return Math.PI/(Math.sin(Math.PI*S)*t(x,"Math").$gamma("number"===typeof S?1-S:1["$-"](S)));if(171.35<=S)return Infinity;if(85<S){ya=S*S;var pa=ya*S;sa=pa*S;var fa=sa*S;return Math.sqrt(2*Math.PI/S)*Math.pow(S/Math.E,S)*(1+1/(12*S)+1/(288*ya)-139/(51840*pa)-571/(2488320*sa)+163879/(209018880*fa)+5246819/(75246796800*fa*S))}--S;ya=sa[0];for(pa=
1;pa<sa.length;++pa)ya+=sa[pa]/(S+pa);pa=S+4.7421875+.5;return Math.sqrt(2*Math.PI)*Math.pow(pa,S+.5)*Math.exp(-pa)*ya},q.$$arity=1);p("undefined"!==typeof Math.hypot)||(Math.hypot=function(S,sa){return Math.sqrt(S*S+sa*sa)});a.def(d,"$hypot",A=function(S,sa){return t(x,"Math").$checked("hypot",t(x,"Math")["$float!"](S),t(x,"Math")["$float!"](sa))},A.$$arity=2);a.def(d,"$ldexp",E=function(S,sa){S=t(x,"Math")["$float!"](S);sa=t(x,"Math")["$integer!"](sa);isNaN(sa)&&this.$raise(t(x,"RangeError"),"float NaN out of range of integer");
return S*Math.pow(2,sa)},E.$$arity=2);a.def(d,"$lgamma",G=function(S){return-1==S?[Infinity,1]:[Math.log(Math.abs(t(x,"Math").$gamma(S))),0>t(x,"Math").$gamma(S)?-1:1]},G.$$arity=1);a.def(d,"$log",M=function(S,sa){p(t(x,"String")["$==="](S))&&this.$raise(w(S,t(x,"Float")));if(p(null==sa))return t(x,"Math").$checked("log",t(x,"Math")["$float!"](S));p(t(x,"String")["$==="](sa))&&this.$raise(w(sa,t(x,"Float")));S=t(x,"Math").$checked("log",t(x,"Math")["$float!"](S));sa=t(x,"Math").$checked("log",t(x,
"Math")["$float!"](sa));return"number"===typeof S&&"number"===typeof sa?S/sa:S["$/"](sa)},M.$$arity=-2);p("undefined"!==typeof Math.log10)||(Math.log10=function(S){return Math.log(S)/Math.LN10});a.def(d,"$log10",ba=function(S){p(t(x,"String")["$==="](S))&&this.$raise(w(S,t(x,"Float")));return t(x,"Math").$checked("log10",t(x,"Math")["$float!"](S))},ba.$$arity=1);p("undefined"!==typeof Math.log2)||(Math.log2=function(S){return Math.log(S)/Math.LN2});a.def(d,"$log2",ua=function(S){p(t(x,"String")["$==="](S))&&
this.$raise(w(S,t(x,"Float")));return t(x,"Math").$checked("log2",t(x,"Math")["$float!"](S))},ua.$$arity=1);a.def(d,"$sin",Pa=function(S){return t(x,"Math").$checked("sin",t(x,"Math")["$float!"](S))},Pa.$$arity=1);p("undefined"!==typeof Math.sinh)||(Math.sinh=function(S){return(Math.exp(S)-Math.exp(-S))/2});a.def(d,"$sinh",xa=function(S){return t(x,"Math").$checked("sinh",t(x,"Math")["$float!"](S))},xa.$$arity=1);a.def(d,"$sqrt",Da=function(S){return t(x,"Math").$checked("sqrt",t(x,"Math")["$float!"](S))},
Da.$$arity=1);a.def(d,"$tan",Ma=function(S){S=t(x,"Math")["$float!"](S);return p(S["$infinite?"]())?J(t(x,"Float"),"NAN"):t(x,"Math").$checked("tan",t(x,"Math")["$float!"](S))},Ma.$$arity=1);p("undefined"!==typeof Math.tanh)||(Math.tanh=function(S){return Infinity==S?1:-Infinity==S?-1:(Math.exp(S)-Math.exp(-S))/(Math.exp(S)+Math.exp(-S))});a.def(d,"$tanh",na=function(S){return t(x,"Math").$checked("tanh",t(x,"Math")["$float!"](S))},na.$$arity=1)}(y[0],y)};
Opal.modules["corelib/complex"]=function(a){function y(c,k){return"number"===typeof c&&"number"===typeof k?c*k:c["$*"](k)}function J(c,k){return"number"===typeof c&&"number"===typeof k?c+k:c["$+"](k)}function t(c,k){return"number"===typeof c&&"number"===typeof k?c-k:c["$-"](k)}function w(c,k){return"number"===typeof c&&"number"===typeof k?c/k:c["$/"](k)}var z=a.top,p=[],d=a.nil,H=a.$$$,x=a.$$,l=a.klass,m=a.truthy,u=a.module;a.add_stubs("$require $=== $real? $raise $new $* $cos $sin $attr_reader $class $== $real $imag $Complex $-@ $+ $__coerced__ $- $nan? $/ $conj $abs2 $quo $polar $exp $log $> $!= $divmod $** $hypot $atan2 $lcm $denominator $finite? $infinite? $numerator $abs $arg $rationalize $to_f $to_i $to_r $inspect $positive? $zero? $Rational".split(" "));
z.$require("corelib/numeric");(function(c,$super,I){c=l(c,$super,"Complex");var e=[c].concat(I),n,L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va;c.$$prototype.real=c.$$prototype.imag=d;a.defs(c,"$rect",n=function(ea,wa){var Ga=d,Fa=d,Ra=d;null==wa&&(wa=0);m(m(Ga=m(Fa=m(Ra=x(e,"Numeric")["$==="](ea))?ea["$real?"]():Ra)?x(e,"Numeric")["$==="](wa):Fa)?wa["$real?"]():Ga)||this.$raise(x(e,"TypeError"),"not a real");return this.$new(ea,wa)},n.$$arity=-2);(function(ea,wa){[ea].concat(wa);
return a.alias(ea,"rectangular","rect")})(a.get_singleton_class(c),e);a.defs(c,"$polar",L=function(ea,wa){var Ga=d,Fa=d,Ra=d;null==wa&&(wa=0);m(m(Ga=m(Fa=m(Ra=x(e,"Numeric")["$==="](ea))?ea["$real?"]():Ra)?x(e,"Numeric")["$==="](wa):Fa)?wa["$real?"]():Ga)||this.$raise(x(e,"TypeError"),"not a real");return this.$new(y(ea,x(e,"Math").$cos(wa)),y(ea,x(e,"Math").$sin(wa)))},L.$$arity=-2);c.$attr_reader("real","imag");a.def(c,"$initialize",D=function(ea,wa){null==wa&&(wa=0);this.real=ea;return this.imag=
wa},D.$$arity=-2);a.def(c,"$coerce",R=function(ea){var wa=d;return m(x(e,"Complex")["$==="](ea))?[ea,this]:m(m(wa=x(e,"Numeric")["$==="](ea))?ea["$real?"]():wa)?[x(e,"Complex").$new(ea,0),this]:this.$raise(x(e,"TypeError"),""+ea.$class()+" can't be coerced into Complex")},R.$$arity=1);a.def(c,"$==",ka=function(ea){var wa=d,Ga=d,Fa=d;return m(x(e,"Complex")["$==="](ea))?m(wa=this.real["$=="](ea.$real()))?this.imag["$=="](ea.$imag()):wa:m(m(Ga=x(e,"Numeric")["$==="](ea))?ea["$real?"]():Ga)?m(Fa=this.real["$=="](ea))?
this.imag["$=="](0):Fa:ea["$=="](this)},ka.$$arity=1);a.def(c,"$-@",da=function(){return this.$Complex(this.real["$-@"](),this.imag["$-@"]())},da.$$arity=0);a.def(c,"$+",ma=function(ea){var wa=d;return m(x(e,"Complex")["$==="](ea))?this.$Complex(J(this.real,ea.$real()),J(this.imag,ea.$imag())):m(m(wa=x(e,"Numeric")["$==="](ea))?ea["$real?"]():wa)?this.$Complex(J(this.real,ea),this.imag):this.$__coerced__("+",ea)},ma.$$arity=1);a.def(c,"$-",b=function(ea){var wa=d;return m(x(e,"Complex")["$==="](ea))?
this.$Complex(t(this.real,ea.$real()),t(this.imag,ea.$imag())):m(m(wa=x(e,"Numeric")["$==="](ea))?ea["$real?"]():wa)?this.$Complex(t(this.real,ea),this.imag):this.$__coerced__("-",ea)},b.$$arity=1);a.def(c,"$*",h=function(ea){var wa=d;return m(x(e,"Complex")["$==="](ea))?this.$Complex(t(y(this.real,ea.$real()),y(this.imag,ea.$imag())),J(y(this.real,ea.$imag()),y(this.imag,ea.$real()))):m(m(wa=x(e,"Numeric")["$==="](ea))?ea["$real?"]():wa)?this.$Complex(y(this.real,ea),y(this.imag,ea)):this.$__coerced__("*",
ea)},h.$$arity=1);a.def(c,"$/",f=function(ea){var wa=d,Ga=d,Fa=d,Ra=d,Ta=d,Ja=d,kb=d,jb=d;return m(x(e,"Complex")["$==="](ea))?m(m(wa=m(Ga=m(Fa=m(Ra=x(e,"Number")["$==="](this.real))?this.real["$nan?"]():Ra)?Fa:m(Ta=x(e,"Number")["$==="](this.imag))?this.imag["$nan?"]():Ta)?Ga:m(Ja=x(e,"Number")["$==="](ea.$real()))?ea.$real()["$nan?"]():Ja)?wa:m(kb=x(e,"Number")["$==="](ea.$imag()))?ea.$imag()["$nan?"]():kb)?x(e,"Complex").$new(H(x(e,"Float"),"NAN"),H(x(e,"Float"),"NAN")):w(y(this,ea.$conj()),ea.$abs2()):
m(m(jb=x(e,"Numeric")["$==="](ea))?ea["$real?"]():jb)?this.$Complex(this.real.$quo(ea),this.imag.$quo(ea)):this.$__coerced__("/",ea)},f.$$arity=1);a.def(c,"$**",q=function(ea){var wa=d;if(ea["$=="](0))return x(e,"Complex").$new(1,0);if(m(x(e,"Complex")["$==="](ea))){wa=this.$polar();var Ga=a.to_ary(wa);var Fa=null==Ga[0]?d:Ga[0];Ga=null==Ga[1]?d:Ga[1];wa;wa=ea.$real();var Ra=ea.$imag();ea=x(e,"Math").$exp(t(y(wa,x(e,"Math").$log(Fa)),y(Ra,Ga)));wa=J(y(Ga,wa),y(Ra,x(e,"Math").$log(Fa)));return x(e,
"Complex").$polar(ea,wa)}if(m(x(e,"Integer")["$==="](ea))){if(m("number"===typeof ea?0<ea:ea["$>"](0))){Ga=Fa=this;for(Ra=t(ea,1);m(Ra["$!="](0));){ea=Ra.$divmod(2);wa=a.to_ary(ea);var Ta=null==wa[0]?d:wa[0];var Ja=null==wa[1]?d:wa[1];for(ea;Ja["$=="](0);)Fa=this.$Complex(t(y(Fa.$real(),Fa.$real()),y(Fa.$imag(),Fa.$imag())),y(y(2,Fa.$real()),Fa.$imag())),Ra=Ta,wa=Ra.$divmod(2),ea=a.to_ary(wa),Ta=null==ea[0]?d:ea[0],Ja=null==ea[1]?d:ea[1],wa;Ga=y(Ga,Fa);Ra=t(Ra,1)}return Ga}return w(x(e,"Rational").$new(1,
1),this)["$**"](ea["$-@"]())}return m(m(wa=x(e,"Float")["$==="](ea))?wa:x(e,"Rational")["$==="](ea))?(wa=this.$polar(),Ga=a.to_ary(wa),Fa=null==Ga[0]?d:Ga[0],Ga=null==Ga[1]?d:Ga[1],wa,x(e,"Complex").$polar(Fa["$**"](ea),y(Ga,ea))):this.$__coerced__("**",ea)},q.$$arity=1);a.def(c,"$abs",A=function(){return x(e,"Math").$hypot(this.real,this.imag)},A.$$arity=0);a.def(c,"$abs2",E=function(){return J(y(this.real,this.real),y(this.imag,this.imag))},E.$$arity=0);a.def(c,"$angle",G=function(){return x(e,
"Math").$atan2(this.imag,this.real)},G.$$arity=0);a.alias(c,"arg","angle");a.def(c,"$conj",M=function(){return this.$Complex(this.real,this.imag["$-@"]())},M.$$arity=0);a.alias(c,"conjugate","conj");a.def(c,"$denominator",ba=function(){return this.real.$denominator().$lcm(this.imag.$denominator())},ba.$$arity=0);a.alias(c,"divide","/");a.def(c,"$eql?",ua=function(ea){var wa=d,Ga=d;return m(wa=m(Ga=x(e,"Complex")["$==="](ea))?this.real.$class()["$=="](this.imag.$class()):Ga)?this["$=="](ea):wa},ua.$$arity=
1);a.def(c,"$fdiv",Pa=function(ea){m(x(e,"Numeric")["$==="](ea))||this.$raise(x(e,"TypeError"),""+ea.$class()+" can't be coerced into Complex");return w(this,ea)},Pa.$$arity=1);a.def(c,"$finite?",xa=function(){var ea;return m(ea=this.real["$finite?"]())?this.imag["$finite?"]():ea},xa.$$arity=0);a.def(c,"$hash",Da=function(){return"Complex:"+this.real+":"+this.imag},Da.$$arity=0);a.alias(c,"imaginary","imag");a.def(c,"$infinite?",Ma=function(){var ea;return m(ea=this.real["$infinite?"]())?ea:this.imag["$infinite?"]()},
Ma.$$arity=0);a.def(c,"$inspect",na=function(){return"("+this+")"},na.$$arity=0);a.alias(c,"magnitude","abs");a.udef(c,"$negative?");a.def(c,"$numerator",S=function(){var ea=this.$denominator();return this.$Complex(y(this.real.$numerator(),w(ea,this.real.$denominator())),y(this.imag.$numerator(),w(ea,this.imag.$denominator())))},S.$$arity=0);a.alias(c,"phase","arg");a.def(c,"$polar",sa=function(){return[this.$abs(),this.$arg()]},sa.$$arity=0);a.udef(c,"$positive?");a.alias(c,"quo","/");a.def(c,"$rationalize",
ya=function(ea){1<arguments.length&&this.$raise(x(e,"ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)");m(this.imag["$!="](0))&&this.$raise(x(e,"RangeError"),"can't' convert "+this+" into Rational");return this.$real().$rationalize(ea)},ya.$$arity=-1);a.def(c,"$real?",pa=function(){return!1},pa.$$arity=0);a.def(c,"$rect",fa=function(){return[this.real,this.imag]},fa.$$arity=0);a.alias(c,"rectangular","rect");a.def(c,"$to_f",F=function(){this.imag["$=="](0)||this.$raise(x(e,
"RangeError"),"can't convert "+this+" into Float");return this.real.$to_f()},F.$$arity=0);a.def(c,"$to_i",T=function(){this.imag["$=="](0)||this.$raise(x(e,"RangeError"),"can't convert "+this+" into Integer");return this.real.$to_i()},T.$$arity=0);a.def(c,"$to_r",ja=function(){this.imag["$=="](0)||this.$raise(x(e,"RangeError"),"can't convert "+this+" into Rational");return this.real.$to_r()},ja.$$arity=0);a.def(c,"$to_s",va=function(){var ea=d,wa=d,Ga=d,Fa=d,Ra=d;var Ta=this.real.$inspect();Ta=J(Ta,
m(m(ea=m(wa=m(Ga=x(e,"Number")["$==="](this.imag))?this.imag["$nan?"]():Ga)?wa:this.imag["$positive?"]())?ea:this.imag["$zero?"]())?"+":"-");Ta=J(Ta,this.imag.$abs().$inspect());m(m(Fa=x(e,"Number")["$==="](this.imag))?m(Ra=this.imag["$nan?"]())?Ra:this.imag["$infinite?"]():Fa)&&(Ta=J(Ta,"*"));return J(Ta,"i")},va.$$arity=0);return a.const_set(e[0],"I",c.$new(0,1))})(p[0],x(p,"Numeric"),p);(function(c,k){c=u(c,"Kernel");var I=[c].concat(k),e;a.def(c,"$Complex",e=function(n,L){null==L&&(L=d);return m(L)?
x(I,"Complex").$new(n,L):x(I,"Complex").$new(n,0)},e.$$arity=-2)})(p[0],p);return function(c,$super,I){c=l(c,$super,"String");[c].concat(I);var e;return(a.def(c,"$to_c",e=function(){function n(){var b=R.match(ka)[0];R=R.slice(b.length);return b.replace(/_/g,"")}function L(){if(ka.test(R)){var b=parseFloat(n());if("/"===R[0]){R=R.slice(1);if(ka.test(R)){var h=parseFloat(n());return D.$Rational(b,h)}R="/"+R}return b}return null}var D=this,R=D,ka=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;R.match(ka);var da;var ma=
L();return ma?(da=L())?D.$Complex(ma,da):"i"===R[0]?D.$Complex(0,ma):D.$Complex(ma,0):"i"===R[0]?D.$Complex(0,1):"-"===R[0]&&"i"===R[1]?D.$Complex(0,-1):"+"===R[0]&&"i"===R[1]?D.$Complex(0,1):D.$Complex(0,0)},e.$$arity=0),d)&&"to_c"}(p[0],null,p)};
Opal.modules["corelib/rational"]=function(a){function y(k,I){return"number"===typeof k&&"number"===typeof I?k<I:k["$<"](I)}function J(k,I){return"number"===typeof k&&"number"===typeof I?k/I:k["$/"](I)}function t(k,I){return"number"===typeof k&&"number"===typeof I?k-I:k["$-"](I)}function w(k,I){return"number"===typeof k&&"number"===typeof I?k*I:k["$*"](I)}function z(k,I){return"number"===typeof k&&"number"===typeof I?k+I:k["$+"](I)}var p=a.top,d=[],H=a.nil,x=a.$$$,l=a.$$,m=a.klass,u=a.truthy,c=a.module;
a.add_stubs("$require $to_i $== $raise $< $-@ $new $gcd $/ $nil? $=== $reduce $to_r $equal? $! $coerce_to! $to_f $numerator $denominator $<=> $- $* $__coerced__ $+ $Rational $> $** $abs $ceil $with_precision $floor $<= $truncate $send $convert".split(" "));p.$require("corelib/numeric");(function(k,$super,e){k=m(k,$super,"Rational");var n=[k].concat(e),L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa;k.$$prototype.num=k.$$prototype.den=H;a.defs(k,"$reduce",L=function(F,T){F=F.$to_i();
T=T.$to_i();if(T["$=="](0))this.$raise(l(n,"ZeroDivisionError"),"divided by 0");else if(u(y(T,0)))F=F["$-@"](),T=T["$-@"]();else if(T["$=="](1))return this.$new(F,T);var ja=F.$gcd(T);return this.$new(J(F,ja),J(T,ja))},L.$$arity=2);a.defs(k,"$convert",D=function(F,T){var ja=H,va=H,ea=H,wa=H,Ga=H,Fa=H,Ra=H,Ta=H;u(u(ja=F["$nil?"]())?ja:T["$nil?"]())&&this.$raise(l(n,"TypeError"),"cannot convert nil into Rational");if(u(u(va=l(n,"Integer")["$==="](F))?l(n,"Integer")["$==="](T):va))return this.$reduce(F,
T);u(u(ea=u(wa=l(n,"Float")["$==="](F))?wa:l(n,"String")["$==="](F))?ea:l(n,"Complex")["$==="](F))&&(F=F.$to_r());u(u(Ga=u(Fa=l(n,"Float")["$==="](T))?Fa:l(n,"String")["$==="](T))?Ga:l(n,"Complex")["$==="](T))&&(T=T.$to_r());return u(u(Ra=T["$equal?"](1))?l(n,"Integer")["$==="](F)["$!"]():Ra)?l(n,"Opal")["$coerce_to!"](F,l(n,"Rational"),"to_r"):u(u(Ta=l(n,"Numeric")["$==="](F))?l(n,"Numeric")["$==="](T):Ta)?J(F,T):this.$reduce(F,T)},D.$$arity=2);a.def(k,"$initialize",R=function(F,T){this.num=F;return this.den=
T},R.$$arity=2);a.def(k,"$numerator",ka=function(){return this.num},ka.$$arity=0);a.def(k,"$denominator",da=function(){return this.den},da.$$arity=0);a.def(k,"$coerce",ma=function(F){return l(n,"Rational")["$==="](F)?[F,this]:l(n,"Integer")["$==="](F)?[F.$to_r(),this]:l(n,"Float")["$==="](F)?[F,this.$to_f()]:H},ma.$$arity=1);a.def(k,"$==",b=function(F){var T=H,ja=H;return l(n,"Rational")["$==="](F)?u(T=this.num["$=="](F.$numerator()))?this.den["$=="](F.$denominator()):T:l(n,"Integer")["$==="](F)?
u(ja=this.num["$=="](F))?this.den["$=="](1):ja:l(n,"Float")["$==="](F)?this.$to_f()["$=="](F):F["$=="](this)},b.$$arity=1);a.def(k,"$<=>",h=function(F){return l(n,"Rational")["$==="](F)?t(w(this.num,F.$denominator()),w(this.den,F.$numerator()))["$<=>"](0):l(n,"Integer")["$==="](F)?t(this.num,w(this.den,F))["$<=>"](0):l(n,"Float")["$==="](F)?this.$to_f()["$<=>"](F):this.$__coerced__("<=>",F)},h.$$arity=1);a.def(k,"$+",f=function(F){if(l(n,"Rational")["$==="](F)){var T=z(w(this.num,F.$denominator()),
w(this.den,F.$numerator()));F=w(this.den,F.$denominator());T=this.$Rational(T,F)}else T=l(n,"Integer")["$==="](F)?this.$Rational(z(this.num,w(F,this.den)),this.den):l(n,"Float")["$==="](F)?z(this.$to_f(),F):this.$__coerced__("+",F);return T},f.$$arity=1);a.def(k,"$-",q=function(F){if(l(n,"Rational")["$==="](F)){var T=t(w(this.num,F.$denominator()),w(this.den,F.$numerator()));F=w(this.den,F.$denominator());T=this.$Rational(T,F)}else T=l(n,"Integer")["$==="](F)?this.$Rational(t(this.num,w(F,this.den)),
this.den):l(n,"Float")["$==="](F)?t(this.$to_f(),F):this.$__coerced__("-",F);return T},q.$$arity=1);a.def(k,"$*",A=function(F){if(l(n,"Rational")["$==="](F)){var T=w(this.num,F.$numerator());F=w(this.den,F.$denominator());T=this.$Rational(T,F)}else T=l(n,"Integer")["$==="](F)?this.$Rational(w(this.num,F),this.den):l(n,"Float")["$==="](F)?w(this.$to_f(),F):this.$__coerced__("*",F);return T},A.$$arity=1);a.def(k,"$/",E=function(F){if(l(n,"Rational")["$==="](F)){var T=w(this.num,F.$denominator());F=
w(this.den,F.$numerator());T=this.$Rational(T,F)}else T=l(n,"Integer")["$==="](F)?F["$=="](0)?J(this.$to_f(),0):this.$Rational(this.num,w(this.den,F)):l(n,"Float")["$==="](F)?J(this.$to_f(),F):this.$__coerced__("/",F);return T},E.$$arity=1);a.def(k,"$**",G=function(F){var T=H,ja=H;return l(n,"Integer")["$==="](F)?u(u(T=this["$=="](0))?y(F,0):T)?x(l(n,"Float"),"INFINITY"):u("number"===typeof F?0<F:F["$>"](0))?this.$Rational(this.num["$**"](F),this.den["$**"](F)):u(y(F,0))?this.$Rational(this.den["$**"](F["$-@"]()),
this.num["$**"](F["$-@"]())):this.$Rational(1,1):l(n,"Float")["$==="](F)?this.$to_f()["$**"](F):l(n,"Rational")["$==="](F)?F["$=="](0)?this.$Rational(1,1):F.$denominator()["$=="](1)?u(y(F,0))?this.$Rational(this.den["$**"](F.$numerator().$abs()),this.num["$**"](F.$numerator().$abs())):this.$Rational(this.num["$**"](F.$numerator()),this.den["$**"](F.$numerator())):u(u(ja=this["$=="](0))?y(F,0):ja)?this.$raise(l(n,"ZeroDivisionError"),"divided by 0"):this.$to_f()["$**"](F):this.$__coerced__("**",F)},
G.$$arity=1);a.def(k,"$abs",M=function(){return this.$Rational(this.num.$abs(),this.den.$abs())},M.$$arity=0);a.def(k,"$ceil",ba=function(F){null==F&&(F=0);return F["$=="](0)?J(this.num["$-@"](),this.den)["$-@"]().$ceil():this.$with_precision("ceil",F)},ba.$$arity=-1);a.alias(k,"divide","/");a.def(k,"$floor",ua=function(F){null==F&&(F=0);return F["$=="](0)?J(this.num["$-@"](),this.den)["$-@"]().$floor():this.$with_precision("floor",F)},ua.$$arity=-1);a.def(k,"$hash",Pa=function(){return"Rational:"+
this.num+":"+this.den},Pa.$$arity=0);a.def(k,"$inspect",xa=function(){return"("+this+")"},xa.$$arity=0);a.alias(k,"quo","/");a.def(k,"$rationalize",Da=function(F){1<arguments.length&&this.$raise(l(n,"ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)");if(null==F)return this;var T=F.$abs(),ja=t(this,T);T=z(this,T);for(var va=0,ea=1,wa=1,Ga=0,Fa,Ra,Ta;;){Fa=ja.$ceil();if("number"===typeof Fa&&"number"===typeof T?Fa<=T:Fa["$<="](T))break;Ta=Fa-1;Fa=Ta*ea+va;Ra=Ta*Ga+wa;va=J(1,
t(T,Ta));T=J(1,t(ja,Ta));ja=va;va=ea;wa=Ga;ea=Fa;Ga=Ra}return this.$Rational(Fa*ea+va,Fa*Ga+wa)},Da.$$arity=-1);a.def(k,"$round",Ma=function(F){null==F&&(F=0);if(!F["$=="](0))return this.$with_precision("round",F);if(this.num["$=="](0))return 0;if(this.den["$=="](1))return this.num;F=z(w(this.num.$abs(),2),this.den);var T=w(this.den,2);F=J(F,T).$truncate();return u(y(this.num,0))?F["$-@"]():F},Ma.$$arity=-1);a.def(k,"$to_f",na=function(){return J(this.num,this.den)},na.$$arity=0);a.def(k,"$to_i",
S=function(){return this.$truncate()},S.$$arity=0);a.def(k,"$to_r",sa=function(){return this},sa.$$arity=0);a.def(k,"$to_s",ya=function(){return""+this.num+"/"+this.den},ya.$$arity=0);a.def(k,"$truncate",pa=function(F){null==F&&(F=0);return F["$=="](0)?u(y(this.num,0))?this.$ceil():this.$floor():this.$with_precision("truncate",F)},pa.$$arity=-1);return(a.def(k,"$with_precision",fa=function(F,T){u(l(n,"Integer")["$==="](T))||this.$raise(l(n,"TypeError"),"not an Integer");var ja=10["$**"](T);var va=
w(this,ja);return u(y(T,1))?J(va.$send(F),ja).$to_i():this.$Rational(va.$send(F),ja)},fa.$$arity=2),H)&&"with_precision"})(d[0],l(d,"Numeric"),d);(function(k,I){k=c(k,"Kernel");var e=[k].concat(I),n;a.def(k,"$Rational",n=function(L,D){null==D&&(D=1);return l(e,"Rational").$convert(L,D)},n.$$arity=-2)})(d[0],d);return function(k,$super,e){k=m(k,$super,"String");[k].concat(e);var n;return(a.def(k,"$to_r",n=function(){function L(){var ma=D.match(R)[0];D=D.slice(ma.length);return ma.replace(/_/g,"")}
var D=this.trimLeft(),R=/^[+-]?[\d_]+(\.[\d_]+)?/;D.match(R);if(R.test(D)){var ka=parseFloat(L());if("/"===D[0]&&(D=D.slice(1),R.test(D))){var da=parseFloat(L());return this.$Rational(ka,da)}return this.$Rational(ka,1)}return this.$Rational(0,1)},n.$$arity=0),H)&&"to_r"}(d[0],null,d)};
Opal.modules["corelib/time"]=function(a){function y(c,k){return"number"===typeof c&&"number"===typeof k?c+k:c["$+"](k)}function J(c,k){return"number"===typeof c&&"number"===typeof k?c/k:c["$/"](k)}function t(c,k){return"number"===typeof c&&"number"===typeof k?c-k:c["$-"](k)}function w(c,k){return"number"===typeof c&&"number"===typeof k?c<=k:c["$<="](k)}var z=a.top,p=[],d=a.nil,H=a.$$,x=a.slice,l=a.klass,m=a.truthy,u=a.range;a.add_stubs("$require $include $=== $raise $coerce_to! $respond_to? $to_str $to_i $new $<=> $to_f $nil? $> $< $strftime $year $month $day $+ $round $/ $- $copy_instance_variables $initialize_dup $is_a? $zero? $wday $utc? $mon $yday $hour $min $sec $rjust $ljust $zone $to_s $[] $cweek_cyear $isdst $<= $!= $== $ceil".split(" "));
z.$require("corelib/comparable");return function(c,$super,I){function e(Ba,ta,Na,Sa,Ya,Ha){Ba=Ba.$$is_string?parseInt(Ba,10):H(L,"Opal")["$coerce_to!"](Ba,H(L,"Integer"),"to_int");if(ta===d)ta=1;else if(!ta.$$is_number)if(ta["$respond_to?"]("to_str"))switch(ta=ta.$to_str(),ta.toLowerCase()){case "jan":ta=1;break;case "feb":ta=2;break;case "mar":ta=3;break;case "apr":ta=4;break;case "may":ta=5;break;case "jun":ta=6;break;case "jul":ta=7;break;case "aug":ta=8;break;case "sep":ta=9;break;case "oct":ta=
10;break;case "nov":ta=11;break;case "dec":ta=12;break;default:ta=ta.$to_i()}else ta=H(L,"Opal")["$coerce_to!"](ta,H(L,"Integer"),"to_int");(1>ta||12<ta)&&n.$raise(H(L,"ArgumentError"),"month out of range: "+ta);--ta;Na=Na===d?1:Na.$$is_string?parseInt(Na,10):H(L,"Opal")["$coerce_to!"](Na,H(L,"Integer"),"to_int");(1>Na||31<Na)&&n.$raise(H(L,"ArgumentError"),"day out of range: "+Na);Sa=Sa===d?0:Sa.$$is_string?parseInt(Sa,10):H(L,"Opal")["$coerce_to!"](Sa,H(L,"Integer"),"to_int");(0>Sa||24<Sa)&&n.$raise(H(L,
"ArgumentError"),"hour out of range: "+Sa);Ya=Ya===d?0:Ya.$$is_string?parseInt(Ya,10):H(L,"Opal")["$coerce_to!"](Ya,H(L,"Integer"),"to_int");(0>Ya||59<Ya)&&n.$raise(H(L,"ArgumentError"),"min out of range: "+Ya);Ha===d?Ha=0:Ha.$$is_number||(Ha=Ha.$$is_string?parseInt(Ha,10):H(L,"Opal")["$coerce_to!"](Ha,H(L,"Integer"),"to_int"));(0>Ha||60<Ha)&&n.$raise(H(L,"ArgumentError"),"sec out of range: "+Ha);return[Ba,ta,Na,Sa,Ya,Ha]}var n=l(c,$super,"Time"),L=[n].concat(I),D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,
Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za,Ca,Aa;n.$include(H(L,"Comparable"));var bb="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),db="Sun Mon Tue Wed Thu Fri Sat".split(" "),ab="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Wa="January February March April May June July August September October November December".split(" ");a.defs(n,"$at",D=function(Ba,ta){if(H(L,"Time")["$==="](Ba))return void 0!==ta&&this.$raise(H(L,"TypeError"),
"can't convert Time into an exact number"),ta=new Date(Ba.getTime()),ta.is_utc=Ba.is_utc,ta;Ba.$$is_number||(Ba=H(L,"Opal")["$coerce_to!"](Ba,H(L,"Integer"),"to_int"));if(void 0===ta)return new Date(1E3*Ba);ta.$$is_number||(ta=H(L,"Opal")["$coerce_to!"](ta,H(L,"Integer"),"to_int"));return new Date(1E3*Ba+ta/1E3)},D.$$arity=-2);a.defs(n,"$new",R=function(Ba,ta,Na,Sa,Ya,Ha,Y){null==ta&&(ta=d);null==Na&&(Na=d);null==Sa&&(Sa=d);null==Ya&&(Ya=d);null==Ha&&(Ha=d);null==Y&&(Y=d);if(void 0===Ba)return new Date;
Y!==d&&this.$raise(H(L,"ArgumentError"),"Opal does not support explicitly specifying UTC offset for Time");Ha=e(Ba,ta,Na,Sa,Ya,Ha);Ba=Ha[0];ta=Ha[1];Na=Ha[2];Sa=Ha[3];Ya=Ha[4];Ha=Ha[5];ta=new Date(Ba,ta,Na,Sa,Ya,0,1E3*Ha);100>Ba&&ta.setFullYear(Ba);return ta},R.$$arity=-1);a.defs(n,"$local",ka=function(Ba,ta,Na,Sa,Ya,Ha,Y,Q,Z,U){null==ta&&(ta=d);null==Na&&(Na=d);null==Sa&&(Sa=d);null==Ya&&(Ya=d);null==Ha&&(Ha=d);null==Y&&(Y=d);null==Q&&(Q=d);null==Z&&(Z=d);null==U&&(U=d);if(10===arguments.length){var ha=
x.call(arguments);Ba=ha[5];ta=ha[4];Na=ha[3];Sa=ha[2];Ya=ha[1];Ha=ha[0]}ha=e(Ba,ta,Na,Sa,Ya,Ha);Ba=ha[0];ta=ha[1];Na=ha[2];Sa=ha[3];Ya=ha[4];Ha=ha[5];ha=new Date(Ba,ta,Na,Sa,Ya,0,1E3*Ha);100>Ba&&ha.setFullYear(Ba);return ha},ka.$$arity=-2);a.defs(n,"$gm",da=function(Ba,ta,Na,Sa,Ya,Ha,Y,Q,Z,U){null==ta&&(ta=d);null==Na&&(Na=d);null==Sa&&(Sa=d);null==Ya&&(Ya=d);null==Ha&&(Ha=d);null==Y&&(Y=d);null==Q&&(Q=d);null==Z&&(Z=d);null==U&&(U=d);if(10===arguments.length){var ha=x.call(arguments);Ba=ha[5];ta=
ha[4];Na=ha[3];Sa=ha[2];Ya=ha[1];Ha=ha[0]}ha=e(Ba,ta,Na,Sa,Ya,Ha);Ba=ha[0];ta=ha[1];Na=ha[2];Sa=ha[3];Ya=ha[4];Ha=ha[5];ha=new Date(Date.UTC(Ba,ta,Na,Sa,Ya,0,1E3*Ha));100>Ba&&ha.setUTCFullYear(Ba);ha.is_utc=!0;return ha},da.$$arity=-2);(function(Ba,ta){[Ba].concat(ta);a.alias(Ba,"mktime","local");return a.alias(Ba,"utc","gm")})(a.get_singleton_class(n),L);a.defs(n,"$now",ma=function(){return this.$new()},ma.$$arity=0);a.def(n,"$+",b=function(Ba){m(H(L,"Time")["$==="](Ba))&&this.$raise(H(L,"TypeError"),
"time + time?");Ba.$$is_number||(Ba=H(L,"Opal")["$coerce_to!"](Ba,H(L,"Integer"),"to_int"));Ba=new Date(this.getTime()+1E3*Ba);Ba.is_utc=this.is_utc;return Ba},b.$$arity=1);a.def(n,"$-",h=function(Ba){if(m(H(L,"Time")["$==="](Ba)))return(this.getTime()-Ba.getTime())/1E3;Ba.$$is_number||(Ba=H(L,"Opal")["$coerce_to!"](Ba,H(L,"Integer"),"to_int"));Ba=new Date(this.getTime()-1E3*Ba);Ba.is_utc=this.is_utc;return Ba},h.$$arity=1);a.def(n,"$<=>",f=function(Ba){if(m(H(L,"Time")["$==="](Ba)))return this.$to_f()["$<=>"](Ba.$to_f());
Ba=Ba["$<=>"](this);return m(Ba["$nil?"]())?d:m("number"===typeof Ba?0<Ba:Ba["$>"](0))?-1:m("number"===typeof Ba?0>Ba:Ba["$<"](0))?1:0},f.$$arity=1);a.def(n,"$==",q=function(Ba){var ta;return m(ta=H(L,"Time")["$==="](Ba))?this.$to_f()===Ba.$to_f():ta},q.$$arity=1);a.def(n,"$asctime",A=function(){return this.$strftime("%a %b %e %H:%M:%S %Y")},A.$$arity=0);a.alias(n,"ctime","asctime");a.def(n,"$day",E=function(){return this.is_utc?this.getUTCDate():this.getDate()},E.$$arity=0);a.def(n,"$yday",G=function(){var Ba=
H(L,"Time").$new(this.$year()).$to_i();var ta=H(L,"Time").$new(this.$year(),this.$month(),this.$day()).$to_i();return y(J(t(ta,Ba),86400).$round(),1)},G.$$arity=0);a.def(n,"$isdst",M=function(){var Ba=new Date(this.getFullYear(),0,1),ta=new Date(this.getFullYear(),6,1);return this.getTimezoneOffset()<Math.max(Ba.getTimezoneOffset(),ta.getTimezoneOffset())},M.$$arity=0);a.alias(n,"dst?","isdst");a.def(n,"$dup",ba=function(){var Ba=new Date(this.getTime());Ba.$copy_instance_variables(this);Ba.$initialize_dup(this);
return Ba},ba.$$arity=0);a.def(n,"$eql?",ua=function(Ba){var ta;return m(ta=Ba["$is_a?"](H(L,"Time")))?this["$<=>"](Ba)["$zero?"]():ta},ua.$$arity=1);a.def(n,"$friday?",Pa=function(){return 5==this.$wday()},Pa.$$arity=0);a.def(n,"$hash",xa=function(){return"Time:"+this.getTime()},xa.$$arity=0);a.def(n,"$hour",Da=function(){return this.is_utc?this.getUTCHours():this.getHours()},Da.$$arity=0);a.def(n,"$inspect",Ma=function(){return m(this["$utc?"]())?this.$strftime("%Y-%m-%d %H:%M:%S UTC"):this.$strftime("%Y-%m-%d %H:%M:%S %z")},
Ma.$$arity=0);a.alias(n,"mday","day");a.def(n,"$min",na=function(){return this.is_utc?this.getUTCMinutes():this.getMinutes()},na.$$arity=0);a.def(n,"$mon",S=function(){return(this.is_utc?this.getUTCMonth():this.getMonth())+1},S.$$arity=0);a.def(n,"$monday?",sa=function(){return 1==this.$wday()},sa.$$arity=0);a.alias(n,"month","mon");a.def(n,"$saturday?",ya=function(){return 6==this.$wday()},ya.$$arity=0);a.def(n,"$sec",pa=function(){return this.is_utc?this.getUTCSeconds():this.getSeconds()},pa.$$arity=
0);a.def(n,"$succ",fa=function(){var Ba=new Date(this.getTime()+1E3);Ba.is_utc=this.is_utc;return Ba},fa.$$arity=0);a.def(n,"$usec",F=function(){return 1E3*this.getMilliseconds()},F.$$arity=0);a.def(n,"$zone",T=function(){var Ba=this.toString();var ta=-1==Ba.indexOf("(")?Ba.match(/[A-Z]{3,4}/)[0]:Ba.match(/\((.+)\)(?:\s|$)/)[1];return"GMT"==ta&&/(GMT\W*\d{4})/.test(Ba)?RegExp.$1:ta},T.$$arity=0);a.def(n,"$getgm",ja=function(){var Ba=new Date(this.getTime());Ba.is_utc=!0;return Ba},ja.$$arity=0);a.alias(n,
"getutc","getgm");a.def(n,"$gmtime",va=function(){this.is_utc=!0;return this},va.$$arity=0);a.alias(n,"utc","gmtime");a.def(n,"$gmt?",ea=function(){return!0===this.is_utc},ea.$$arity=0);a.def(n,"$gmt_offset",wa=function(){return this.is_utc?0:60*-this.getTimezoneOffset()},wa.$$arity=0);a.def(n,"$strftime",Ga=function(Ba){var ta=this;return Ba.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(Na,Sa,Ya,Ha,Y){Ha="";var Q=-1!==Sa.indexOf("0"),Z=-1===Sa.indexOf("-"),U=-1!==Sa.indexOf("_"),ha=-1!==
Sa.indexOf("^"),la=-1!==Sa.indexOf("#"),g=(Sa.match(":")||[]).length;Ya=parseInt(Ya,10);Q&&U&&(Sa.indexOf("0")<Sa.indexOf("_")?Q=!1:U=!1);switch(Y){case "Y":Ha+=ta.$year();break;case "C":Q=!U;Ha+=Math.round(ta.$year()/100);break;case "y":Q=!U;Ha+=ta.$year()%100;break;case "m":Q=!U;Ha+=ta.$mon();break;case "B":Ha+=Wa[ta.$mon()-1];break;case "b":case "h":U=!Q;Ha+=ab[ta.$mon()-1];break;case "d":Q=!U;Ha+=ta.$day();break;case "e":U=!Q;Ha+=ta.$day();break;case "j":Q=!U;Ya=isNaN(Ya)?3:Ya;Ha+=ta.$yday();
break;case "H":Q=!U;Ha+=ta.$hour();break;case "k":U=!Q;Ha+=ta.$hour();break;case "I":Q=!U;Ha+=ta.$hour()%12||12;break;case "l":U=!Q;Ha+=ta.$hour()%12||12;break;case "P":Ha+=12<=ta.$hour()?"pm":"am";break;case "p":Ha+=12<=ta.$hour()?"PM":"AM";break;case "M":Q=!U;Ha+=ta.$min();break;case "S":Q=!U;Ha+=ta.$sec();break;case "L":Q=!U;Ya=isNaN(Ya)?3:Ya;Ha+=ta.getMilliseconds();break;case "N":Ya=isNaN(Ya)?9:Ya;Ha+=ta.getMilliseconds().toString().$rjust(3,"0");Ha=Ha.$ljust(Ya,"0");break;case "z":Na=ta.getTimezoneOffset();
Sa=Math.floor(Math.abs(Na)/60);Y=Math.abs(Na)%60;Ha=Ha+(0>Na?"+":"-")+(10>Sa?"0":"")+Sa;0<g&&(Ha+=":");Ha+=10>Y?"0":"";Ha+=Y;1<g&&(Ha+=":00");break;case "Z":Ha+=ta.$zone();break;case "A":Ha+=bb[ta.$wday()];break;case "a":Ha+=db[ta.$wday()];break;case "u":Ha+=ta.$wday()+1;break;case "w":Ha+=ta.$wday();break;case "V":Ha+=ta.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case "G":Ha+=ta.$cweek_cyear()["$[]"](1);break;case "g":Ha+=ta.$cweek_cyear()["$[]"](1)["$[]"](u(-2,-1,!1));break;case "s":Ha+=
ta.$to_i();break;case "n":Ha+="\n";break;case "t":Ha+="\t";break;case "%":Ha+="%";break;case "c":Ha+=ta.$strftime("%a %b %e %T %Y");break;case "D":case "x":Ha+=ta.$strftime("%m/%d/%y");break;case "F":Ha+=ta.$strftime("%Y-%m-%d");break;case "v":Ha+=ta.$strftime("%e-%^b-%4Y");break;case "r":Ha+=ta.$strftime("%I:%M:%S %p");break;case "R":Ha+=ta.$strftime("%H:%M");break;case "T":case "X":Ha+=ta.$strftime("%H:%M:%S");break;default:return Na}ha&&(Ha=Ha.toUpperCase());la&&(Ha=Ha.replace(/[A-Z]/,function(C){C.toLowerCase()}).replace(/[a-z]/,
function(C){C.toUpperCase()}));Z&&(Q||U)&&(Ha=Ha.$rjust(isNaN(Ya)?2:Ya,U?" ":"0"));return Ha})},Ga.$$arity=1);a.def(n,"$sunday?",Fa=function(){return 0==this.$wday()},Fa.$$arity=0);a.def(n,"$thursday?",Ra=function(){return 4==this.$wday()},Ra.$$arity=0);a.def(n,"$to_a",Ta=function(){return[this.$sec(),this.$min(),this.$hour(),this.$day(),this.$month(),this.$year(),this.$wday(),this.$yday(),this.$isdst(),this.$zone()]},Ta.$$arity=0);a.def(n,"$to_f",Ja=function(){return this.getTime()/1E3},Ja.$$arity=
0);a.def(n,"$to_i",kb=function(){return parseInt(this.getTime()/1E3,10)},kb.$$arity=0);a.alias(n,"to_s","inspect");a.def(n,"$tuesday?",jb=function(){return 2==this.$wday()},jb.$$arity=0);a.alias(n,"tv_sec","to_i");a.alias(n,"tv_usec","usec");a.alias(n,"utc?","gmt?");a.alias(n,"gmtoff","gmt_offset");a.alias(n,"utc_offset","gmt_offset");a.def(n,"$wday",W=function(){return this.is_utc?this.getUTCDay():this.getDay()},W.$$arity=0);a.def(n,"$wednesday?",za=function(){return 3==this.$wday()},za.$$arity=
0);a.def(n,"$year",Ca=function(){return this.is_utc?this.getUTCFullYear():this.getFullYear()},Ca.$$arity=0);return(a.def(n,"$cweek_cyear",Aa=function(){var Ba=d,ta=d;var Na=H(L,"Time").$new(this.$year(),1,1).$wday();var Sa=this.$year();m(m(Ba=w(Na,4))?Na["$!="](0):Ba)?Na=t(Na,1):(Na=t(t(Na,7),1),Na["$=="](-8)&&(Na=-1));Na=J(y(this.$yday(),Na),7).$ceil();if(m(w(Na,0)))return H(L,"Time").$new(t(this.$year(),1),12,31).$cweek_cyear();Na["$=="](53)&&(Ba=H(L,"Time").$new(this.$year(),12,31),Ba=Ba.$wday(),
m(m(ta=w(Ba,3))?Ba["$!="](0):ta)&&(Na=1,Sa=y(Sa,1)));return[Na,Sa]},Aa.$$arity=0),d)&&"cweek_cyear"}(p[0],Date,p)};
Opal.modules["corelib/struct"]=function(a){function y(k,I){return"number"===typeof k&&"number"===typeof I?k>I:k["$>"](I)}function J(k,I){return"number"===typeof k&&"number"===typeof I?k-I:k["$-"](I)}function t(k,I){return"number"===typeof k&&"number"===typeof I?k<I:k["$<"](I)}function w(k,I){return"number"===typeof k&&"number"===typeof I?k>=I:k["$>="](I)}function z(k,I){return"number"===typeof k&&"number"===typeof I?k+I:k["$+"](I)}var p=a.top,d=[],H=a.nil,x=a.$$,l=a.klass,m=a.hash2,u=a.truthy,c=a.send;
a.add_stubs("$require $include $const_name! $unshift $map $coerce_to! $new $each $define_struct_attribute $allocate $initialize $alias_method $module_eval $to_proc $const_set $== $raise $<< $members $define_method $instance_eval $class $last $> $length $- $keys $any? $join $[] $[]= $each_with_index $hash $=== $< $-@ $size $>= $include? $to_sym $instance_of? $__id__ $eql? $enum_for $name $+ $each_pair $inspect $to_h $args $each_with_object $flatten $to_a $respond_to? $dig".split(" "));p.$require("corelib/enumerable");
return function(k,$super,e){k=l(k,$super,"Struct");var n=[k].concat(e),L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma;k.$include(x(n,"Enumerable"));a.defs(k,"$new",L=function(na,S,sa){var ya=L.$$p,pa=ya||H,fa,F;var T=H;ya&&(L.$$p=null);ya&&(L.$$p=null);var ja=a.slice.call(arguments,1,arguments.length);T=a.extract_kwargs(ja);if(null==T)T=m([],{});else if(!T.$$is_hash)throw a.ArgumentError.$new("expected kwargs");ya=T.$$smap.keyword_init;null==ya&&(ya=!1);if(u(na))try{na=x(n,"Opal")["$const_name!"](na)}catch(va){if(a.rescue(va,
[x(n,"TypeError"),x(n,"NameError")]))try{ja.$unshift(na),na=H}finally{a.pop_exception()}else throw va;}c(ja,"map",[],(fa=function(va){null==va&&(va=H);return x(n,"Opal")["$coerce_to!"](va,x(n,"String"),"to_str")},fa.$$s=this,fa.$$arity=1,fa));T=c(x(n,"Class"),"new",[this],(F=function(){var va=null==F.$$s?this:F.$$s,ea;c(ja,"each",[],(ea=function(wa){var Ga=null==ea.$$s?this:ea.$$s;null==wa&&(wa=H);return Ga.$define_struct_attribute(wa)},ea.$$s=va,ea.$$arity=1,ea));return function(wa,Ga){[wa].concat(Ga);
var Fa;a.def(wa,"$new",Fa=function(Ra){var Ta=a.slice.call(arguments,0,arguments.length);var Ja=this.$allocate();Ja.$$data={};c(Ja,"initialize",a.to_a(Ta));return Ja},Fa.$$arity=-1);return wa.$alias_method("[]","new")}(a.get_singleton_class(va),n)},F.$$s=this,F.$$arity=0,F));u(pa)&&c(T,"module_eval",[],pa.$to_proc());T.$$keyword_init=ya;u(na)&&x(n,"Struct").$const_set(na,T);return T},L.$$arity=-2);a.defs(k,"$define_struct_attribute",D=function(na){var S,sa;this["$=="](x(n,"Struct"))&&this.$raise(x(n,
"ArgumentError"),"you cannot define attributes to the Struct class");this.$members()["$<<"](na);c(this,"define_method",[na],(S=function(){return(null==S.$$s?this:S.$$s).$$data[na]},S.$$s=this,S.$$arity=0,S));return c(this,"define_method",[""+na+"="],(sa=function(ya){var pa=null==sa.$$s?this:sa.$$s;null==ya&&(ya=H);return pa.$$data[na]=ya},sa.$$s=this,sa.$$arity=1,sa))},D.$$arity=1);a.defs(k,"$members",R=function(){var na=H;null==this.members&&(this.members=H);this["$=="](x(n,"Struct"))&&this.$raise(x(n,
"ArgumentError"),"the Struct class has no members");return this.members=u(na=this.members)?na:[]},R.$$arity=0);a.defs(k,"$inherited",ka=function(na){var S,sa=H;null==this.members&&(this.members=H);sa=this.members;return c(na,"instance_eval",[],(S=function(){return(null==S.$$s?this:S.$$s).members=sa},S.$$s=this,S.$$arity=0,S))},ka.$$arity=1);a.def(k,"$initialize",da=function(na){var S,sa,ya=H,pa=H,fa=H,F=H;var T=a.slice.call(arguments,0,arguments.length);if(u(this.$class().$$keyword_init))return ya=
u(pa=T.$last())?pa:m([],{}),u(u(fa=y(T.$length(),1))?fa:1===T.length&&!ya.$$is_hash)&&this.$raise(x(n,"ArgumentError"),"wrong number of arguments (given "+T.$length()+", expected 0)"),F=J(ya.$keys(),this.$class().$members()),u(F["$any?"]())&&this.$raise(x(n,"ArgumentError"),"unknown keywords: "+F.$join(", ")),c(this.$class().$members(),"each",[],(S=function(ja){var va=null==S.$$s?this:S.$$s;null==ja&&(ja=H);ja=[ja,ya["$[]"](ja)];c(va,"[]=",a.to_a(ja));return ja[J(ja.length,1)]},S.$$s=this,S.$$arity=
1,S));u(y(T.$length(),this.$class().$members().$length()))&&this.$raise(x(n,"ArgumentError"),"struct size differs");return c(this.$class().$members(),"each_with_index",[],(sa=function(ja,va){var ea=null==sa.$$s?this:sa.$$s;null==ja&&(ja=H);null==va&&(va=H);ja=[ja,T["$[]"](va)];c(ea,"[]=",a.to_a(ja));return ja[J(ja.length,1)]},sa.$$s=this,sa.$$arity=2,sa))},da.$$arity=-1);a.def(k,"$initialize_copy",ma=function(na){this.$$data={};var S=Object.keys(na.$$data),sa;var ya=0;for(sa=S.length;ya<sa;ya++){var pa=
S[ya];this.$$data[pa]=na.$$data[pa]}},ma.$$arity=1);a.def(k,"$members",b=function(){return this.$class().$members()},b.$$arity=0);a.def(k,"$hash",h=function(){return x(n,"Hash").$new(this.$$data).$hash()},h.$$arity=0);a.def(k,"$[]",f=function(na){u(x(n,"Integer")["$==="](na))?(u(t(na,this.$class().$members().$size()["$-@"]()))&&this.$raise(x(n,"IndexError"),"offset "+na+" too small for struct(size:"+this.$class().$members().$size()+")"),u(w(na,this.$class().$members().$size()))&&this.$raise(x(n,"IndexError"),
"offset "+na+" too large for struct(size:"+this.$class().$members().$size()+")"),na=this.$class().$members()["$[]"](na)):u(x(n,"String")["$==="](na))?this.$$data.hasOwnProperty(na)||this.$raise(x(n,"NameError").$new("no member '"+na+"' in struct",na)):this.$raise(x(n,"TypeError"),"no implicit conversion of "+na.$class()+" into Integer");na=x(n,"Opal")["$coerce_to!"](na,x(n,"String"),"to_str");return this.$$data[na]},f.$$arity=1);a.def(k,"$[]=",q=function(na,S){u(x(n,"Integer")["$==="](na))?(u(t(na,
this.$class().$members().$size()["$-@"]()))&&this.$raise(x(n,"IndexError"),"offset "+na+" too small for struct(size:"+this.$class().$members().$size()+")"),u(w(na,this.$class().$members().$size()))&&this.$raise(x(n,"IndexError"),"offset "+na+" too large for struct(size:"+this.$class().$members().$size()+")"),na=this.$class().$members()["$[]"](na)):u(x(n,"String")["$==="](na))?u(this.$class().$members()["$include?"](na.$to_sym()))||this.$raise(x(n,"NameError").$new("no member '"+na+"' in struct",na)):
this.$raise(x(n,"TypeError"),"no implicit conversion of "+na.$class()+" into Integer");na=x(n,"Opal")["$coerce_to!"](na,x(n,"String"),"to_str");return this.$$data[na]=S},q.$$arity=2);a.def(k,"$==",A=function(na){function S(pa,fa){var F;sa[pa.$__id__()]=!0;ya[fa.$__id__()]=!0;for(F in pa.$$data){var T=pa.$$data[F];var ja=fa.$$data[F];if(x(n,"Struct")["$==="](T)){if(!(sa.hasOwnProperty(T.$__id__())&&ya.hasOwnProperty(ja.$__id__())||S(T,ja)))return!1}else if(!T["$=="](ja))return!1}return!0}if(!u(na["$instance_of?"](this.$class())))return!1;
var sa={},ya={};return S(this,na)},A.$$arity=1);a.def(k,"$eql?",E=function(na){function S(pa,fa){var F;sa[pa.$__id__()]=!0;ya[fa.$__id__()]=!0;for(F in pa.$$data){var T=pa.$$data[F];var ja=fa.$$data[F];if(x(n,"Struct")["$==="](T)){if(!(sa.hasOwnProperty(T.$__id__())&&ya.hasOwnProperty(ja.$__id__())||S(T,ja)))return!1}else if(!T["$eql?"](ja))return!1}return!0}if(!u(na["$instance_of?"](this.$class())))return!1;var sa={},ya={};return S(this,na)},E.$$arity=1);a.def(k,"$each",G=function(){var na,S,sa=
G.$$p,ya=sa||H;sa&&(G.$$p=null);if(ya===H)return c(this,"enum_for",["each"],(na=function(){return(null==na.$$s?this:na.$$s).$size()},na.$$s=this,na.$$arity=0,na));c(this.$class().$members(),"each",[],(S=function(pa){var fa=null==S.$$s?this:S.$$s;null==pa&&(pa=H);return a.yield1(ya,fa["$[]"](pa))},S.$$s=this,S.$$arity=1,S));return this},G.$$arity=0);a.def(k,"$each_pair",M=function(){var na,S,sa=M.$$p,ya=sa||H;sa&&(M.$$p=null);if(ya===H)return c(this,"enum_for",["each_pair"],(na=function(){return(null==
na.$$s?this:na.$$s).$size()},na.$$s=this,na.$$arity=0,na));c(this.$class().$members(),"each",[],(S=function(pa){var fa=null==S.$$s?this:S.$$s;null==pa&&(pa=H);return a.yield1(ya,[pa,fa["$[]"](pa)])},S.$$s=this,S.$$arity=1,S));return this},M.$$arity=0);a.def(k,"$length",ba=function(){return this.$class().$members().$length()},ba.$$arity=0);a.alias(k,"size","length");a.def(k,"$to_a",ua=function(){var na;return c(this.$class().$members(),"map",[],(na=function(S){var sa=null==na.$$s?this:na.$$s;null==
S&&(S=H);return sa["$[]"](S)},na.$$s=this,na.$$arity=1,na))},ua.$$arity=0);a.alias(k,"values","to_a");a.def(k,"$inspect",Pa=function(){var na,S=H,sa=H;S="#<struct ";u(u(sa=x(n,"Struct")["$==="](this))?this.$class().$name():sa)&&(S=z(S,""+this.$class()+" "));S=z(S,c(this.$each_pair(),"map",[],(na=function(ya,pa){null==ya&&(ya=H);null==pa&&(pa=H);return""+ya+"="+pa.$inspect()},na.$$s=this,na.$$arity=2,na)).$join(", "));return S=z(S,">")},Pa.$$arity=0);a.alias(k,"to_s","inspect");a.def(k,"$to_h",xa=
function(){var na=xa.$$p,S=na||H,sa;na&&(xa.$$p=null);na&&(xa.$$p=null);return S!==H?c(c(this,"map",[],S.$to_proc()),"to_h",a.to_a(this.$args())):c(this.$class().$members(),"each_with_object",[m([],{})],(sa=function(ya,pa){var fa=null==sa.$$s?this:sa.$$s;null==ya&&(ya=H);null==pa&&(pa=H);ya=[ya,fa["$[]"](ya)];c(pa,"[]=",a.to_a(ya));return ya[J(ya.length,1)]},sa.$$s=this,sa.$$arity=2,sa))},xa.$$arity=0);a.def(k,"$values_at",Da=function(na){var S;var sa=a.slice.call(arguments,0,arguments.length);sa=
c(sa,"map",[],(S=function(fa){null==fa&&(fa=H);return fa.$$is_range?fa.$to_a():fa},S.$$s=this,S.$$arity=1,S)).$flatten();S=[];for(var ya=0,pa=sa.length;ya<pa;ya++)sa[ya].$$is_number||this.$raise(x(n,"TypeError"),"no implicit conversion of "+sa[ya].$class()+" into Integer"),S.push(this["$[]"](sa[ya]));return S},Da.$$arity=-1);return(a.def(k,"$dig",Ma=function(na,S){var sa=a.slice.call(arguments,1,arguments.length);var ya=u(na.$$is_string&&this.$$data.hasOwnProperty(na))?this.$$data[na]||H:H;if(ya===
H||0===sa.length)return ya;u(ya["$respond_to?"]("dig"))||this.$raise(x(n,"TypeError"),""+ya.$class()+" does not have #dig method");return c(ya,"dig",a.to_a(sa))},Ma.$$arity=-2),H)&&"dig"}(d[0],null,d)};Opal.modules["corelib/main"]=function(a){var y,J,t=a.top,w=[],z=a.nil,p=a.$$;a.add_stubs(["$include"]);a.defs(t,"$to_s",y=function(){return"main"},y.$$arity=0);return(a.defs(t,"$include",J=function(d){return p(w,"Object").$include(d)},J.$$arity=1),z)&&"include"};
Opal.modules["corelib/dir"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.klass,z=a.truthy;a.add_stubs(["$[]"]);return function(p,$super,H){p=w(p,$super,"Dir");H=[p].concat(H);return function(x,l){var m=[x].concat(l),u,c,k;a.def(x,"$chdir",u=function(I){var e=u.$$p,n=e||J,L=J;e&&(u.$$p=null);a:{try{L=a.current_dir;a.current_dir=I;var D=a.yieldX(n,[]);break a}finally{a.current_dir=L}D=void 0}return D},u.$$arity=1);a.def(x,"$pwd",c=function(){return a.current_dir||"."},c.$$arity=0);a.alias(x,"getwd","pwd");
return(a.def(x,"$home",k=function(){var I;return z(I=t(m,"ENV")["$[]"]("HOME"))?I:"."},k.$$arity=0),J)&&"home"}(a.get_singleton_class(p),H)}(y[0],null,y)};
Opal.modules["corelib/file"]=function(a){function y(x,l){return"number"===typeof x&&"number"===typeof l?x+l:x["$+"](l)}var J=[],t=a.nil,w=a.$$,z=a.truthy,p=a.klass,d=a.range,H=a.send;a.add_stubs("$respond_to? $to_path $pwd $split $sub $+ $unshift $join $home $raise $start_with? $absolute_path $coerce_to! $basename $empty? $rindex $[] $nil? $== $- $length $gsub $find $=~ $map $each_with_index $flatten $reject $to_proc $end_with?".split(" "));return function(x,$super,m){x=p(x,$super,"File");m=[x].concat(m);
var u=t;a.const_set(m[0],"Separator",a.const_set(m[0],"SEPARATOR","/"));a.const_set(m[0],"ALT_SEPARATOR",t);a.const_set(m[0],"PATH_SEPARATOR",":");a.const_set(m[0],"FNM_SYSCASE",0);u=/^[a-zA-Z]:(?:\\|\/)/;return function(c,k){function I(q){z(q["$respond_to?"]("to_path"))&&(q=q.$to_path());return q=w(n,"Opal")["$coerce_to!"](q,w(n,"String"),"to_str")}function e(){return w(n,"ALT_SEPARATOR")===t?a.escape_regexp(w(n,"SEPARATOR")):a.escape_regexp(y(w(n,"SEPARATOR"),w(n,"ALT_SEPARATOR")))}var n=[c].concat(k),
L,D,R,ka,da,ma,b,h,f;a.def(c,"$absolute_path",L=function(q,A){var E=t;null==A&&(A=t);var G=w(n,"SEPARATOR");var M=e();var ba=[];q=z(q["$respond_to?"]("to_path"))?q.$to_path():q;A=z(E=A)?E:w(n,"Dir").$pwd();E=q.substr(0,G.length)===G||u.test(q);var ua=A.substr(0,G.length)===G||u.test(A);z(E)?(E=q.$split(a.regexp(["[",M,"]"])),q=u.test(q)?"":q.$sub(a.regexp(["^([",M,"]+).*$"]),"\\1"),A=!0):(E=y(A.$split(a.regexp(["[",M,"]"])),q.$split(a.regexp(["[",M,"]"]))),q=u.test(A)?"":A.$sub(a.regexp(["^([",M,
"]+).*$"]),"\\1"),A=ua);ua=0;for(var Pa=E.length;ua<Pa;ua++)M=E[ua],M===t||""===M&&(0===ba.length||A)||"."===M&&(0===ba.length||A)||(".."===M?ba.pop():ba.push(M));A||"."===E[0]||ba.$unshift(".");G=ba.$join(G);z(A)&&(G=y(q,G));return G},L.$$arity=-2);a.def(c,"$expand_path",D=function(q,A){null==A&&(A=t);var E=w(n,"SEPARATOR");var G=e();if(z("~"===q[0]||A&&"~"===A[0])){var M=w(n,"Dir").$home();z(M)||this.$raise(w(n,"ArgumentError"),"couldn't find HOME environment -- expanding `~'");G=u.test(M)?"":M.$sub(a.regexp(["^([",
G,"]+).*$"]),"\\1");z(M["$start_with?"](G))||this.$raise(w(n,"ArgumentError"),"non-absolute home");M=y(M,E);E=a.regexp(["^\\~(?:",E,"|$)"]);q=q.$sub(E,M);z(A)&&(A=A.$sub(E,M))}return this.$absolute_path(q,A)},D.$$arity=-2);a.alias(c,"realpath","expand_path");a.def(c,"$dirname",R=function(q){var A=e();q=I(q);var E=q.match(new RegExp("^["+A+"]"));q=q.replace(new RegExp("["+A+"]+$"),"");q=q.replace(new RegExp("[^"+A+"]+$"),"");q=q.replace(new RegExp("["+A+"]+$"),"");return""===q?E?"/":".":q},R.$$arity=
1);a.def(c,"$basename",ka=function(q,A){null==A&&(A=t);var E=e();q=I(q);if(0==q.length)return q;A=A!==t?w(n,"Opal")["$coerce_to!"](A,w(n,"String"),"to_str"):null;q=q.replace(new RegExp("(.)["+E+"]*$"),"$1");q=q.replace(new RegExp("^(?:.*["+E+"])?([^"+E+"]+)$"),"$1");".*"===A?q=q.replace(/\.[^\.]+$/,""):null!==A&&(A=a.escape_regexp(A),q=q.replace(new RegExp(""+A+"$"),""));return q},ka.$$arity=-2);a.def(c,"$extname",da=function(q){var A;q=I(q);q=this.$basename(q);if(z(q["$empty?"]()))return"";var E=
q["$[]"](d(1,-1,!1)).$rindex(".");if(!z(A=E["$nil?"]())){A=y(E,1);var G=A["$=="];var M=q.$length();M="number"===typeof M?M-1:M["$-"](1);A=G.call(A,M)}return z(A)?"":q["$[]"](a.Range.$new(y(E,1),-1,!1))},da.$$arity=1);a.def(c,"$exist?",ma=function(q){return null!=a.modules[q]},ma.$$arity=1);a.alias(c,"exists?","exist?");a.def(c,"$directory?",b=function(q){var A,E=t;E=t;E=[];for(var G in a.modules)E.push(G);q=q.$gsub(a.regexp(["(^.",w(n,"SEPARATOR"),"+|",w(n,"SEPARATOR"),"+$)"]));return E=H(E,"find",
[],(A=function(M){null==M&&(M=t);return M["$=~"](a.regexp(["^",q]))},A.$$s=this,A.$$arity=1,A))},b.$$arity=1);a.def(c,"$join",h=function(q){var A,E,G=t;var M=a.slice.call(arguments,0,arguments.length);if(z(M["$empty?"]()))return"";G="";M=H(M.$flatten().$each_with_index(),"map",[],(A=function(ba,ua){var Pa=t,xa=t;null==ba&&(ba=t);null==ua&&(ua=t);return z(z(Pa=ua["$=="](0))?ba["$empty?"]():Pa)?w(n,"SEPARATOR"):z(z(xa=M.$length()["$=="](y(ua,1)))?ba["$empty?"]():xa)?w(n,"SEPARATOR"):ba},A.$$s=this,
A.$$arity=2,A));M=H(M,"reject",[],"empty?".$to_proc());H(M,"each_with_index",[],(E=function(ba,ua){var Pa=t,xa=t;null==ba&&(ba=t);null==ua&&(ua=t);ua=M["$[]"](y(ua,1));if(z(ua["$nil?"]()))return G=""+G+ba;z(z(Pa=ba["$end_with?"](w(n,"SEPARATOR")))?ua["$start_with?"](w(n,"SEPARATOR")):Pa)&&(ba=ba.$sub(a.regexp([w(n,"SEPARATOR"),"+$"]),""));return G=z(z(xa=ba["$end_with?"](w(n,"SEPARATOR")))?xa:ua["$start_with?"](w(n,"SEPARATOR")))?""+G+ba:""+G+ba+w(n,"SEPARATOR")},E.$$s=this,E.$$arity=2,E));return G},
h.$$arity=-1);return(a.def(c,"$split",f=function(q){return q.$split(w(n,"SEPARATOR"))},f.$$arity=1),t)&&"split"}(a.get_singleton_class(x),m)}(J[0],w(J,"IO"),J)};
Opal.modules["corelib/process"]=function(a){var y=[],J=a.nil,t=a.$$$,w=a.$$,z=a.klass,p=a.truthy;a.add_stubs("$const_set $size $<< $__register_clock__ $to_f $now $new $[] $raise".split(" "));(function(d,$super,x){d=z(d,$super,"Process");var l=[d].concat(x),m,u,c,k;x=J;d.__clocks__=[];a.defs(d,"$__register_clock__",m=function(e,n){null==this.__clocks__&&(this.__clocks__=J);this.$const_set(e,this.__clocks__.$size());return this.__clocks__["$<<"](n)},m.$$arity=2);d.$__register_clock__("CLOCK_REALTIME",
function(){return Date.now()});x=!1;if(a.global.performance)x=function(){return performance.now()};else if(a.global.process&&process.hrtime){var I=process.hrtime();x=function(){var e=process.hrtime(I);return 1E3*e[0]+(e[1]/1E3|0)/1E3}}p(x)&&d.$__register_clock__("CLOCK_MONOTONIC",x);a.defs(d,"$pid",u=function(){return 0},u.$$arity=0);a.defs(d,"$times",c=function(){var e=w(l,"Time").$now().$to_f();return t(w(l,"Benchmark"),"Tms").$new(e,e,e,e,e)},c.$$arity=0);return(a.defs(d,"$clock_gettime",k=function(e,
n){var L,D;null==this.__clocks__&&(this.__clocks__=J);null==n&&(n="float_second");p(L=D=this.__clocks__["$[]"](e))?L:this.$raise(t(w(l,"Errno"),"EINVAL"),"clock_gettime("+e+") "+this.__clocks__["$[]"](e));e=D();switch(n){case "float_second":return e/1E3;case "float_millisecond":return e/1;case "float_microsecond":return 1E3*e;case "second":return e/1E3|0;case "millisecond":return e/1|0;case "microsecond":return 1E3*e|0;case "nanosecond":return 1E6*e|0;default:this.$raise(w(l,"ArgumentError"),"unexpected unit: "+
n)}},k.$$arity=-2),J)&&"clock_gettime"})(y[0],null,y);(function(d,$super,x){d=z(d,$super,"Signal");[d].concat(x);var l;return(a.defs(d,"$trap",l=function(m){a.slice.call(arguments,0,arguments.length);return J},l.$$arity=-1),J)&&"trap"})(y[0],null,y);return function(d,$super,x){d=z(d,$super,"GC");[d].concat(x);var l;return(a.defs(d,"$start",l=function(){return J},l.$$arity=0),J)&&"start"}(y[0],null,y)};
Opal.modules["corelib/random"]=function(a){var y=[],J=a.nil,t=a.$$,w=a.klass,z=a.truthy,p=a.send;a.add_stubs("$attr_reader $new_seed $coerce_to! $reseed $rand $seed $< $raise $encode $join $new $chr $=== $== $state $const_defined? $const_set".split(" "));return function(d,$super,x){d=w(d,$super,"Random");var l=[d].concat(x),m,u,c,k,I,e,n,L,D,R;d.$attr_reader("seed","state");a.def(d,"$initialize",m=function(ka){null==ka&&(ka=t(l,"Random").$new_seed());this.state=ka=t(l,"Opal")["$coerce_to!"](ka,t(l,
"Integer"),"to_int");return this.$reseed(ka)},m.$$arity=-1);a.def(d,"$reseed",u=function(ka){this.seed=ka;return this.$rng=a.$$rand.reseed(ka)},u.$$arity=1);a.defs(d,"$new_seed",c=function(){return a.$$rand.new_seed()},c.$$arity=0);a.defs(d,"$rand",k=function(ka){return t(l,"DEFAULT").$rand(ka)},k.$$arity=-1);a.defs(d,"$srand",I=function(ka){null==ka&&(ka=t(l,"Random").$new_seed());ka=t(l,"Opal")["$coerce_to!"](ka,t(l,"Integer"),"to_int");var da=t(l,"DEFAULT").$seed();t(l,"DEFAULT").$reseed(ka);return da},
I.$$arity=-1);a.defs(d,"$urandom",e=function(ka){var da;ka=t(l,"Opal")["$coerce_to!"](ka,t(l,"Integer"),"to_int");z("number"===typeof ka?0>ka:ka["$<"](0))&&this.$raise(t(l,"ArgumentError"),"negative string size (or size too big)");return p(t(l,"Array"),"new",[ka],(da=function(){return(null==da.$$s?this:da.$$s).$rand(255).$chr()},da.$$s=this,da.$$arity=0,da)).$join().$encode("ASCII-8BIT")},e.$$arity=1);a.def(d,"$==",n=function(ka){var da;return z(t(l,"Random")["$==="](ka))?z(da=this.$seed()["$=="](ka.$seed()))?
this.$state()["$=="](ka.$state()):da:!1},n.$$arity=1);a.def(d,"$bytes",L=function(ka){var da;ka=t(l,"Opal")["$coerce_to!"](ka,t(l,"Integer"),"to_int");return p(t(l,"Array"),"new",[ka],(da=function(){return(null==da.$$s?this:da.$$s).$rand(255).$chr()},da.$$s=this,da.$$arity=0,da)).$join().$encode("ASCII-8BIT")},L.$$arity=1);a.def(d,"$rand",D=function(ka){function da(){b.state++;return a.$$rand.rand(b.$rng)}function ma(){var h=ka.begin,f=ka.end;if(h===J||f===J)return J;var q=f-h;if(0>q)return J;if(0===
q)return h;0!==f%1||0!==h%1||ka.excl||q++;return b.$rand(q)+h}var b=this;if(null==ka)return da();if(ka.$$is_range)return ma();if(ka.$$is_number)return 0>=ka&&b.$raise(t(l,"ArgumentError"),"invalid argument - "+ka),0===ka%1?Math.floor(da()*ka):da()*ka;ka=t(l,"Opal")["$coerce_to!"](ka,t(l,"Integer"),"to_int");0>=ka&&b.$raise(t(l,"ArgumentError"),"invalid argument - "+ka);return Math.floor(da()*ka)},D.$$arity=-1);return(a.defs(d,"$generator=",R=function(ka){a.$$rand=ka;return z(this["$const_defined?"]("DEFAULT"))?
t(l,"DEFAULT").$reseed():this.$const_set("DEFAULT",this.$new(this.$new_seed()))},R.$$arity=1),J)&&"generator="}(y[0],null,y)};
Opal.modules["corelib/random/mersenne_twister"]=function(a){function y(H,x){return"number"===typeof H&&"number"===typeof x?H-x:H["$-"](x)}var J=[],t=a.nil,w=a.$$,z=a.klass,p=a.send,d=t;a.add_stubs(["$generator=","$-"]);d=function(){function H(l,m){return(l&2147483648|m&2147483647)>>>1^(m&1?2567483615:0)}function x(l){if(0>=--l.left){var m=0,u=l.state,c;l.left=624;l.next=0;for(c=228;--c;m++)u[m]=u[m+397]^H(u[m+0],u[m+1]);for(c=397;--c;m++)u[m]=u[m+-227]^H(u[m+0],u[m+1]);u[m]=u[m+-227]^H(u[m+0],u[0])}l=
l.state[l.next++];l^=l>>>11;l^=l<<7&2636928640;l^=l<<15&4022730752;return(l^l>>>18)>>>0}return{genrand_real:function(l){var m=x(l);l=x(l);return 1.1102230246251565E-16*(67108864*(m>>>5)+(l>>>6))},init:function(l){var m={left:0,next:624,state:Array(624)};m.state[0]=l>>>0;for(l=1;624>l;l++)m.state[l]=1812433253*(m.state[l-1]^m.state[l-1]>>30>>>0)+l,m.state[l]&=4294967295;m.left=1;m.next=624;return m}}}();return function(H,$super,l){H=z(H,$super,"Random");l=[H].concat(l);var m=t,u=Number.MAX_SAFE_INTEGER||
Math.pow(2,53)-1;a.const_set(l[0],"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*u)},reseed:function(c){return d.init(c)},rand:function(c){return d.genrand_real(c)}});m=[w(l,"MERSENNE_TWISTER_GENERATOR")];p(H,"generator=",a.to_a(m));return m[y(m.length,1)]}(J[0],null,J)};
Opal.modules["corelib/unsupported"]=function(a){function y(m){switch(a.config.unsupported_features_severity){case "error":d(z,"Kernel").$raise(d(z,"NotImplementedError"),m);break;case "warning":l[m]||(l[m]=!0,w.$warn(m))}}var J,t,w=a.top,z=[],p=a.nil,d=a.$$,H=a.klass,x=a.module;a.add_stubs(["$raise","$warn","$%"]);var l={};(function(m,$super,c){m=H(m,$super,"String");var k=[m].concat(c),I,e,n,L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma;a.def(m,"$<<",I=function(na){a.slice.call(arguments,0,arguments.length);
return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("<<"))},I.$$arity=-1);a.def(m,"$capitalize!",e=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("capitalize!"))},e.$$arity=-1);a.def(m,"$chomp!",n=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),
"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("chomp!"))},n.$$arity=-1);a.def(m,"$chop!",L=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("chop!"))},L.$$arity=-1);a.def(m,"$downcase!",D=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("downcase!"))},
D.$$arity=-1);a.def(m,"$gsub!",R=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("gsub!"))},R.$$arity=-1);a.def(m,"$lstrip!",ka=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("lstrip!"))},ka.$$arity=-1);a.def(m,"$next!",da=function(na){a.slice.call(arguments,
0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("next!"))},da.$$arity=-1);a.def(m,"$reverse!",ma=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("reverse!"))},ma.$$arity=-1);a.def(m,"$slice!",b=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,
"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("slice!"))},b.$$arity=-1);a.def(m,"$squeeze!",h=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("squeeze!"))},h.$$arity=-1);a.def(m,"$strip!",f=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("strip!"))},
f.$$arity=-1);a.def(m,"$sub!",q=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("sub!"))},q.$$arity=-1);a.def(m,"$succ!",A=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("succ!"))},A.$$arity=-1);a.def(m,"$swapcase!",E=function(na){a.slice.call(arguments,
0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("swapcase!"))},E.$$arity=-1);a.def(m,"$tr!",G=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("tr!"))},G.$$arity=-1);a.def(m,"$tr_s!",M=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,
"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("tr_s!"))},M.$$arity=-1);a.def(m,"$upcase!",ba=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("upcase!"))},ba.$$arity=-1);a.def(m,"$prepend",ua=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("prepend"))},
ua.$$arity=-1);a.def(m,"$[]=",Pa=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("[]="))},Pa.$$arity=-1);a.def(m,"$clear",xa=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("clear"))},xa.$$arity=-1);a.def(m,"$encode!",Da=function(na){a.slice.call(arguments,
0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("encode!"))},Da.$$arity=-1);return(a.def(m,"$unicode_normalize!",Ma=function(na){a.slice.call(arguments,0,arguments.length);return this.$raise(d(k,"NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"]("unicode_normalize!"))},Ma.$$arity=-1),p)&&"unicode_normalize!"})(z[0],null,z);(function(m,u){m=x(m,
"Kernel");[m].concat(u);var c,k;a.def(m,"$freeze",c=function(){y("Object freezing is not supported by Opal");return this},c.$$arity=0);a.def(m,"$frozen?",k=function(){y("Object freezing is not supported by Opal");return!1},k.$$arity=0)})(z[0],z);(function(m,u){m=x(m,"Kernel");[m].concat(u);var c,k,I;a.def(m,"$taint",c=function(){y("Object tainting is not supported by Opal");return this},c.$$arity=0);a.def(m,"$untaint",k=function(){y("Object tainting is not supported by Opal");return this},k.$$arity=
0);a.def(m,"$tainted?",I=function(){y("Object tainting is not supported by Opal");return!1},I.$$arity=0)})(z[0],z);(function(m,$super,c){m=H(m,$super,"Module");[m].concat(c);var k,I,e,n;a.def(m,"$public",k=function(L){0===a.slice.call(arguments,0,arguments.length).length&&(this.$$module_function=!1);return p},k.$$arity=-1);a.alias(m,"private","public");a.alias(m,"protected","public");a.alias(m,"nesting","public");a.def(m,"$private_class_method",I=function(L){a.slice.call(arguments,0,arguments.length);
return this},I.$$arity=-1);a.alias(m,"public_class_method","private_class_method");a.def(m,"$private_method_defined?",e=function(){return!1},e.$$arity=1);a.def(m,"$private_constant",n=function(L){a.slice.call(arguments,0,arguments.length);return p},n.$$arity=-1);a.alias(m,"protected_method_defined?","private_method_defined?");a.alias(m,"public_instance_methods","instance_methods");a.alias(m,"public_instance_method","instance_method");return a.alias(m,"public_method_defined?","method_defined?")})(z[0],
null,z);(function(m,u){m=x(m,"Kernel");[m].concat(u);var c;a.def(m,"$private_methods",c=function(k){a.slice.call(arguments,0,arguments.length);return[]},c.$$arity=-1);a.alias(m,"private_instance_methods","private_methods")})(z[0],z);(function(m,u){m=x(m,"Kernel");var c=[m].concat(u),k;a.def(m,"$eval",k=function(I){a.slice.call(arguments,0,arguments.length);return this.$raise(d(c,"NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. See https://github.com/opal/opal/blob/"+
(d(c,"RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},k.$$arity=-1)})(z[0],z);a.defs(w,"$public",J=function(m){a.slice.call(arguments,0,arguments.length);return p},J.$$arity=-1);return(a.defs(w,"$private",t=function(m){a.slice.call(arguments,0,arguments.length);return p},t.$$arity=-1),p)&&"private"};var rb=Opal.top;Opal.add_stubs(["$require"]);rb.$require("opal/base");rb.$require("opal/mini");rb.$require("corelib/kernel/format");rb.$require("corelib/string/encoding");rb.$require("corelib/math");
rb.$require("corelib/complex");rb.$require("corelib/rational");rb.$require("corelib/time");rb.$require("corelib/struct");rb.$require("corelib/io");rb.$require("corelib/main");rb.$require("corelib/dir");rb.$require("corelib/file");rb.$require("corelib/process");rb.$require("corelib/random");rb.$require("corelib/random/mersenne_twister");rb.$require("corelib/unsupported");
(function(a){function y(u,c){return"number"===typeof u&&"number"===typeof c?u+c:u["$+"](c)}function J(u,c){return"number"===typeof u&&"number"===typeof c?u-c:u["$-"](c)}function t(u,c){return"number"===typeof u&&"number"===typeof c?u<c:u["$<"](c)}var w=[],z=a.nil,p=a.$$$,d=a.$$,H=a.klass,x=a.send2,l=a.truthy,m=a.send;a.add_stubs("$include $<=> $attr_reader $nonzero? $d $zero? $new $class $-@ $+@ $=== $coerce $== $> $+ $allocate $join $compact $map $to_proc $downcase $wrap $raise $clone $jd $>> $wday $year $month $day $- $to_s $to_i $< $* $reverse $step $abs $each".split(" "));
return function(u,$super,k){function I(W,za){return[31,0===W%4&&0!==W%100||0===W%400?29:28,31,30,31,30,31,31,30,31,30,31][za]}u=H(u,$super,"Date");var e=[u].concat(k),n,L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb;u.$$prototype.date=z;u.$include(d(e,"Comparable"));(function(W,$super,Ca){W=H(W,$super,"Infinity");var Aa=[W].concat(Ca),bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha,Y;W.$$prototype.d=z;W.$include(d(Aa,"Comparable"));a.def(W,"$initialize",bb=function(Q){null==
Q&&(Q=1);return this.d=Q["$<=>"](0)},bb.$$arity=-1);W.$attr_reader("d");a.def(W,"$zero?",db=function(){return!1},db.$$arity=0);a.def(W,"$finite?",ab=function(){return!1},ab.$$arity=0);a.def(W,"$infinite?",Wa=function(){return this.$d()["$nonzero?"]()},Wa.$$arity=0);a.def(W,"$nan?",Ba=function(){return this.$d()["$zero?"]()},Ba.$$arity=0);a.def(W,"$abs",ta=function(){return this.$class().$new()},ta.$$arity=0);a.def(W,"$-@",Na=function(){return this.$class().$new(this.$d()["$-@"]())},Na.$$arity=0);
a.def(W,"$+@",Sa=function(){return this.$class().$new(this.$d()["$+@"]())},Sa.$$arity=0);a.def(W,"$<=>",Ya=function(Q){var Z,U,ha=this,la=z,g=z,C=z;return function(){la=Q;if(d(Aa,"Infinity")["$==="](la))return ha.$d()["$<=>"](Q.$d());if(d(Aa,"Numeric")["$==="](la))return ha.$d();try{return U=Q.$coerce(ha),Z=a.to_ary(U),g=null==Z[0]?z:Z[0],C=null==Z[1]?z:Z[1],U,g["$<=>"](C)}catch(N){if(a.rescue(N,[d(Aa,"NoMethodError")]))try{return z}finally{a.pop_exception()}else throw N;}}()},Ya.$$arity=1);a.def(W,
"$coerce",Ha=function(Q){var Z=Ha.$$p,U;Z&&(Ha.$$p=null);var ha=0;var la=arguments.length;for(U=Array(la);ha<la;ha++)U[ha]=arguments[ha];Z=d(Aa,"Numeric")["$==="](Q)?[this.$d()["$-@"](),this.$d()]:x(this,a.find_super_dispatcher(this,"coerce",Ha,!1,!0),"coerce",U,Z);return Z},Ha.$$arity=1);return(a.def(W,"$to_f",Y=function(){if(this.d["$=="](0))return 0;var Q=this.d;Q="number"===typeof Q?0<Q:Q["$>"](0);return l(Q)?p(d(Aa,"Float"),"INFINITY"):p(d(Aa,"Float"),"INFINITY")["$-@"]()},Y.$$arity=0),z)&&"to_f"})(e[0],
d(e,"Numeric"),e);a.const_set(e[0],"JULIAN",d(e,"Infinity").$new());a.const_set(e[0],"GREGORIAN",d(e,"Infinity").$new()["$-@"]());a.const_set(e[0],"ITALY",2299161);a.const_set(e[0],"ENGLAND",2361222);a.const_set(e[0],"MONTHNAMES",y([z],"January February March April May June July August September October November December".split(" ")));a.const_set(e[0],"ABBR_MONTHNAMES","jan feb mar apr may jun jul aug sep oct nov dec".split(" "));a.const_set(e[0],"DAYNAMES","Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "));
a.const_set(e[0],"ABBR_DAYNAMES","Sun Mon Tue Wed Thu Fri Sat".split(" "));(function(W,za){var Ca=[W].concat(za),Aa,bb,db,ab;a.alias(W,"civil","new");a.def(W,"$wrap",Aa=function(Wa){var Ba=this.$allocate();Ba.date=Wa;return Ba},Aa.$$arity=1);a.def(W,"$parse",bb=function(Wa,Ba){function ta(aa){return aa[1]}function Na(aa){return aa[2]}function Sa(aa){return aa[3]}function Ya(aa){return aa[4]}function Ha(aa){return function(v){v=aa(v);return 69<=v?v+1900:v+2E3}}function Y(aa){return function(v){v=aa(v).toLowerCase();
return d(Ca,"ABBR_MONTHNAMES").indexOf(v)+1}}function Q(aa){return function(v){v=aa(v);return parseInt(v,10)}}function Z(aa){return function(v){v=aa(v);return m(d(Ca,"MONTHNAMES").$compact(),"map",[],"downcase".$to_proc()).indexOf(v.$downcase())+1}}null==Ba&&(Ba=!0);var U=new Date,ha=U.getDate(),la=U.getMonth(),g=U.getFullYear(),C=U.getDay();U=d(Ca,"MONTHNAMES").$compact().$join("|");U=[{regexp:/^(\d{2})$/,year:g,month:la,day:Q(ta)},{regexp:/^(\d{3})$/,year:g,month:0,day:Q(ta)},{regexp:/^(\d{2})(\d{2})$/,
year:g,month:Q(ta),day:Q(Na)},{regexp:/^(\d{2})(\d{3})$/,year:Ha(Q(ta)),month:0,day:Q(Na)},{regexp:/^(\d{2})(\d{2})(\d{2})$/,year:Ha(Q(ta)),month:Q(Na),day:Q(Sa)},{regexp:/^(\d{4})(\d{3})$/,year:Q(ta),month:0,day:Q(Na)},{regexp:/^(\d{4})(\d{2})(\d{2})$/,year:Q(ta),month:Q(Na),day:Q(Sa)},{regexp:/^([a-z]{3})[\s\.\/\-](\d{3,4})$/,year:Q(Na),month:Y(ta),day:1},{regexp:/^(\d{1,2})[\s\.\/\-]([a-z]{3})[\s\.\/\-](\d{3,4})$/i,year:Q(Sa),month:Y(Na),day:Q(ta)},{regexp:/^([a-z]{3})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{3,4})$/i,
year:Q(Sa),month:Y(ta),day:Q(Na)},{regexp:/^(\d{3,4})[\s\.\/\-]([a-z]{3})[\s\.\/\-](\d{1,2})$/i,year:Q(ta),month:Y(Na),day:Q(Sa)},{regexp:/^(\-?\d{3,4})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{1,2})$/,year:Q(ta),month:Q(Na),day:Q(Sa)},{regexp:/^(\d{2})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{1,2})$/,year:function(aa){return function(v){v=aa(v);return Ba?v+2E3:v}}(Q(ta)),month:Q(Na),day:Q(Sa)},{regexp:/^(\d{1,2})[\s\.\/\-](\d{1,2})[\s\.\/\-](\-?\d{3,4})$/,year:Q(Sa),month:Q(Na),day:Q(ta)},{regexp:new RegExp("^("+
d(Ca,"DAYNAMES").$join("|")+")$","i"),year:g,month:la,day:function(aa){return function(v){v=aa(v);v=m(d(Ca,"DAYNAMES"),"map",[],"downcase".$to_proc()).indexOf(v.$downcase());return ha-C+v}}(ta)},{regexp:new RegExp("^("+U+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)[\\s\\.\\/\\-](\\-?\\d{3,4})$","i"),year:Q(Ya),month:Z(ta),day:Q(Na)},{regexp:new RegExp("^("+U+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)","i"),year:g,month:Z(ta),day:Q(Na)},{regexp:new RegExp("^(\\d{1,2})(th|nd|rd)[\\s\\.\\/\\-]("+U+")[\\s\\.\\/\\-](\\-?\\d{3,4})$",
"i"),year:Q(Ya),month:Z(Sa),day:Q(ta)},{regexp:new RegExp("^(\\-?\\d{3,4})[\\s\\.\\/\\-]("+U+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)$","i"),year:Q(ta),month:Z(Na),day:Q(Sa)}];var N;for(N=0;N<U.length;N++)if(g=U[N],la=g.regexp.exec(Wa))return Wa=g.year,"function"===typeof Wa&&(Wa=Wa(la)),U=g.month,"function"===typeof U&&(U=U(la)-1),g=g.day,"function"===typeof g&&(g=g(la)),la=new Date(Wa,U,g),0<=Wa&&1970>=Wa&&la.setFullYear(Wa),this.$wrap(la);return this.$raise(d(Ca,"ArgumentError"),"invalid date")},bb.$$arity=
-2);a.def(W,"$today",db=function(){return this.$wrap(new Date)},db.$$arity=0);return(a.def(W,"$gregorian_leap?",ab=function(Wa){return 0===(new Date(Wa,1,29)).getMonth()-1},ab.$$arity=1),z)&&"gregorian_leap?"})(a.get_singleton_class(u),e);a.def(u,"$initialize",n=function(W,za,Ca,Aa){null==W&&(W=-4712);null==za&&(za=1);null==Ca&&(Ca=1);null==Aa&&d(e,"ITALY");1582===W&&10===za&&4<Ca&&15>Ca&&(Ca=4);return this.date=new Date(W,za-1,Ca)},n.$$arity=-1);a.def(u,"$-",L=function(W){if(W.$$is_number){var za=
this.$clone();za.date.setDate(this.date.getDate()-W);return za}if(W.date)return Math.round((this.date-W.date)/864E5);this.$raise(d(e,"TypeError"))},L.$$arity=1);a.def(u,"$+",D=function(W){if(W.$$is_number){var za=this.$clone();za.date.setDate(this.date.getDate()+W);return za}this.$raise(d(e,"TypeError"))},D.$$arity=1);a.def(u,"$<",R=function(W){var za=this.date;W=W.date;za.setHours(0,0,0,0);W.setHours(0,0,0,0);return za<W},R.$$arity=1);a.def(u,"$<=",ka=function(W){var za=this.date;W=W.date;za.setHours(0,
0,0,0);W.setHours(0,0,0,0);return za<=W},ka.$$arity=1);a.def(u,"$>",da=function(W){var za=this.date;W=W.date;za.setHours(0,0,0,0);W.setHours(0,0,0,0);return za>W},da.$$arity=1);a.def(u,"$>=",ma=function(W){var za=this.date;W=W.date;za.setHours(0,0,0,0);W.setHours(0,0,0,0);return za>=W},ma.$$arity=1);a.def(u,"$<=>",b=function(W){if(W.$$is_number)return this.$jd()["$<=>"](W);if(d(e,"Date")["$==="](W)){var za=this.date;W=W.date;za.setHours(0,0,0,0);W.setHours(0,0,0,0);return za<W?-1:za>W?1:0}return z},
b.$$arity=1);a.def(u,"$>>",h=function(W){W.$$is_number||this.$raise(d(e,"TypeError"));var za=this.$clone(),Ca=za.date,Aa=Ca.getDate();Ca.setDate(1);Ca.setMonth(Ca.getMonth()+W);Ca.setDate(Math.min(Aa,I(Ca.getFullYear(),Ca.getMonth())));return za},h.$$arity=1);a.def(u,"$<<",f=function(W){W.$$is_number||this.$raise(d(e,"TypeError"));return this["$>>"](-W)},f.$$arity=1);a.alias(u,"eql?","==");a.def(u,"$clone",q=function(){return d(e,"Date").$wrap(new Date(this.date.getTime()))},q.$$arity=0);a.def(u,
"$day",A=function(){return this.date.getDate()},A.$$arity=0);a.def(u,"$friday?",E=function(){return this.$wday()["$=="](5)},E.$$arity=0);a.def(u,"$jd",G=function(){var W=this.date.getMonth()+1,za=this.date.getDate(),Ca=this.date.getFullYear();var Aa=1;1585>=Ca&&(Aa=0);var bb=-1*Math.floor(7*(Math.floor((W+9)/12)+Ca)/4);var db=1;0>W-9&&(db=-1);db=Math.floor(Ca+db*Math.floor(Math.abs(W-9)/7));db=-1*Math.floor(3*(Math.floor(db/100)+1)/4);bb=bb+Math.floor(275*W/9)+za+Aa*db;return bb+1721027+2*Aa+367*
Ca-.5+.5},G.$$arity=0);a.def(u,"$julian?",M=function(){return this.date<new Date(1582,9,15,12)},M.$$arity=0);a.def(u,"$monday?",ba=function(){return this.$wday()["$=="](1)},ba.$$arity=0);a.def(u,"$month",ua=function(){return this.date.getMonth()+1},ua.$$arity=0);a.def(u,"$next",Pa=function(){return y(this,1)},Pa.$$arity=0);a.def(u,"$next_day",xa=function(W){null==W&&(W=1);return y(this,W)},xa.$$arity=-1);a.def(u,"$next_month",Da=function(W){null==W&&(W=1);var za=this.$clone(),Ca=za.date,Aa=Ca.getDate();
Ca.setDate(1);Ca.setMonth(Ca.getMonth()+W);Ca.setDate(Math.min(Aa,I(Ca.getFullYear(),Ca.getMonth())));return za},Da.$$arity=-1);a.def(u,"$next_year",Ma=function(W){null==W&&(W=1);return this.$class().$new(y(this.$year(),W),this.$month(),this.$day())},Ma.$$arity=-1);a.def(u,"$prev_day",na=function(W){null==W&&(W=1);return J(this,W)},na.$$arity=-1);a.def(u,"$prev_month",S=function(W){null==W&&(W=1);var za=this.$clone(),Ca=za.date,Aa=Ca.getDate();Ca.setDate(1);Ca.setMonth(Ca.getMonth()-W);Ca.setDate(Math.min(Aa,
I(Ca.getFullYear(),Ca.getMonth())));return za},S.$$arity=-1);a.def(u,"$prev_year",sa=function(W){null==W&&(W=1);return this.$class().$new(J(this.$year(),W),this.$month(),this.$day())},sa.$$arity=-1);a.def(u,"$saturday?",ya=function(){return this.$wday()["$=="](6)},ya.$$arity=0);a.def(u,"$strftime",pa=function(W){null==W&&(W="");return""==W?this.$to_s():this.date.$strftime(W)},pa.$$arity=-1);a.alias(u,"succ","next");a.def(u,"$sunday?",fa=function(){return this.$wday()["$=="](0)},fa.$$arity=0);a.def(u,
"$thursday?",F=function(){return this.$wday()["$=="](4)},F.$$arity=0);a.def(u,"$to_s",T=function(){var W=this.date,za=W.getFullYear(),Ca=W.getMonth()+1;W=W.getDate();10>Ca&&(Ca="0"+Ca);10>W&&(W="0"+W);return za+"-"+Ca+"-"+W},T.$$arity=0);a.def(u,"$to_time",ja=function(){return d(e,"Time").$new(this.$year(),this.$month(),this.$day())},ja.$$arity=0);a.def(u,"$to_n",va=function(){return this.date},va.$$arity=0);a.def(u,"$tuesday?",ea=function(){return this.$wday()["$=="](2)},ea.$$arity=0);a.def(u,"$step",
wa=function(W,za){var Ca=wa.$$p,Aa=Ca||z,bb,db,ab=z;ab=ab=z;Ca&&(wa.$$p=null);Ca&&(wa.$$p=null);null==za&&(za=1);ab=J(W,this).$to_i();ab=l(t("number"===typeof ab&&"number"===typeof za?ab*za:ab["$*"](za),0))?[]:l(t(ab,0))?m(a.Range.$new(0,ab["$-@"](),!1).$step(za.$abs()),"map",[],"-@".$to_proc()).$reverse():a.Range.$new(0,ab,!1).$step(za.$abs());ab=m(ab,"map",[],(bb=function(Wa){var Ba=null==bb.$$s?this:bb.$$s;null==Wa&&(Wa=z);return y(Ba,Wa)},bb.$$s=this,bb.$$arity=1,bb));return Aa!==z?(m(ab,"each",
[],(db=function(Wa){null==Wa&&(Wa=z);return a.yield1(Aa,Wa)},db.$$s=this,db.$$arity=1,db)),this):ab},wa.$$arity=-2);a.def(u,"$upto",Ga=function(W){var za=Ga.$$p,Ca=za||z;za&&(Ga.$$p=null);za&&(Ga.$$p=null);return m(this,"step",[W,1],Ca.$to_proc())},Ga.$$arity=1);a.def(u,"$downto",Fa=function(W){var za=Fa.$$p,Ca=za||z;za&&(Fa.$$p=null);za&&(Fa.$$p=null);return m(this,"step",[W,-1],Ca.$to_proc())},Fa.$$arity=1);a.def(u,"$wday",Ra=function(){return this.date.getDay()},Ra.$$arity=0);a.def(u,"$wednesday?",
Ta=function(){return this.$wday()["$=="](3)},Ta.$$arity=0);a.def(u,"$year",Ja=function(){return this.date.getFullYear()},Ja.$$arity=0);a.def(u,"$cwday",kb=function(){return this.date.getDay()||7},kb.$$arity=0);a.def(u,"$cweek",jb=function(){var W=new Date(this.date);W.setHours(0,0,0);W.setDate(W.getDate()+4-(W.getDay()||7));return Math.ceil(((W-new Date(W.getFullYear(),0,1))/864E5+1)/7)},jb.$$arity=0)}(w[0],null,w)})(Opal);
(function(a){function y(m,u){return"number"===typeof m&&"number"===typeof u?m-u:m["$-"](u)}var J=[],t=a.nil,w=a.$$$,z=a.$$,p=a.module,d=a.klass,H=a.send,x=a.hash2,l=a.truthy;a.add_stubs("$raise $new $push $[]= $- $[] $create_id $json_create $const_get $attr_accessor $create_id= $=== $parse $generate $from_object $merge $to_json $responds_to? $to_io $write $to_s $to_a $strftime".split(" "));(function(m,u){function c(f){try{return JSON.parse(f)}catch(q){I.$raise(w(z(e,"JSON"),"ParserError"),q.message)}}
function k(f,q){var A;switch(typeof f){case "string":return f;case "number":return f;case "boolean":return!!f;case "null":return t;case "object":if(!f)return t;if(f.$$is_array){var E=q.array_class.$new();var G=0;for(A=f.length;G<A;G++)E.$push(k(f[G],q));return E}G=q.object_class.$new();for(A in f)h.call(f,A)&&(b=[A,k(f[A],q)],H(G,"[]=",a.to_a(b)),b[y(b.length,1)]);return q.parse||(E=G["$[]"](z(e,"JSON").$create_id()))==t?G:w("::","Object").$const_get(E).$json_create(G)}}var I=p(m,"JSON"),e=[I].concat(u),
n,L,D,R,ka,da,ma,b=t;(function(f,$super,A){[d(f,$super,"JSONError")].concat(A);return t})(e[0],z(e,"StandardError"),e);(function(f,$super,A){[d(f,$super,"ParserError")].concat(A);return t})(e[0],z(e,"JSONError"),e);var h=a.hasOwnProperty;(function(f,q){[f].concat(q);return f.$attr_accessor("create_id")})(a.get_singleton_class(I),e);b=["json_class"];H(I,"create_id=",a.to_a(b));b[y(b.length,1)];a.defs(I,"$[]",n=function(f,q){null==q&&(q=x([],{}));return l(z(e,"String")["$==="](f))?this.$parse(f,q):
this.$generate(f,q)},n.$$arity=-2);a.defs(I,"$parse",L=function(f,q){null==q&&(q=x([],{}));return this.$from_object(c(f),q.$merge(x(["parse"],{parse:!0})))},L.$$arity=-2);a.defs(I,"$parse!",D=function(f,q){null==q&&(q=x([],{}));return this.$parse(f,q)},D.$$arity=-2);a.defs(I,"$load",R=function(f,q){null==q&&(q=x([],{}));return this.$from_object(c(f),q)},R.$$arity=-2);a.defs(I,"$from_object",ka=function(f,q){var A;null==q&&(q=x([],{}));l(A=q["$[]"]("object_class"))?A:(A=["object_class",z(e,"Hash")],
H(q,"[]=",a.to_a(A)),A[y(A.length,1)]);l(A=q["$[]"]("array_class"))?A:(A=["array_class",z(e,"Array")],H(q,"[]=",a.to_a(A)),A[y(A.length,1)]);return k(f,q.$$smap)},ka.$$arity=-2);a.defs(I,"$generate",da=function(f,q){null==q&&(q=x([],{}));return f.$to_json(q)},da.$$arity=-2);a.defs(I,"$dump",ma=function(f,q){null==q&&(q=t);f=this.$generate(f);return l(q)?(l(q["$responds_to?"]("to_io"))&&(q=q.$to_io()),q.$write(f),q):f},ma.$$arity=-2)})(J[0],J);(function(m,$super,c){m=d(m,$super,"Object");[m].concat(c);
var k;return(a.def(m,"$to_json",k=function(){return this.$to_s().$to_json()},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,u){m=p(m,"Enumerable");[m].concat(u);var c;a.def(m,"$to_json",c=function(){return this.$to_a().$to_json()},c.$$arity=0)})(J[0],J);(function(m,$super,c){m=d(m,$super,"Array");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){for(var I=[],e=0,n=this.length;e<n;e++)I.push(this[e].$to_json());return"["+I.join(", ")+"]"},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,
$super,c){m=d(m,$super,"Boolean");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){return 1==this?"true":"false"},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,$super,c){m=d(m,$super,"Hash");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){for(var I=[],e=0,n=this.$$keys,L=n.length,D,R;e<L;e++)D=n[e],D.$$is_string?R=this.$$smap[D]:(R=D.value,D=D.key),I.push(D.$to_s().$to_json()+":"+R.$to_json());return"{"+I.join(", ")+"}"},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,
$super,c){m=d(m,$super,"NilClass");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){return"null"},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,$super,c){m=d(m,$super,"Numeric");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){return this.toString()},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,$super,c){m=d(m,$super,"String");[m].concat(c);return a.alias(m,"to_json","inspect")})(J[0],null,J);(function(m,$super,c){m=d(m,$super,"Time");[m].concat(c);var k;return(a.def(m,
"$to_json",k=function(){return this.$strftime("%FT%T%z").$to_json()},k.$$arity=0),t)&&"to_json"})(J[0],null,J);return function(m,$super,c){m=d(m,$super,"Date");[m].concat(c);var k,I;a.def(m,"$to_json",k=function(){return this.$to_s().$to_json()},k.$$arity=0);return(a.def(m,"$as_json",I=function(){return this.$to_s()},I.$$arity=0),t)&&"as_json"}(J[0],null,J)})(Opal);
Opal.modules.json=function(a){function y(m,u){return"number"===typeof m&&"number"===typeof u?m-u:m["$-"](u)}var J=[],t=a.nil,w=a.$$$,z=a.$$,p=a.module,d=a.klass,H=a.send,x=a.hash2,l=a.truthy;a.add_stubs("$raise $new $push $[]= $- $[] $create_id $json_create $const_get $attr_accessor $create_id= $=== $parse $generate $from_object $merge $to_json $responds_to? $to_io $write $to_s $to_a $strftime".split(" "));(function(m,u){function c(f){try{return JSON.parse(f)}catch(q){I.$raise(w(z(e,"JSON"),"ParserError"),
q.message)}}function k(f,q){var A;switch(typeof f){case "string":return f;case "number":return f;case "boolean":return!!f;case "null":return t;case "object":if(!f)return t;if(f.$$is_array){var E=q.array_class.$new();var G=0;for(A=f.length;G<A;G++)E.$push(k(f[G],q));return E}G=q.object_class.$new();for(A in f)h.call(f,A)&&(b=[A,k(f[A],q)],H(G,"[]=",a.to_a(b)),b[y(b.length,1)]);return q.parse||(E=G["$[]"](z(e,"JSON").$create_id()))==t?G:w("::","Object").$const_get(E).$json_create(G)}}var I=p(m,"JSON"),
e=[I].concat(u),n,L,D,R,ka,da,ma,b=t;(function(f,$super,A){[d(f,$super,"JSONError")].concat(A);return t})(e[0],z(e,"StandardError"),e);(function(f,$super,A){[d(f,$super,"ParserError")].concat(A);return t})(e[0],z(e,"JSONError"),e);var h=a.hasOwnProperty;(function(f,q){[f].concat(q);return f.$attr_accessor("create_id")})(a.get_singleton_class(I),e);b=["json_class"];H(I,"create_id=",a.to_a(b));b[y(b.length,1)];a.defs(I,"$[]",n=function(f,q){null==q&&(q=x([],{}));return l(z(e,"String")["$==="](f))?this.$parse(f,
q):this.$generate(f,q)},n.$$arity=-2);a.defs(I,"$parse",L=function(f,q){null==q&&(q=x([],{}));return this.$from_object(c(f),q.$merge(x(["parse"],{parse:!0})))},L.$$arity=-2);a.defs(I,"$parse!",D=function(f,q){null==q&&(q=x([],{}));return this.$parse(f,q)},D.$$arity=-2);a.defs(I,"$load",R=function(f,q){null==q&&(q=x([],{}));return this.$from_object(c(f),q)},R.$$arity=-2);a.defs(I,"$from_object",ka=function(f,q){var A;null==q&&(q=x([],{}));l(A=q["$[]"]("object_class"))?A:(A=["object_class",z(e,"Hash")],
H(q,"[]=",a.to_a(A)),A[y(A.length,1)]);l(A=q["$[]"]("array_class"))?A:(A=["array_class",z(e,"Array")],H(q,"[]=",a.to_a(A)),A[y(A.length,1)]);return k(f,q.$$smap)},ka.$$arity=-2);a.defs(I,"$generate",da=function(f,q){null==q&&(q=x([],{}));return f.$to_json(q)},da.$$arity=-2);a.defs(I,"$dump",ma=function(f,q){null==q&&(q=t);f=this.$generate(f);return l(q)?(l(q["$responds_to?"]("to_io"))&&(q=q.$to_io()),q.$write(f),q):f},ma.$$arity=-2)})(J[0],J);(function(m,$super,c){m=d(m,$super,"Object");[m].concat(c);
var k;return(a.def(m,"$to_json",k=function(){return this.$to_s().$to_json()},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,u){m=p(m,"Enumerable");[m].concat(u);var c;a.def(m,"$to_json",c=function(){return this.$to_a().$to_json()},c.$$arity=0)})(J[0],J);(function(m,$super,c){m=d(m,$super,"Array");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){for(var I=[],e=0,n=this.length;e<n;e++)I.push(this[e].$to_json());return"["+I.join(", ")+"]"},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,
$super,c){m=d(m,$super,"Boolean");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){return 1==this?"true":"false"},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,$super,c){m=d(m,$super,"Hash");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){for(var I=[],e=0,n=this.$$keys,L=n.length,D,R;e<L;e++)D=n[e],D.$$is_string?R=this.$$smap[D]:(R=D.value,D=D.key),I.push(D.$to_s().$to_json()+":"+R.$to_json());return"{"+I.join(", ")+"}"},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,
$super,c){m=d(m,$super,"NilClass");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){return"null"},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,$super,c){m=d(m,$super,"Numeric");[m].concat(c);var k;return(a.def(m,"$to_json",k=function(){return this.toString()},k.$$arity=0),t)&&"to_json"})(J[0],null,J);(function(m,$super,c){m=d(m,$super,"String");[m].concat(c);return a.alias(m,"to_json","inspect")})(J[0],null,J);(function(m,$super,c){m=d(m,$super,"Time");[m].concat(c);var k;return(a.def(m,
"$to_json",k=function(){return this.$strftime("%FT%T%z").$to_json()},k.$$arity=0),t)&&"to_json"})(J[0],null,J);return function(m,$super,c){m=d(m,$super,"Date");[m].concat(c);var k,I;a.def(m,"$to_json",k=function(){return this.$to_s().$to_json()},k.$$arity=0);return(a.def(m,"$as_json",I=function(){return this.$to_s()},I.$$arity=0),t)&&"as_json"}(J[0],null,J)};
Opal.modules.date=function(a){function y(u,c){return"number"===typeof u&&"number"===typeof c?u+c:u["$+"](c)}function J(u,c){return"number"===typeof u&&"number"===typeof c?u-c:u["$-"](c)}function t(u,c){return"number"===typeof u&&"number"===typeof c?u<c:u["$<"](c)}var w=[],z=a.nil,p=a.$$$,d=a.$$,H=a.klass,x=a.send2,l=a.truthy,m=a.send;a.add_stubs("$include $<=> $attr_reader $nonzero? $d $zero? $new $class $-@ $+@ $=== $coerce $== $> $+ $allocate $join $compact $map $to_proc $downcase $wrap $raise $clone $jd $>> $wday $year $month $day $- $to_s $to_i $< $* $reverse $step $abs $each".split(" "));
return function(u,$super,k){function I(W,za){return[31,0===W%4&&0!==W%100||0===W%400?29:28,31,30,31,30,31,31,30,31,30,31][za]}u=H(u,$super,"Date");var e=[u].concat(k),n,L,D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya,pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb;u.$$prototype.date=z;u.$include(d(e,"Comparable"));(function(W,$super,Ca){W=H(W,$super,"Infinity");var Aa=[W].concat(Ca),bb,db,ab,Wa,Ba,ta,Na,Sa,Ya,Ha,Y;W.$$prototype.d=z;W.$include(d(Aa,"Comparable"));a.def(W,"$initialize",bb=function(Q){null==
Q&&(Q=1);return this.d=Q["$<=>"](0)},bb.$$arity=-1);W.$attr_reader("d");a.def(W,"$zero?",db=function(){return!1},db.$$arity=0);a.def(W,"$finite?",ab=function(){return!1},ab.$$arity=0);a.def(W,"$infinite?",Wa=function(){return this.$d()["$nonzero?"]()},Wa.$$arity=0);a.def(W,"$nan?",Ba=function(){return this.$d()["$zero?"]()},Ba.$$arity=0);a.def(W,"$abs",ta=function(){return this.$class().$new()},ta.$$arity=0);a.def(W,"$-@",Na=function(){return this.$class().$new(this.$d()["$-@"]())},Na.$$arity=0);
a.def(W,"$+@",Sa=function(){return this.$class().$new(this.$d()["$+@"]())},Sa.$$arity=0);a.def(W,"$<=>",Ya=function(Q){var Z,U,ha=this,la=z,g=z,C=z;return function(){la=Q;if(d(Aa,"Infinity")["$==="](la))return ha.$d()["$<=>"](Q.$d());if(d(Aa,"Numeric")["$==="](la))return ha.$d();try{return U=Q.$coerce(ha),Z=a.to_ary(U),g=null==Z[0]?z:Z[0],C=null==Z[1]?z:Z[1],U,g["$<=>"](C)}catch(N){if(a.rescue(N,[d(Aa,"NoMethodError")]))try{return z}finally{a.pop_exception()}else throw N;}}()},Ya.$$arity=1);a.def(W,
"$coerce",Ha=function(Q){var Z=Ha.$$p,U;Z&&(Ha.$$p=null);var ha=0;var la=arguments.length;for(U=Array(la);ha<la;ha++)U[ha]=arguments[ha];Z=d(Aa,"Numeric")["$==="](Q)?[this.$d()["$-@"](),this.$d()]:x(this,a.find_super_dispatcher(this,"coerce",Ha,!1,!0),"coerce",U,Z);return Z},Ha.$$arity=1);return(a.def(W,"$to_f",Y=function(){if(this.d["$=="](0))return 0;var Q=this.d;Q="number"===typeof Q?0<Q:Q["$>"](0);return l(Q)?p(d(Aa,"Float"),"INFINITY"):p(d(Aa,"Float"),"INFINITY")["$-@"]()},Y.$$arity=0),z)&&"to_f"})(e[0],
d(e,"Numeric"),e);a.const_set(e[0],"JULIAN",d(e,"Infinity").$new());a.const_set(e[0],"GREGORIAN",d(e,"Infinity").$new()["$-@"]());a.const_set(e[0],"ITALY",2299161);a.const_set(e[0],"ENGLAND",2361222);a.const_set(e[0],"MONTHNAMES",y([z],"January February March April May June July August September October November December".split(" ")));a.const_set(e[0],"ABBR_MONTHNAMES","jan feb mar apr may jun jul aug sep oct nov dec".split(" "));a.const_set(e[0],"DAYNAMES","Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "));
a.const_set(e[0],"ABBR_DAYNAMES","Sun Mon Tue Wed Thu Fri Sat".split(" "));(function(W,za){var Ca=[W].concat(za),Aa,bb,db,ab;a.alias(W,"civil","new");a.def(W,"$wrap",Aa=function(Wa){var Ba=this.$allocate();Ba.date=Wa;return Ba},Aa.$$arity=1);a.def(W,"$parse",bb=function(Wa,Ba){function ta(aa){return aa[1]}function Na(aa){return aa[2]}function Sa(aa){return aa[3]}function Ya(aa){return aa[4]}function Ha(aa){return function(v){v=aa(v);return 69<=v?v+1900:v+2E3}}function Y(aa){return function(v){v=aa(v).toLowerCase();
return d(Ca,"ABBR_MONTHNAMES").indexOf(v)+1}}function Q(aa){return function(v){v=aa(v);return parseInt(v,10)}}function Z(aa){return function(v){v=aa(v);return m(d(Ca,"MONTHNAMES").$compact(),"map",[],"downcase".$to_proc()).indexOf(v.$downcase())+1}}null==Ba&&(Ba=!0);var U=new Date,ha=U.getDate(),la=U.getMonth(),g=U.getFullYear(),C=U.getDay();U=d(Ca,"MONTHNAMES").$compact().$join("|");U=[{regexp:/^(\d{2})$/,year:g,month:la,day:Q(ta)},{regexp:/^(\d{3})$/,year:g,month:0,day:Q(ta)},{regexp:/^(\d{2})(\d{2})$/,
year:g,month:Q(ta),day:Q(Na)},{regexp:/^(\d{2})(\d{3})$/,year:Ha(Q(ta)),month:0,day:Q(Na)},{regexp:/^(\d{2})(\d{2})(\d{2})$/,year:Ha(Q(ta)),month:Q(Na),day:Q(Sa)},{regexp:/^(\d{4})(\d{3})$/,year:Q(ta),month:0,day:Q(Na)},{regexp:/^(\d{4})(\d{2})(\d{2})$/,year:Q(ta),month:Q(Na),day:Q(Sa)},{regexp:/^([a-z]{3})[\s\.\/\-](\d{3,4})$/,year:Q(Na),month:Y(ta),day:1},{regexp:/^(\d{1,2})[\s\.\/\-]([a-z]{3})[\s\.\/\-](\d{3,4})$/i,year:Q(Sa),month:Y(Na),day:Q(ta)},{regexp:/^([a-z]{3})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{3,4})$/i,
year:Q(Sa),month:Y(ta),day:Q(Na)},{regexp:/^(\d{3,4})[\s\.\/\-]([a-z]{3})[\s\.\/\-](\d{1,2})$/i,year:Q(ta),month:Y(Na),day:Q(Sa)},{regexp:/^(\-?\d{3,4})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{1,2})$/,year:Q(ta),month:Q(Na),day:Q(Sa)},{regexp:/^(\d{2})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{1,2})$/,year:function(aa){return function(v){v=aa(v);return Ba?v+2E3:v}}(Q(ta)),month:Q(Na),day:Q(Sa)},{regexp:/^(\d{1,2})[\s\.\/\-](\d{1,2})[\s\.\/\-](\-?\d{3,4})$/,year:Q(Sa),month:Q(Na),day:Q(ta)},{regexp:new RegExp("^("+
d(Ca,"DAYNAMES").$join("|")+")$","i"),year:g,month:la,day:function(aa){return function(v){v=aa(v);v=m(d(Ca,"DAYNAMES"),"map",[],"downcase".$to_proc()).indexOf(v.$downcase());return ha-C+v}}(ta)},{regexp:new RegExp("^("+U+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)[\\s\\.\\/\\-](\\-?\\d{3,4})$","i"),year:Q(Ya),month:Z(ta),day:Q(Na)},{regexp:new RegExp("^("+U+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)","i"),year:g,month:Z(ta),day:Q(Na)},{regexp:new RegExp("^(\\d{1,2})(th|nd|rd)[\\s\\.\\/\\-]("+U+")[\\s\\.\\/\\-](\\-?\\d{3,4})$",
"i"),year:Q(Ya),month:Z(Sa),day:Q(ta)},{regexp:new RegExp("^(\\-?\\d{3,4})[\\s\\.\\/\\-]("+U+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)$","i"),year:Q(ta),month:Z(Na),day:Q(Sa)}];var N;for(N=0;N<U.length;N++)if(g=U[N],la=g.regexp.exec(Wa))return Wa=g.year,"function"===typeof Wa&&(Wa=Wa(la)),U=g.month,"function"===typeof U&&(U=U(la)-1),g=g.day,"function"===typeof g&&(g=g(la)),la=new Date(Wa,U,g),0<=Wa&&1970>=Wa&&la.setFullYear(Wa),this.$wrap(la);return this.$raise(d(Ca,"ArgumentError"),"invalid date")},bb.$$arity=
-2);a.def(W,"$today",db=function(){return this.$wrap(new Date)},db.$$arity=0);return(a.def(W,"$gregorian_leap?",ab=function(Wa){return 0===(new Date(Wa,1,29)).getMonth()-1},ab.$$arity=1),z)&&"gregorian_leap?"})(a.get_singleton_class(u),e);a.def(u,"$initialize",n=function(W,za,Ca,Aa){null==W&&(W=-4712);null==za&&(za=1);null==Ca&&(Ca=1);null==Aa&&d(e,"ITALY");1582===W&&10===za&&4<Ca&&15>Ca&&(Ca=4);return this.date=new Date(W,za-1,Ca)},n.$$arity=-1);a.def(u,"$-",L=function(W){if(W.$$is_number){var za=
this.$clone();za.date.setDate(this.date.getDate()-W);return za}if(W.date)return Math.round((this.date-W.date)/864E5);this.$raise(d(e,"TypeError"))},L.$$arity=1);a.def(u,"$+",D=function(W){if(W.$$is_number){var za=this.$clone();za.date.setDate(this.date.getDate()+W);return za}this.$raise(d(e,"TypeError"))},D.$$arity=1);a.def(u,"$<",R=function(W){var za=this.date;W=W.date;za.setHours(0,0,0,0);W.setHours(0,0,0,0);return za<W},R.$$arity=1);a.def(u,"$<=",ka=function(W){var za=this.date;W=W.date;za.setHours(0,
0,0,0);W.setHours(0,0,0,0);return za<=W},ka.$$arity=1);a.def(u,"$>",da=function(W){var za=this.date;W=W.date;za.setHours(0,0,0,0);W.setHours(0,0,0,0);return za>W},da.$$arity=1);a.def(u,"$>=",ma=function(W){var za=this.date;W=W.date;za.setHours(0,0,0,0);W.setHours(0,0,0,0);return za>=W},ma.$$arity=1);a.def(u,"$<=>",b=function(W){if(W.$$is_number)return this.$jd()["$<=>"](W);if(d(e,"Date")["$==="](W)){var za=this.date;W=W.date;za.setHours(0,0,0,0);W.setHours(0,0,0,0);return za<W?-1:za>W?1:0}return z},
b.$$arity=1);a.def(u,"$>>",h=function(W){W.$$is_number||this.$raise(d(e,"TypeError"));var za=this.$clone(),Ca=za.date,Aa=Ca.getDate();Ca.setDate(1);Ca.setMonth(Ca.getMonth()+W);Ca.setDate(Math.min(Aa,I(Ca.getFullYear(),Ca.getMonth())));return za},h.$$arity=1);a.def(u,"$<<",f=function(W){W.$$is_number||this.$raise(d(e,"TypeError"));return this["$>>"](-W)},f.$$arity=1);a.alias(u,"eql?","==");a.def(u,"$clone",q=function(){return d(e,"Date").$wrap(new Date(this.date.getTime()))},q.$$arity=0);a.def(u,
"$day",A=function(){return this.date.getDate()},A.$$arity=0);a.def(u,"$friday?",E=function(){return this.$wday()["$=="](5)},E.$$arity=0);a.def(u,"$jd",G=function(){var W=this.date.getMonth()+1,za=this.date.getDate(),Ca=this.date.getFullYear();var Aa=1;1585>=Ca&&(Aa=0);var bb=-1*Math.floor(7*(Math.floor((W+9)/12)+Ca)/4);var db=1;0>W-9&&(db=-1);db=Math.floor(Ca+db*Math.floor(Math.abs(W-9)/7));db=-1*Math.floor(3*(Math.floor(db/100)+1)/4);bb=bb+Math.floor(275*W/9)+za+Aa*db;return bb+1721027+2*Aa+367*
Ca-.5+.5},G.$$arity=0);a.def(u,"$julian?",M=function(){return this.date<new Date(1582,9,15,12)},M.$$arity=0);a.def(u,"$monday?",ba=function(){return this.$wday()["$=="](1)},ba.$$arity=0);a.def(u,"$month",ua=function(){return this.date.getMonth()+1},ua.$$arity=0);a.def(u,"$next",Pa=function(){return y(this,1)},Pa.$$arity=0);a.def(u,"$next_day",xa=function(W){null==W&&(W=1);return y(this,W)},xa.$$arity=-1);a.def(u,"$next_month",Da=function(W){null==W&&(W=1);var za=this.$clone(),Ca=za.date,Aa=Ca.getDate();
Ca.setDate(1);Ca.setMonth(Ca.getMonth()+W);Ca.setDate(Math.min(Aa,I(Ca.getFullYear(),Ca.getMonth())));return za},Da.$$arity=-1);a.def(u,"$next_year",Ma=function(W){null==W&&(W=1);return this.$class().$new(y(this.$year(),W),this.$month(),this.$day())},Ma.$$arity=-1);a.def(u,"$prev_day",na=function(W){null==W&&(W=1);return J(this,W)},na.$$arity=-1);a.def(u,"$prev_month",S=function(W){null==W&&(W=1);var za=this.$clone(),Ca=za.date,Aa=Ca.getDate();Ca.setDate(1);Ca.setMonth(Ca.getMonth()-W);Ca.setDate(Math.min(Aa,
I(Ca.getFullYear(),Ca.getMonth())));return za},S.$$arity=-1);a.def(u,"$prev_year",sa=function(W){null==W&&(W=1);return this.$class().$new(J(this.$year(),W),this.$month(),this.$day())},sa.$$arity=-1);a.def(u,"$saturday?",ya=function(){return this.$wday()["$=="](6)},ya.$$arity=0);a.def(u,"$strftime",pa=function(W){null==W&&(W="");return""==W?this.$to_s():this.date.$strftime(W)},pa.$$arity=-1);a.alias(u,"succ","next");a.def(u,"$sunday?",fa=function(){return this.$wday()["$=="](0)},fa.$$arity=0);a.def(u,
"$thursday?",F=function(){return this.$wday()["$=="](4)},F.$$arity=0);a.def(u,"$to_s",T=function(){var W=this.date,za=W.getFullYear(),Ca=W.getMonth()+1;W=W.getDate();10>Ca&&(Ca="0"+Ca);10>W&&(W="0"+W);return za+"-"+Ca+"-"+W},T.$$arity=0);a.def(u,"$to_time",ja=function(){return d(e,"Time").$new(this.$year(),this.$month(),this.$day())},ja.$$arity=0);a.def(u,"$to_n",va=function(){return this.date},va.$$arity=0);a.def(u,"$tuesday?",ea=function(){return this.$wday()["$=="](2)},ea.$$arity=0);a.def(u,"$step",
wa=function(W,za){var Ca=wa.$$p,Aa=Ca||z,bb,db,ab=z;ab=ab=z;Ca&&(wa.$$p=null);Ca&&(wa.$$p=null);null==za&&(za=1);ab=J(W,this).$to_i();ab=l(t("number"===typeof ab&&"number"===typeof za?ab*za:ab["$*"](za),0))?[]:l(t(ab,0))?m(a.Range.$new(0,ab["$-@"](),!1).$step(za.$abs()),"map",[],"-@".$to_proc()).$reverse():a.Range.$new(0,ab,!1).$step(za.$abs());ab=m(ab,"map",[],(bb=function(Wa){var Ba=null==bb.$$s?this:bb.$$s;null==Wa&&(Wa=z);return y(Ba,Wa)},bb.$$s=this,bb.$$arity=1,bb));return Aa!==z?(m(ab,"each",
[],(db=function(Wa){null==Wa&&(Wa=z);return a.yield1(Aa,Wa)},db.$$s=this,db.$$arity=1,db)),this):ab},wa.$$arity=-2);a.def(u,"$upto",Ga=function(W){var za=Ga.$$p,Ca=za||z;za&&(Ga.$$p=null);za&&(Ga.$$p=null);return m(this,"step",[W,1],Ca.$to_proc())},Ga.$$arity=1);a.def(u,"$downto",Fa=function(W){var za=Fa.$$p,Ca=za||z;za&&(Fa.$$p=null);za&&(Fa.$$p=null);return m(this,"step",[W,-1],Ca.$to_proc())},Fa.$$arity=1);a.def(u,"$wday",Ra=function(){return this.date.getDay()},Ra.$$arity=0);a.def(u,"$wednesday?",
Ta=function(){return this.$wday()["$=="](3)},Ta.$$arity=0);a.def(u,"$year",Ja=function(){return this.date.getFullYear()},Ja.$$arity=0);a.def(u,"$cwday",kb=function(){return this.date.getDay()||7},kb.$$arity=0);a.def(u,"$cweek",jb=function(){var W=new Date(this.date);W.setHours(0,0,0);W.setDate(W.getDate()+4-(W.getDay()||7));return Math.ceil(((W-new Date(W.getFullYear(),0,1))/864E5+1)/7)},jb.$$arity=0)}(w[0],null,w)};
(function(a){function y(I,e){return"number"===typeof I&&"number"===typeof e?I+e:I["$+"](e)}function J(I,e){return"number"===typeof I&&"number"===typeof e?I>e:I["$>"](e)}function t(I,e){return"number"===typeof I&&"number"===typeof e?I<e:I["$<"](e)}function w(I,e){return"number"===typeof I&&"number"===typeof e?I-e:I["$-"](e)}var z=a.top,p=[],d=a.nil,H=a.$$$,x=a.$$,l=a.klass,m=a.hash2,u=a.truthy,c=a.range,k=a.send;a.add_stubs("$require $setup $first $[] $=== $nil? $empty? $raise $+ $add $join $> $length $change_state $to_i $list $< $set_priority $due_date $append $rename $!= $delete $add_note $delete_note $show $puts $usage $start_repl $cleanup $colorize $private $map $each_with_index $keys $== $select $parse $strftime $today $downcase $lambda $match $! $each $split $strip $chomp $[]= $- $has_key? $sort $generate $gsub $convert_due_date $postprocess_tags $load_tasks $call $write_tasks $update_task $push $max $size $to_s $& $sort_by $filter_tasks $start_with? $abs $rjust $<= $to_a $delete_at $is_a? $execute $each_key $uniq $all? $index $new".split(" "));
z.$require("json");z.$require("date");(function(I,$super,n){I=l(I,$super,"Todo");var L=[I].concat(n),D,R,ka,da,ma,b,h,f,q,A,E,G,M,ba,ua,Pa,xa,Da,Ma,na,S,sa,ya;I.$$prototype.queries=I.$$prototype.today=I.$$prototype.due_date_days=d;a.const_set(L[0],"COLOR_CODES",m("black red green yellow blue magenta cyan white".split(" "),{black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37}));a.const_set(L[0],"STATES",m(["new","done","started","blocked","default"],{"new":"[ ]",done:"[x]",started:"[>]",
blocked:"[!]","default":"[?]"}));a.const_set(L[0],"ORDER",m(["new","done","started","blocked","default"],{"new":3,done:4,started:2,blocked:1,"default":100}));a.const_set(L[0],"COLORS",m(["new","done","started","blocked","default"],{"new":"white",done:"blue",started:"green",blocked:"yellow","default":"magenta"}));a.const_set(L[0],"DATE_FORMAT","%Y-%m-%d");a.const_set(L[0],"DATE_PATTERN",/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/);a.const_set(L[0],"DUE_DATE_DAYS_SIMPLE",["today","tomorrow"]);
a.const_set(L[0],"DUE_DATE_TAG_PATTERN",/(^| )due:([a-zA-Z0-9-]+)/);a.const_set(L[0],"CONTEXT_TAG_PATTERN",/(^| )[@+][\w-]+/);a.const_set(L[0],"PRIORITY_FLAG","*");a.const_set(L[0],"TODO_FILE",require("path").join(require("os").homedir(),"todo.jsonl"));a.def(I,"$execute",D=function(pa){var fa=d,F=d,T=d,ja=d,va=d,ea=d,wa=d,Ga=d,Fa=d,Ra=d,Ta=d,Ja=d,kb=d;try{this.$setup(),fa=pa.$first(),F=u(T=pa["$[]"](c(1,-1,!1)))?T:[],ja=fa,"add"["$==="](ja)?(u(u(va=F["$nil?"]())?va:F["$empty?"]())&&this.$raise(y(fa,
" command requires at least one parameter")),this.$add(F.$join(" "))):"start"["$==="](ja)?u(J(F.$length(),0))?this.$change_state(F.$first().$to_i(),"started",(u(ea=F["$[]"](c(1,-1,!1)))?ea:[]).$join(" ")):this.$list(d,[":started"]):"done"["$==="](ja)?u(J(F.$length(),0))?this.$change_state(F.$first().$to_i(),"done",(u(wa=F["$[]"](c(1,-1,!1)))?wa:[]).$join(" ")):this.$list(d,[":done"]):"block"["$==="](ja)?u(J(F.$length(),0))?this.$change_state(F.$first().$to_i(),"blocked",(u(Ga=F["$[]"](c(1,-1,!1)))?
Ga:[]).$join(" ")):this.$list(d,[":blocked"]):"reset"["$==="](ja)?u(J(F.$length(),0))?this.$change_state(F.$first().$to_i(),"new",(u(Fa=F["$[]"](c(1,-1,!1)))?Fa:[]).$join(" ")):this.$list(d,[":new"]):"prio"["$==="](ja)?(u(t(F.$length(),1))&&this.$raise(y(fa," command requires at least one parameter")),this.$set_priority(F.$first().$to_i(),(u(Ra=F["$[]"](c(1,-1,!1)))?Ra:[]).$join(" "))):"due"["$==="](ja)?(u(t(F.$length(),1))&&this.$raise(y(fa," command requires at least one parameter")),this.$due_date(F.$first().$to_i(),
(u(Ta=F["$[]"](c(1,-1,!1)))?Ta:[]).$join(" "))):"append"["$==="](ja)?(u(t(F.$length(),2))&&this.$raise(y(fa," command requires at least two parameters")),this.$append(F.$first().$to_i(),F["$[]"](c(1,-1,!1)).$join(" "))):"rename"["$==="](ja)?(u(t(F.$length(),2))&&this.$raise(y(fa," command requires at least two parameters")),this.$rename(F.$first().$to_i(),F["$[]"](c(1,-1,!1)).$join(" "))):"del"["$==="](ja)?(u(F.$length()["$!="](1))&&this.$raise(y(fa," command requires exactly one parameter")),this.$delete(F.$first().$to_i())):
"note"["$==="](ja)?(u(t(F.$length(),2))&&this.$raise(y(fa," command requires at least two parameters")),this.$add_note(F.$first().$to_i(),F["$[]"](c(1,-1,!1)).$join(" "))):"delnote"["$==="](ja)?(u(u(Ja=t(F.$length(),1))?Ja:J(F.$length(),2))&&this.$raise(y(fa," command requires one or two parameters")),this.$delete_note(F.$first().$to_i(),F["$[]"](1))):"list"["$==="](ja)?this.$list(d,F):"show"["$==="](ja)?(u(F.$length()["$!="](1))&&this.$raise(y(fa," command requires exactly one parameter")),this.$show(F.$first().$to_i())):
"help"["$==="](ja)?(u(J(F.$length(),0))&&this.$raise(y(fa," command has no parameters")),this.$puts(this.$usage())):"repl"["$==="](ja)?(u(J(F.$length(),0))&&this.$raise(y(fa," command has no parameters")),this.$start_repl()):"cleanup"["$==="](ja)?(u(u(kb=F["$nil?"]())?kb:F["$empty?"]())&&this.$raise(y(fa," command requires at least one parameter")),this.$cleanup(F)):this.$list(d,pa)}catch(jb){if(a.rescue(jb,[H(x(L,"JS"),"Error"),x(L,"StandardError")])){pa=jb;try{this.$puts(""+this.$colorize("ERROR:",
"red")+" "+pa)}finally{a.pop_exception()}}else throw jb;}return this},D.$$arity=1);I.$private();a.def(I,"$usage",R=function(){var pa,fa,F;return"Usage: todo <command> <arguments>\n\nCommands:\n* add <text>                     add new task\n* start <tasknumber> [text]      mark task as started, with optional note\n* done <tasknumber> [text]       mark task as completed, with optional note\n* block <tasknumber> [text]      mark task as blocked, with optional note\n* reset <tasknumber> [text]      reset task to new state, with optional note\n* prio <tasknumber> [text]       toggle high priority flag, with optional note\n* due <tasknumber> [date]        set/unset due date (in YYYY-MM-DD format)\n\n* append <tasknumber> <text>     append text to task title\n* rename <tasknumber> <text>     rename task\n* del <tasknumber>               delete task\n* note <tasknumber> <text>       add note to task\n* delnote <tasknumber> [number]  delete a specific or all notes from task\n\n* list <regex> [regex...]        list tasks (only active tasks by default)\n* show <tasknumber>              show all task details\n* repl                           enter read-eval-print loop mode\n* cleanup <regex> [regex...]     cleanup completed tasks by regex\n* help                           this help screen\n\nWith list command the following pre-defined queries can be also used:\n"+
k(this.queries.$keys().$each_with_index(),"map",[],(pa=function(T,ja){null==T&&(T=d);null==ja&&(ja=d);return y(ja["$=="](8)?"\n":"",T)},pa.$$s=this,pa.$$arity=2,pa)).$join(", ")+'\n\nDue dates can be also added via tags in task title: "due:YYYY-MM-DD"\nIn addition to formatted dates, you can use date synonyms:\n"due:today", "due:tomorrow", and day names e.g. "due:monday" or "due:tue"\n\nLegend: '+k(k(x(L,"STATES"),"select",[],(fa=function(T){null==T&&(T=d);return T["$!="]("default")},fa.$$s=this,
fa.$$arity=2,fa)),"map",[],(F=function(T,ja){null==T&&(T=d);null==ja&&(ja=d);return""+T+" "+ja},F.$$s=this,F.$$arity=2,F)).$join(", ")+", priority "+x(L,"PRIORITY_FLAG")+"\n\nTodo file: "+x(L,"TODO_FILE")+"\n"},R.$$arity=0);a.def(I,"$setup",ka=function(){var pa,fa,F,T,ja,va,ea,wa,Ga,Fa,Ra,Ta,Ja,kb,jb,W,za=d,Ca=d;this.today=x(L,"Date").$parse(x(L,"Date").$today().$strftime(x(L,"DATE_FORMAT")));za=k(c(0,6,!1),"map",[],(pa=function(Aa){var bb=null==pa.$$s?this:pa.$$s;null==bb.today&&(bb.today=d);null==
Aa&&(Aa=d);return y(bb.today,Aa)},pa.$$s=this,pa.$$arity=1,pa));this.due_date_days=k(za,"map",[],(fa=function(Aa){null==Aa&&(Aa=d);return Aa.$strftime("%A").$downcase()},fa.$$s=this,fa.$$arity=1,fa));Ca=k(za,"map",[],(F=function(Aa){null==Aa&&(Aa=d);return Aa.$strftime(x(L,"DATE_FORMAT"))},F.$$s=this,F.$$arity=1,F));return this.queries=m(":active :done :blocked :started :new :all :priority :note :today :tomorrow :next7days :overdue :due".split(" "),{":active":k(this,"lambda",[],(T=function(Aa){null==
Aa&&(Aa=d);return/(new|started|blocked)/.$match(Aa["$[]"]("state"))},T.$$s=this,T.$$arity=1,T)),":done":k(this,"lambda",[],(ja=function(Aa){null==Aa&&(Aa=d);return"done"["$=="](Aa["$[]"]("state"))},ja.$$s=this,ja.$$arity=1,ja)),":blocked":k(this,"lambda",[],(va=function(Aa){null==Aa&&(Aa=d);return"blocked"["$=="](Aa["$[]"]("state"))},va.$$s=this,va.$$arity=1,va)),":started":k(this,"lambda",[],(ea=function(Aa){null==Aa&&(Aa=d);return"started"["$=="](Aa["$[]"]("state"))},ea.$$s=this,ea.$$arity=1,ea)),
":new":k(this,"lambda",[],(wa=function(Aa){null==Aa&&(Aa=d);return"new"["$=="](Aa["$[]"]("state"))},wa.$$s=this,wa.$$arity=1,wa)),":all":k(this,"lambda",[],(Ga=function(Aa){null==Aa&&(Aa=d);return/\w+/.$match(Aa["$[]"]("state"))},Ga.$$s=this,Ga.$$arity=1,Ga)),":priority":k(this,"lambda",[],(Fa=function(Aa){null==Aa&&(Aa=d);return Aa["$[]"]("priority")},Fa.$$s=this,Fa.$$arity=1,Fa)),":note":k(this,"lambda",[],(Ra=function(Aa){var bb;null==Aa&&(Aa=d);return u(bb=Aa["$[]"]("note"))?Aa["$[]"]("note")["$empty?"]()["$!"]():
bb},Ra.$$s=this,Ra.$$arity=1,Ra)),":today":k(this,"lambda",[],(Ta=function(Aa){null==Aa&&(Aa=d);return Ca["$[]"](0)["$=="](Aa["$[]"]("due"))},Ta.$$s=this,Ta.$$arity=1,Ta)),":tomorrow":k(this,"lambda",[],(Ja=function(Aa){null==Aa&&(Aa=d);return Ca["$[]"](1)["$=="](Aa["$[]"]("due"))},Ja.$$s=this,Ja.$$arity=1,Ja)),":next7days":k(this,"lambda",[],(kb=function(Aa){null==Aa&&(Aa=d);return a.regexp(["(",Ca.$join("|"),")"]).$match(Aa["$[]"]("due"))},kb.$$s=this,kb.$$arity=1,kb)),":overdue":k(this,"lambda",
[],(jb=function(Aa){var bb;null==Aa&&(Aa=d);return u(bb=Aa["$[]"]("due"))?t(Aa["$[]"]("due"),Ca["$[]"](0)):bb},jb.$$s=this,jb.$$arity=1,jb)),":due":k(this,"lambda",[],(W=function(Aa){null==Aa&&(Aa=d);return Aa["$[]"]("due")},W.$$s=this,W.$$arity=1,W))})},ka.$$arity=0);a.def(I,"$load_tasks",da=function(pa){var fa,F=d,T=d,ja=d,va=d;null==pa&&(pa=d);F=0;T=m([],{});ja=require("fs").existsSync(x(L,"TODO_FILE"))?require("fs").readFileSync(x(L,"TODO_FILE"),"utf8"):"";u(ja["$empty?"]()["$!"]())&&k(ja.$split("\n"),
"each",[],(fa=function(ea){null==ea&&(ea=d);if(ea.$strip()["$=="](""))return d;F=y(F,1);ea=[F,x(L,"JSON").$parse(ea.$chomp(),m(["symbolize_names"],{symbolize_names:!0}))];k(T,"[]=",a.to_a(ea));return ea[w(ea.length,1)]},fa.$$s=this,fa.$$arity=1,fa));u(u(va=pa)?T["$has_key?"](pa)["$!"]():va)&&this.$raise(""+pa+": No such todo");return T},da.$$arity=-1);a.def(I,"$write_tasks",ma=function(pa){var fa,F=d;F=y(k(pa.$keys().$sort(),"map",[],(fa=function(T){null==T&&(T=d);return x(L,"JSON").$generate(pa["$[]"](T))},
fa.$$s=this,fa.$$arity=1,fa)).$join("\n"),"\n");return require("fs").writeFileSync(x(L,"TODO_FILE"),F,"utf8")},ma.$$arity=1);a.def(I,"$postprocess_tags",b=function(pa){var fa=pa["$[]"]("title").$match(x(L,"DUE_DATE_TAG_PATTERN"));if(u(fa)){var F=["title",pa["$[]"]("title").$gsub(x(L,"DUE_DATE_TAG_PATTERN"),"")];k(pa,"[]=",a.to_a(F));F[w(F.length,1)];F=["due",this.$convert_due_date(fa["$[]"](2))];k(pa,"[]=",a.to_a(F));F[w(F.length,1)]}return u(pa["$[]"]("title")["$empty?"]())?this.$raise("title must not be empty"):
d},b.$$arity=1);a.def(I,"$add",h=function(pa){pa=m(["state","title","modified"],{state:"new",title:pa,modified:this.today.$strftime(x(L,"DATE_FORMAT"))});this.$postprocess_tags(pa);require("fs").appendFileSync(x(L,"TODO_FILE"),y(x(L,"JSON").$generate(pa),"\n"),"utf8");return this.$list()},h.$$arity=1);a.def(I,"$update_task",f=function(pa,fa,F){var T=this.$load_tasks(pa);F.$call(T["$[]"](pa));F=["modified",this.today.$strftime(x(L,"DATE_FORMAT"))];k(T["$[]"](pa),"[]=",a.to_a(F));F[w(F.length,1)];this.$write_tasks(T);
return"show"["$==="](fa)?this.$show(pa,T):"list"["$==="](fa)?this.$list(T):d},f.$$arity=3);a.def(I,"$append",q=function(pa,fa){var F;return this.$update_task(pa,"list",k(this,"lambda",[],(F=function(T){var ja=null==F.$$s?this:F.$$s;null==T&&(T=d);var va=["title",[T["$[]"]("title"),fa].$join(" ")];k(T,"[]=",a.to_a(va));va[w(va.length,1)];return ja.$postprocess_tags(T)},F.$$s=this,F.$$arity=1,F)))},q.$$arity=2);a.def(I,"$rename",A=function(pa,fa){var F;return this.$update_task(pa,"list",k(this,"lambda",
[],(F=function(T){var ja=null==F.$$s?this:F.$$s;null==T&&(T=d);var va=["title",fa];k(T,"[]=",a.to_a(va));va[w(va.length,1)];return ja.$postprocess_tags(T)},F.$$s=this,F.$$arity=1,F)))},A.$$arity=2);a.def(I,"$delete",E=function(pa){var fa=this.$load_tasks(pa);fa.$delete(pa);this.$write_tasks(fa);return this.$list()},E.$$arity=1);a.def(I,"$change_state",G=function(pa,fa,F){var T;null==F&&(F=d);return this.$update_task(pa,"list",k(this,"lambda",[],(T=function(ja){var va=d;null==ja&&(ja=d);var ea=["state",
fa];k(ja,"[]=",a.to_a(ea));ea[w(ea.length,1)];return u(u(va=F["$nil?"]()["$!"]())?F["$empty?"]()["$!"]():va)?(u(ea=ja["$[]"]("note"))?ea:(ea=["note",[]],k(ja,"[]=",a.to_a(ea)),ea[w(ea.length,1)]),ja["$[]"]("note").$push(F)):d},T.$$s=this,T.$$arity=1,T)))},G.$$arity=-3);a.def(I,"$set_priority",M=function(pa,fa){var F;null==fa&&(fa=d);return this.$update_task(pa,"list",k(this,"lambda",[],(F=function(T){var ja=d;null==T&&(T=d);var va=["priority",T["$[]"]("priority")["$!"]()];k(T,"[]=",a.to_a(va));va[w(va.length,
1)];u(T["$[]"]("priority")["$!"]())&&T.$delete("priority");return u(u(ja=fa["$nil?"]()["$!"]())?fa["$empty?"]()["$!"]():ja)?(u(va=T["$[]"]("note"))?va:(va=["note",[]],k(T,"[]=",a.to_a(va)),va[w(va.length,1)]),T["$[]"]("note").$push(fa)):d},F.$$s=this,F.$$arity=1,F)))},M.$$arity=-2);a.def(I,"$due_date",ba=function(pa,fa){var F;null==fa&&(fa="");return this.$update_task(pa,"list",k(this,"lambda",[],(F=function(T){var ja=null==F.$$s?this:F.$$s;null==T&&(T=d);ja=["due",ja.$convert_due_date(fa)];k(T,"[]=",
a.to_a(ja));ja[w(ja.length,1)];return u(T["$[]"]("due")["$nil?"]())?T.$delete("due"):d},F.$$s=this,F.$$arity=1,F)))},ba.$$arity=-2);a.def(I,"$list",ua=function(pa,fa){var F,T,ja=d,va=d,ea=d,wa=d;null==pa&&(pa=d);null==fa&&(fa=d);pa=u(ja=pa)?ja:this.$load_tasks();va=[pa.$keys().$max().$to_s().$size(),4].$max();fa=u(ea=fa)?ea:[];u(fa["$&"](":active :done :blocked :started :new :all".split(" "))["$empty?"]())&&(fa=y(fa,[":active"]));wa=k(this.$filter_tasks(pa,fa),"sort_by",[],(F=function(Ga,Fa){var Ra=
d,Ta=d,Ja=d;null==Ga&&(Ga=d);null==Fa&&(Fa=d);return[u(u(Ra=Fa["$[]"]("priority"))?Fa["$[]"]("state")["$!="]("done"):Ra)?0:1,x(L,"ORDER")["$[]"](u(Ta=Fa["$[]"]("state"))?Ta:"default"),u(Fa["$[]"]("state")["$!="]("done"))?u(Ja=Fa["$[]"]("due"))?Ja:"n/a":Fa["$[]"]("modified"),Ga]},F.$$s=this,F.$$arity=2,F));k(wa,"each",[],(T=function(Ga,Fa){var Ra=null==T.$$s?this:T.$$s,Ta,Ja=d,kb=d,jb=d,W=d,za=d,Ca=d,Aa=d,bb=d,db=Ja=d,ab=d;null==Ra.today&&(Ra.today=d);null==Ra.due_date_days&&(Ra.due_date_days=d);null==
Ga&&(Ga=d);null==Fa&&(Fa=d);Ja=u(kb=Fa["$[]"]("state"))?kb:"default";jb=Ra.$colorize(x(L,"STATES")["$[]"](Ja),x(L,"COLORS")["$[]"](Ja));W=k(Fa["$[]"]("title"),"gsub",[x(L,"CONTEXT_TAG_PATTERN")],(Ta=function(Wa){var Ba=null==Ta.$$s?this:Ta.$$s;null==Wa&&(Wa=d);return y(u(Wa["$start_with?"](" "))?" ":"",Ba.$colorize(Wa.$strip(),"cyan"))},Ta.$$s=Ra,Ta.$$arity=1,Ta));za=u(u(Ca=Fa["$[]"]("priority"))?Ja["$!="]("done"):Ca)?Ra.$colorize(x(L,"PRIORITY_FLAG"),"red"):" ";Aa="";u(u(bb=Fa["$[]"]("due"))?Ja["$!="]("done"):
bb)&&(Ja=w(x(L,"Date").$parse(Fa["$[]"]("due")),Ra.today).$to_i(),u(t(Ja,0))?Aa=Ra.$colorize("("+Ja.$abs()+"d overdue)","red"):u(u(db=Ja["$=="](0))?db:Ja["$=="](1))?Aa=Ra.$colorize("("+x(L,"DUE_DATE_DAYS_SIMPLE")["$[]"](Ja)+")","yellow"):u(J(Ja,1))&&(Aa=Ra.$colorize("("+(u(ab=Ra.due_date_days["$[]"](Ja))?ab:Fa["$[]"]("due"))+")","magenta")),Aa=y(" ",Aa));return Ra.$puts(""+Ga.$to_s().$rjust(va)+":"+za+jb+" "+W+Aa)},T.$$s=this,T.$$arity=2,T));return u(wa["$empty?"]())?this.$puts("No todos found"):
d},ua.$$arity=-1);a.def(I,"$add_note",Pa=function(pa,fa){var F;return this.$update_task(pa,"show",k(this,"lambda",[],(F=function(T){var ja;null==T&&(T=d);u(ja=T["$[]"]("note"))?ja:(ja=["note",[]],k(T,"[]=",a.to_a(ja)),ja[w(ja.length,1)]);return T["$[]"]("note").$push(fa)},F.$$s=this,F.$$arity=1,F)))},Pa.$$arity=2);a.def(I,"$delete_note",xa=function(pa,fa){try{var F;null==fa&&(fa=d);return this.$update_task(pa,"show",k(this,"lambda",[],(F=function(T){var ja=null==F.$$s?this:F.$$s,va=d;null==T&&(T=
d);u(fa.$to_s()["$empty?"]())&&a.ret(T.$delete("note"));var ea=fa.$to_i();ea="number"===typeof ea?0>=ea:ea["$<="](0);ea=u(va=ea)?va:t(T["$[]"]("note").$to_a().$size(),fa.$to_i());u(ea)&&ja.$raise(""+fa.$to_i()+": Note does not exist");T["$[]"]("note").$delete_at(w(fa.$to_i(),1));return u(T["$[]"]("note")["$empty?"]())?T.$delete("note"):d},F.$$s=this,F.$$arity=1,F)))}catch(T){if(T===a.returner)return T.$v;throw T;}},xa.$$arity=-2);a.def(I,"$show",Da=function(pa,fa){var F,T=d;null==fa&&(fa=d);fa=u(T=
fa)?T:this.$load_tasks(pa);return k(fa["$[]"](pa),"each",[],(F=function(ja,va){var ea=null==F.$$s?this:F.$$s,wa;null==ja&&(ja=d);null==va&&(va=d);u(va["$is_a?"](x(L,"Array")))&&(va=y("\n",k(va.$each_with_index(),"map",[],(wa=function(Ga,Fa){null==Ga&&(Ga=d);null==Fa&&(Fa=d);return u(J(va.$size(),1))?""+y(Fa,1).$to_s().$rjust(va.$size().$to_s().$size())+": "+Ga:Ga},wa.$$s=ea,wa.$$arity=2,wa)).$join("\n")));return ea.$puts(""+ea.$colorize(y(ja.$to_s().$rjust(10),":"),"cyan")+" "+va)},F.$$s=this,F.$$arity=
2,F))},Da.$$arity=-2);a.def(I,"$start_repl",Ma=function(){function pa(){T.question("\ntodo> ",function(ja){try{ja=ja.trim(),["exit","quit"].includes(ja)?T.close():(["clear","cls"].includes(ja)?process.stdout.write("\u001b[H\u001b[2J"):F(ja),pa())}catch(va){throw T.close(),va;}})}var fa,F=d;F=k(this,"lambda",[],(fa=function(ja){var va=null==fa.$$s?this:fa.$$s;null==ja&&(ja=d);return va.$execute(ja["$=="]("repl")?[]:ja.$split(/\s+/))},fa.$$s=this,fa.$$arity=1,fa));var T=require("readline").createInterface({input:process.stdin,
output:process.stdout});F("");pa()},Ma.$$arity=0);a.def(I,"$cleanup",na=function(pa){var fa,F=d,T=d;F=this.$load_tasks();pa=y([":done"],pa.$to_a());T=this.$filter_tasks(F,pa);k(T,"each_key",[],(fa=function(ja){null==ja&&(ja=d);return F.$delete(ja)},fa.$$s=this,fa.$$arity=1,fa));this.$write_tasks(F);return this.$puts("Deleted "+T.$size()+" todo(s)")},na.$$arity=1);a.def(I,"$filter_tasks",S=function(pa,fa){var F;fa=fa.$uniq();return k(pa,"select",[],(F=function(T,ja){var va=null==F.$$s?this:F.$$s,ea;
null==T&&(T=d);null==ja&&(ja=d);return k(fa,"all?",[],(ea=function(wa){var Ga=null==ea.$$s?this:ea.$$s;null==Ga.queries&&(Ga.queries=d);null==wa&&(wa=d);return u(Ga.queries["$[]"](wa))?Ga.queries["$[]"](wa).$call(ja):a.regexp([wa],"i").$match(ja["$[]"]("title"))},ea.$$s=va,ea.$$arity=1,ea))},F.$$s=this,F.$$arity=2,F))},S.$$arity=2);a.def(I,"$colorize",sa=function(pa,fa){var F=d;return"\u001b["+(u(F=x(L,"COLOR_CODES")["$[]"](fa))?F:37)+"m"+pa+"\u001b[0m"},sa.$$arity=2);return(a.def(I,"$convert_due_date",
ya=function(pa){var fa,F=this,T=d,ja=d,va=d,ea=d;T=function(){return u(ja=u(va=F.due_date_days.$index(pa.$to_s().$downcase()))?va:x(L,"DUE_DATE_DAYS_SIMPLE").$index(pa.$to_s().$downcase()))?ja:k(F.due_date_days,"map",[],(fa=function(wa){null==wa&&(wa=d);return wa["$[]"](c(0,2,!1))},fa.$$s=F,fa.$$arity=1,fa)).$index(pa.$to_s().$downcase())}();return u(T)?y(F.today,T).$strftime(x(L,"DATE_FORMAT")):u(u(ea=pa["$nil?"]())?ea:pa["$empty?"]())?d:x(L,"Date").$parse(x(L,"DATE_PATTERN").$match(pa).$to_s()).$strftime(x(L,
"DATE_FORMAT"))},ya.$$arity=1),d)&&"convert_due_date"})(p[0],null,p);return x(p,"Todo").$new().$execute(process.argv.slice(2))})(Opal);var Qb=Opal.$$;Opal.add_stubs(["$exit"]);Qb([],"Kernel").$exit();}).call(this);
